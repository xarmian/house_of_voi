/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 */
import * as algokit from '@algorandfoundation/algokit-utils';
import { AtomicTransactionComposer, modelsv2 } from 'algosdk';
export const APP_SPEC = {
    "hints": {
        "get_bet_claim_round(byte[56])uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin_payline_cost()uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin(uint64,uint64,uint64)byte[56]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin_cost()uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claim(byte[56])uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "owner_deposit(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "deposit()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_available()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_locked()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_total()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "bootstrap()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "bootstrap_cost()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_owner()address": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "transfer_ownership(address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TcGluTWFuYWdlci5hcHByb3ZhbF9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMTkKICAgIG1ldGhvZCAiZ2V0X2JldF9jbGFpbV9yb3VuZChieXRlWzU2XSl1aW50NjQiCiAgICBtZXRob2QgInNwaW5fcGF5bGluZV9jb3N0KCl1aW50NjQiCiAgICBtZXRob2QgInNwaW4odWludDY0LHVpbnQ2NCx1aW50NjQpYnl0ZVs1Nl0iCiAgICBtZXRob2QgInNwaW5fY29zdCgpdWludDY0IgogICAgbWV0aG9kICJjbGFpbShieXRlWzU2XSl1aW50NjQiCiAgICBtZXRob2QgIm93bmVyX2RlcG9zaXQodWludDY0KXZvaWQiCiAgICBtZXRob2QgImRlcG9zaXQoKXZvaWQiCiAgICBtZXRob2QgIndpdGhkcmF3KHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJnZXRfYmFsYW5jZV9hdmFpbGFibGUoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X2JhbGFuY2VfbG9ja2VkKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlX3RvdGFsKCl1aW50NjQiCiAgICBtZXRob2QgImJvb3RzdHJhcCgpdm9pZCIKICAgIG1ldGhvZCAiYm9vdHN0cmFwX2Nvc3QoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X293bmVyKClhZGRyZXNzIgogICAgbWV0aG9kICJ0cmFuc2Zlcl9vd25lcnNoaXAoYWRkcmVzcyl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9nZXRfYmV0X2NsYWltX3JvdW5kX3JvdXRlQDIgbWFpbl9zcGluX3BheWxpbmVfY29zdF9yb3V0ZUAzIG1haW5fc3Bpbl9yb3V0ZUA0IG1haW5fc3Bpbl9jb3N0X3JvdXRlQDUgbWFpbl9jbGFpbV9yb3V0ZUA2IG1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUA3IG1haW5fZGVwb3NpdF9yb3V0ZUA4IG1haW5fd2l0aGRyYXdfcm91dGVAOSBtYWluX2dldF9iYWxhbmNlX2F2YWlsYWJsZV9yb3V0ZUAxMCBtYWluX2dldF9iYWxhbmNlX2xvY2tlZF9yb3V0ZUAxMSBtYWluX2dldF9iYWxhbmNlX3RvdGFsX3JvdXRlQDEyIG1haW5fYm9vdHN0cmFwX3JvdXRlQDEzIG1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVAMTQgbWFpbl9nZXRfb3duZXJfcm91dGVAMTUgbWFpbl90cmFuc2Zlcl9vd25lcnNoaXBfcm91dGVAMTYKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCm1haW5fZ2V0X2JldF9jbGFpbV9yb3VuZF9yb3V0ZUAyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9iZXRfY2xhaW1fcm91bmQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9wYXlsaW5lX2Nvc3Rfcm91dGVAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTI3CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgc3Bpbl9wYXlsaW5lX2Nvc3QKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9yb3V0ZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNwaW4KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9jb3N0X3JvdXRlQDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjczNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIHNwaW5fY29zdAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9jbGFpbV9yb3V0ZUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3NjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc2NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIGNsYWltCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX293bmVyX2RlcG9zaXRfcm91dGVANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzkyCiAgICAvLyBjbGFzcyBTcGluTWFuYWdlcihTcGluTWFuYWdlckludGVyZmFjZSwgQmFua01hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1ODUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBvd25lcl9kZXBvc2l0CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2RlcG9zaXRfcm91dGVAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYzCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZGVwb3NpdAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl93aXRoZHJhd19yb3V0ZUA5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHdpdGhkcmF3CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlX2F2YWlsYWJsZV9yb3V0ZUAxMDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk1CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlX2xvY2tlZF9yb3V0ZUAxMToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTA5CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2JhbGFuY2VfbG9ja2VkCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iYWxhbmNlX3RvdGFsX3JvdXRlQDEyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBnZXRfYmFsYW5jZV90b3RhbAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9ib290c3RyYXBfcm91dGVAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgYm9vdHN0cmFwCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2Jvb3RzdHJhcF9jb3N0X3JvdXRlQDE0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGJvb3RzdHJhcF9jb3N0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9vd25lcl9yb3V0ZUAxNToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X293bmVyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3RyYW5zZmVyX293bmVyc2hpcF9yb3V0ZUAxNjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzkyCiAgICAvLyBjbGFzcyBTcGluTWFuYWdlcihTcGluTWFuYWdlckludGVyZmFjZSwgQmFua01hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiB0cmFuc2Zlcl9vd25lcnNoaXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYmFyZV9yb3V0aW5nQDE5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gcmVqZWN0IHRyYW5zYWN0aW9uCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgIQogICAgYXNzZXJ0IC8vIGlzIGNyZWF0aW5nCiAgICBpbnQgMQogICAgcmV0dXJuCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuZ2V0X2JldF9jbGFpbV9yb3VuZChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6CmdldF9iZXRfY2xhaW1fcm91bmQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxMy04MTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iZXRfY2xhaW1fcm91bmQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODE1CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JldF9jbGFpbV9yb3VuZChiZXRfa2V5LmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2JldF9jbGFpbV9yb3VuZAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2dldF9iZXRfY2xhaW1fcm91bmQoYmV0X2tleTogYnl0ZXMpIC0+IHVpbnQ2NDoKX2dldF9iZXRfY2xhaW1fcm91bmQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxNy04MTgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfY2xhaW1fcm91bmQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MTkKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkpLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0CiAgICBleHRyYWN0IDQ4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fZ2V0X2JldChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfYmV0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MDAtODAxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmV0KHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBCZXQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAyLTgxMQogICAgLy8gcmV0dXJuIHNlbGYuYmV0LmdldCgKICAgIC8vICAgICBiZXRfa2V5LAogICAgLy8gICAgIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgwNC04MTAKICAgIC8vIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHBheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyApLAogICAgYnl0ZSBiYXNlMzIgQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQT0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODAyLTgxMQogICAgLy8gcmV0dXJuIHNlbGYuYmV0LmdldCgKICAgIC8vICAgICBiZXRfa2V5LAogICAgLy8gICAgIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgICAgICB3aG89YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICBhbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICApLAogICAgLy8gKQogICAgY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5zcGluX3BheWxpbmVfY29zdCgpIC0+IGJ5dGVzOgpzcGluX3BheWxpbmVfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTI3LTkyOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3Bpbl9wYXlsaW5lX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTI5CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3Bpbl9wYXlsaW5lX2Nvc3QoKSkKICAgIGNhbGxzdWIgX3NwaW5fcGF5bGluZV9jb3N0CiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fc3Bpbl9wYXlsaW5lX2Nvc3QoKSAtPiB1aW50NjQ6Cl9zcGluX3BheWxpbmVfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTMxLTkzMgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9wYXlsaW5lX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkzMwogICAgLy8gcmV0dXJuIFVJbnQ2NCgzMDAwMCkKICAgIGludCAzMDAwMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXJJbnRlcmZhY2Uuc3BpbihiZXRfYW1vdW50OiBieXRlcywgbWF4X3BheWxpbmVfaW5kZXg6IGJ5dGVzLCBpbmRleDogYnl0ZXMpIC0+IGJ5dGVzOgpzcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MTQtNzIwCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyAgICAgYmV0X2Ftb3VudDogYXJjNC5VSW50NjQsCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXg6IGFyYzQuVUludDY0LAogICAgLy8gICAgIGluZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICkgLT4gQnl0ZXM1NjoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MzQKICAgIC8vIHNlbGYuX3NwaW4oYmV0X2Ftb3VudC5uYXRpdmUsIG1heF9wYXlsaW5lX2luZGV4Lm5hdGl2ZSwgaW5kZXgubmF0aXZlKQogICAgZnJhbWVfZGlnIC0zCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTIKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfc3BpbgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MzMtNzM1CiAgICAvLyByZXR1cm4gQnl0ZXM1Ni5mcm9tX2J5dGVzKAogICAgLy8gICAgIHNlbGYuX3NwaW4oYmV0X2Ftb3VudC5uYXRpdmUsIG1heF9wYXlsaW5lX2luZGV4Lm5hdGl2ZSwgaW5kZXgubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX3NwaW4oYmV0X2Ftb3VudDogdWludDY0LCBtYXhfcGF5bGluZV9pbmRleDogdWludDY0LCBpbmRleDogdWludDY0KSAtPiBieXRlczoKX3NwaW46CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkzNS05MzkKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgYmV0X2Ftb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gMyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk1MS05NTIKICAgIC8vICMgcGF5bWVudCBhc3NlcnRpb25zCiAgICAvLyBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA9IGJldF9hbW91bnQgKiAobWF4X3BheWxpbmVfaW5kZXggKyBVSW50NjQoMSkpCiAgICBmcmFtZV9kaWcgLTIKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgLTMKICAgIGRpZyAxCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk1NAogICAgLy8gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgPj0gc2VsZi5fZ2V0X21pbl9iZXRfYW1vdW50KCkKICAgIGNhbGxzdWIgX2dldF9taW5fYmV0X2Ftb3VudAogICAgZGlnIDEKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk1My05NTUKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgPj0gc2VsZi5fZ2V0X21pbl9iZXRfYW1vdW50KCkKICAgIC8vICksICJiZXQgYW1vdW50IHRvbyBzbWFsbCIKICAgIGFzc2VydCAvLyBiZXQgYW1vdW50IHRvbyBzbWFsbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NTcKICAgIC8vIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfYmV0X2Ftb3VudCgpCiAgICBjYWxsc3ViIF9nZXRfbWF4X2JldF9hbW91bnQKICAgIGRpZyAxCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NTYtOTU4CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfYmV0X2Ftb3VudCgpCiAgICAvLyApLCAiYmV0IGFtb3VudCB0b28gbGFyZ2UiCiAgICBhc3NlcnQgLy8gYmV0IGFtb3VudCB0b28gbGFyZ2UKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTU5CiAgICAvLyBhY3R1YWxfcGF5bWVudF9hbW91bnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk2MAogICAgLy8gYXNzZXJ0IGFjdHVhbF9wYXltZW50X2Ftb3VudCA+PSBleHBlY3RlZF9wYXltZW50X2Ftb3VudCwgInBheW1lbnQgaW5zdWZmaWNpZW50IgogICAgZHVwCiAgICBkaWcgMgogICAgPj0KICAgIGFzc2VydCAvLyBwYXltZW50IGluc3VmZmljaWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjEKICAgIC8vIGV4dHJhX3BheW1lbnRfYW1vdW50ID0gYWN0dWFsX3BheW1lbnRfYW1vdW50IC0gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQKICAgIGRpZyAxCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk2Mi05NjMKICAgIC8vICMgZXh0cmEgcGF5bWVudCBhbW91bnQgbXVzdCBsZXNzIHRoYW4gbWF4IGJ1dCBncmVhdGVyIHRoYW4gbWluIGNvc3RzCiAgICAvLyBtaW5fY29zdHMgPSBzZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkgKiAoCiAgICBjYWxsc3ViIF9zcGluX2Nvc3QKICAgIGNhbGxzdWIgX3NwaW5fcGF5bGluZV9jb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk2Mi05NjUKICAgIC8vICMgZXh0cmEgcGF5bWVudCBhbW91bnQgbXVzdCBsZXNzIHRoYW4gbWF4IGJ1dCBncmVhdGVyIHRoYW4gbWluIGNvc3RzCiAgICAvLyBtaW5fY29zdHMgPSBzZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkgKiAoCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXggKyBVSW50NjQoMSkKICAgIC8vICkKICAgIHVuY292ZXIgNAogICAgKgogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjcKICAgIC8vIGV4dHJhX3BheW1lbnRfYW1vdW50ID49IG1pbl9jb3N0cwogICAgZGlnIDEKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk2Ni05NjgKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPj0gbWluX2Nvc3RzCiAgICAvLyApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBib3ggY29zdCIKICAgIGFzc2VydCAvLyBleHRyYSBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJveCBjb3N0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk3MAogICAgLy8gZXh0cmFfcGF5bWVudF9hbW91bnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkKICAgIGNhbGxzdWIgX2dldF9tYXhfZXh0cmFfcGF5bWVudAogICAgPD0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTY5LTk3MQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKQogICAgLy8gKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICBhc3NlcnQgLy8gZXh0cmEgcGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NzItOTgwCiAgICAvLyAjIGJhbmsgYXNzZXJ0aW9ucwogICAgLy8gIyBsb2NrIHNwaW4gaWYgYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gbWluIGJhbmsgYW1vdW50CiAgICAvLyAjIGFzc2VydCAoCiAgICAvLyAjICAgICBzZWxmLl9nZXRfYmFsYW5jZV90b3RhbCgpID49IHNlbGYuX2dldF9taW5fYmFua19hbW91bnQoKQogICAgLy8gIyApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICAvLyAjIFVwZGF0ZSBiYWxhbmNlIHRyYWNraW5nCiAgICAvLyAjICAgQWRkIGJldCBhbW91bnQgdG8gdG90YWwgYmFsYW5jZQogICAgLy8gIyBhc3NlcnQgbWF4IHBheWxpbmUgaW5kZXggaXMgbGVzcyB0aGFuIG1heCBpbmRleAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk4MQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGV4cGVjdGVkX3BheW1lbnRfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTgzCiAgICAvLyBleHBlY3RlZF9wYXltZW50X2Ftb3VudCAqIHNlbGYuX2dldF9tYXhfcGF5b3V0X211bHRpcGxpZXIoKQogICAgY2FsbHN1YiBfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcgogICAgKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5ODUKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChtYXhfcG9zc2libGVfcGF5b3V0KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTg2CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUobWF4X3Bvc3NpYmxlX3BheW91dCkKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5ODctOTg4CiAgICAvLyAjIENyZWF0ZSBiZXQKICAgIC8vIGNvbmZpcm1lZF9yb3VuZCA9IEdsb2JhbC5yb3VuZAogICAgZ2xvYmFsIFJvdW5kCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk4OQogICAgLy8gYmV0X2tleSA9IHNlbGYuX2dldF9iZXRfa2V5KFR4bi5zZW5kZXIsIGJldF9hbW91bnQsIG1heF9wYXlsaW5lX2luZGV4LCBpbmRleCkKICAgIHR4biBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMwogICAgZnJhbWVfZGlnIC0yCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXRfa2V5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc5OC05OTAKICAgIC8vICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmV0KHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBCZXQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuYmV0LmdldCgKICAgIC8vICAgICAgICAgYmV0X2tleSwKICAgIC8vICAgICAgICAgZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgICAgICAgICB3aG89YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmV0X2NsYWltX3JvdW5kKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmV0X2NsYWltX3JvdW5kKGJldF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmV0X2NsYWltX3JvdW5kKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX2dldF9iZXQoYmV0X2tleSkuY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyAKICAgIC8vICMgLS0tIGJvb3RzdHJhcCAtLS0KICAgIC8vIAogICAgLy8gIyBpbmhlcml0cyBib29zdHJhcHBlZCBmcm9tIGJhbmsgbWFuYWdlcgogICAgLy8gIyAgZG9lcyBub3QgYXR0ZW1wdCB0byBib29zdHJhcCBmb3IgaXQKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gR2xvYmFsLm1pbl9iYWxhbmNlICsgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMjY1MDApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBub3Qgc2VsZi5fc3Bpbl9wYXJhbXMoKS5zcGluX2Z1c2UubmF0aXZlCiAgICAvLyAgICAgKSwgInNwaW4gcGFyYW1zIG11c3Qgbm90IGJlIGluaXRpYWxpemVkIgogICAgLy8gICAgIEJveChTcGluUGFyYW1zLCBrZXk9InNwaW5fcGFyYW1zIikudmFsdWUgPSBTcGluUGFyYW1zKAogICAgLy8gICAgICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgxMDAwMDAwKSwgICMgMSBWT0kKICAgIC8vICAgICAgICAgbWF4X3BheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDEwMDApLCAgIyAxMDAweAogICAgLy8gICAgICAgICByb3VuZF9mdXR1cmVfZGVsdGE9YXJjNC5VSW50NjQoMSksICAjIDEgcm91bmQKICAgIC8vICAgICAgICAgbWluX2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JICgxIFZPSSBiZXQsIDEgcGF5bGluZSkKICAgIC8vICAgICAgICAgbWF4X2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMjAwMDAwMDApLCAgIyAyMCBWT0kKICAgIC8vICAgICAgICAgbWluX2JhbmtfYW1vdW50PWFyYzQuVUludDY0KDEwMDAwMDAwMDAwMCksICAjIDEwMGsgVk9JCiAgICAvLyAgICAgICAgIHNwaW5fZnVzZT1hcmM0LkJvb2woVHJ1ZSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9zcGluX3BhcmFtcyhzZWxmKSAtPiBTcGluUGFyYW1zOgogICAgLy8gICAgIHJldHVybiBTcGluUGFyYW1zKAogICAgLy8gICAgICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbWF4X3BheW91dF9tdWx0aXBsaWVyPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICByb3VuZF9mdXR1cmVfZGVsdGE9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1pbl9iZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBtYXhfYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbWluX2JhbmtfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBzcGluX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fcGFyYW1zKHNlbGYpIC0+IFNwaW5QYXJhbXM6CiAgICAvLyAgICAgcmV0dXJuIEJveChTcGluUGFyYW1zLCBrZXk9InNwaW5fcGFyYW1zIikuZ2V0KAogICAgLy8gICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfc3Bpbl9wYXJhbXMoKQogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9leHRyYV9wYXltZW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfZXh0cmFfcGF5bWVudC5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcihzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X3BheW91dF9tdWx0aXBsaWVyLm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5yb3VuZF9mdXR1cmVfZGVsdGEubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9taW5fYmV0X2Ftb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbWluIGJldCBhbW91bnQgaXMgMSBWT0kKICAgIC8vICAgICAiIiIKICAgIC8vICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5taW5fYmV0X2Ftb3VudC5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9iZXRfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBtYXggYmV0IGFtb3VudCBpcyA5IFZPSS4gTXVzdCBiZSBhZGp1c3RlZCBmb3IgdGhlIG1heCBwYXlvdXQgbXVsdGlwbGllciBhbmQKICAgIC8vICAgICBtYXggcGF5b3V0IGluZGV4CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X2JldF9hbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9taW5fYmFua19hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1pbl9iYW5rX2Ftb3VudC5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgc2VsZiwgYWRkcmVzczogQWNjb3VudCwgYW1vdW50OiBVSW50NjQsIG1heF9wYXlsaW5lX2luZGV4OiBVSW50NjQsIGluZGV4OiBVSW50NjQKICAgIC8vICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgICAgICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KG1heF9wYXlsaW5lX2luZGV4KS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDUwNTAwKQogICAgLy8gCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluX3BheWxpbmVfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3Bpbl9wYXlsaW5lX2Nvc3QoKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9wYXlsaW5lX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBVSW50NjQoMzAwMDApCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW4oCiAgICAvLyAgICAgc2VsZiwgYmV0X2Ftb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIFNwaW4gdGhlIHNsb3QgbWFjaGluZS4gT3V0Y29tZSBpcyBkZXRlcm1pbmVkIGJ5IHRoZSBzZWVkCiAgICAvLyAgICAgb2YgZnV0dXJlIHJvdW5kLgogICAgLy8gCiAgICAvLyAgICAgQXJnczoKICAgIC8vICAgICAgICAgYmV0ICh1aW50KTogVGhlIHBsYXllcidzIHdhZ2VyLgogICAgLy8gICAgICAgICBpbmRleCAodWludCk6IFBsYXllcidzIGNob2ljZSBvZiBpbmRleC4KICAgIC8vIAogICAgLy8gICAgIFJldHVybnM6CiAgICAvLyAgICAgICAgIHIgKHVpbnQpOiBUaGUgcm91bmQgbnVtYmVyIG9mIHRoZSBzcGluLgogICAgLy8gICAgICIiIgogICAgLy8gICAgICMgcGF5bWVudCBhc3NlcnRpb25zCiAgICAvLyAgICAgZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgPSBiZXRfYW1vdW50ICogKG1heF9wYXlsaW5lX2luZGV4ICsgVUludDY0KDEpKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID49IHNlbGYuX2dldF9taW5fYmV0X2Ftb3VudCgpCiAgICAvLyAgICAgKSwgImJldCBhbW91bnQgdG9vIHNtYWxsIgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfYmV0X2Ftb3VudCgpCiAgICAvLyAgICAgKSwgImJldCBhbW91bnQgdG9vIGxhcmdlIgogICAgLy8gICAgIGFjdHVhbF9wYXltZW50X2Ftb3VudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgLy8gICAgIGFzc2VydCBhY3R1YWxfcGF5bWVudF9hbW91bnQgPj0gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQsICJwYXltZW50IGluc3VmZmljaWVudCIKICAgIC8vICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA9IGFjdHVhbF9wYXltZW50X2Ftb3VudCAtIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50CiAgICAvLyAgICAgIyBleHRyYSBwYXltZW50IGFtb3VudCBtdXN0IGxlc3MgdGhhbiBtYXggYnV0IGdyZWF0ZXIgdGhhbiBtaW4gY29zdHMKICAgIC8vICAgICBtaW5fY29zdHMgPSBzZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkgKiAoCiAgICAvLyAgICAgICAgIG1heF9wYXlsaW5lX2luZGV4ICsgVUludDY0KDEpCiAgICAvLyAgICAgKQogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGV4dHJhX3BheW1lbnRfYW1vdW50ID49IG1pbl9jb3N0cwogICAgLy8gICAgICksICJleHRyYSBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJveCBjb3N0IgogICAgLy8gICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgIGV4dHJhX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfZXh0cmFfcGF5bWVudCgpCiAgICAvLyAgICAgKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAgICAgIyBiYW5rIGFzc2VydGlvbnMKICAgIC8vICAgICAjIGxvY2sgc3BpbiBpZiBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBtaW4gYmFuayBhbW91bnQKICAgIC8vICAgICAjIGFzc2VydCAoCiAgICAvLyAgICAgIyAgICAgc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLl9nZXRfbWluX2JhbmtfYW1vdW50KCkKICAgIC8vICAgICAjICksICJiYWxhbmNlIHRvdGFsIG11c3QgYmUgZ3JlYXRlciB0aGFuIG1pbiBiYW5rIGFtb3VudCIKICAgIC8vICAgICAjIFVwZGF0ZSBiYWxhbmNlIHRyYWNraW5nCiAgICAvLyAgICAgIyAgIEFkZCBiZXQgYW1vdW50IHRvIHRvdGFsIGJhbGFuY2UKICAgIC8vICAgICAjIGFzc2VydCBtYXggcGF5bGluZSBpbmRleCBpcyBsZXNzIHRoYW4gbWF4IGluZGV4CiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQpCiAgICAvLyAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGV4cGVjdGVkX3BheW1lbnRfYW1vdW50KQogICAgLy8gICAgIG1heF9wb3NzaWJsZV9wYXlvdXQgPSAoCiAgICAvLyAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ICogc2VsZi5fZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcigpCiAgICAvLyAgICAgKQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2xvY2tlZChtYXhfcG9zc2libGVfcGF5b3V0KQogICAgLy8gICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShtYXhfcG9zc2libGVfcGF5b3V0KQogICAgLy8gICAgICMgQ3JlYXRlIGJldAogICAgLy8gICAgIGNvbmZpcm1lZF9yb3VuZCA9IEdsb2JhbC5yb3VuZAogICAgLy8gICAgIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleShUeG4uc2VuZGVyLCBiZXRfYW1vdW50LCBtYXhfcGF5bGluZV9pbmRleCwgaW5kZXgpCiAgICAvLyAgICAgYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgZHVwCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgICEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTkwCiAgICAvLyBhc3NlcnQgYmV0X2tleSBub3QgaW4gc2VsZi5iZXQsICJiZXQgYWxyZWFkeSBleGlzdHMiCiAgICBhc3NlcnQgLy8gYmV0IGFscmVhZHkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5MQogICAgLy8gY2xhaW1fcm91bmQgPSBjb25maXJtZWRfcm91bmQgKyBzZWxmLl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKCkKICAgIGNhbGxzdWIgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEKICAgIHVuY292ZXIgMgogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTMKICAgIC8vIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICB0eG4gU2VuZGVyCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5NAogICAgLy8gYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgZnJhbWVfZGlnIC0zCiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5NQogICAgLy8gbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgZnJhbWVfZGlnIC0yCiAgICBpdG9iCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5NgogICAgLy8gY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgc3dhcAogICAgaXRvYgogICAgY292ZXIgMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTItOTk4CiAgICAvLyBzZWxmLmJldFtiZXRfa2V5XSA9IEJldCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gICAgIHBheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyApCiAgICB1bmNvdmVyIDIKICAgIGRpZyAxCiAgICBjb25jYXQKICAgIGRpZyAyCiAgICBjb25jYXQKICAgIGRpZyAzCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTk3CiAgICAvLyBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTkyLTk5OAogICAgLy8gc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gKQogICAgY29uY2F0CiAgICBkaWcgNAogICAgc3dhcAogICAgYm94X3B1dAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDAxCiAgICAvLyB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgdHhuIFNlbmRlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDAwLTEwMDUKICAgIC8vIEJldFBsYWNlZCgKICAgIC8vICAgICB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gKQogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTktMTAwNgogICAgLy8gYXJjNC5lbWl0KAogICAgLy8gICAgIEJldFBsYWNlZCgKICAgIC8vICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICApCiAgICAvLyApCiAgICBtZXRob2QgIkJldFBsYWNlZChhZGRyZXNzLHVpbnQ2NCx1aW50NjQsdWludDY0KSIKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMDcKICAgIC8vIHJldHVybiBiZXRfa2V5CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fZ2V0X21pbl9iZXRfYW1vdW50KCkgLT4gdWludDY0OgpfZ2V0X21pbl9iZXRfYW1vdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OTItODkzCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWluX2JldF9hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg5NwogICAgLy8gcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWluX2JldF9hbW91bnQubmF0aXZlCiAgICBjYWxsc3ViIF9zcGluX3BhcmFtcwogICAgZXh0cmFjdCAyNCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX3NwaW5fcGFyYW1zKCkgLT4gYnl0ZXM6Cl9zcGluX3BhcmFtczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODc0LTg3NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9wYXJhbXMoc2VsZikgLT4gU3BpblBhcmFtczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NzcKICAgIC8vIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9zcGluX3BhcmFtcygpCiAgICBjYWxsc3ViIF9pbnZhbGlkX3NwaW5fcGFyYW1zCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg3NgogICAgLy8gcmV0dXJuIEJveChTcGluUGFyYW1zLCBrZXk9InNwaW5fcGFyYW1zIikuZ2V0KAogICAgYnl0ZSAic3Bpbl9wYXJhbXMiCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg3Ni04NzgKICAgIC8vIHJldHVybiBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLmdldCgKICAgIC8vICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfc3Bpbl9wYXJhbXMoKQogICAgLy8gKQogICAgYm94X2dldAogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5faW52YWxpZF9zcGluX3BhcmFtcygpIC0+IGJ5dGVzOgpfaW52YWxpZF9zcGluX3BhcmFtczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODYyLTg2MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9zcGluX3BhcmFtcyhzZWxmKSAtPiBTcGluUGFyYW1zOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg2NC04NzIKICAgIC8vIHJldHVybiBTcGluUGFyYW1zKAogICAgLy8gICAgIG1heF9leHRyYV9wYXltZW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1heF9wYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICByb3VuZF9mdXR1cmVfZGVsdGE9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWluX2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF4X2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWluX2JhbmtfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIHNwaW5fZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fZ2V0X21heF9iZXRfYW1vdW50KCkgLT4gdWludDY0OgpfZ2V0X21heF9iZXRfYW1vdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OTktOTAwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2JldF9hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkwNQogICAgLy8gcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X2JldF9hbW91bnQubmF0aXZlCiAgICBjYWxsc3ViIF9zcGluX3BhcmFtcwogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gb3BlbnN1Ym1hcmluZS51dGlscy5hbGdvcmFuZC5yZXF1aXJlX3BheW1lbnQod2hvOiBieXRlcykgLT4gdWludDY0OgpyZXF1aXJlX3BheW1lbnQ6CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjE1LTIzCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyAjIGZ1bmN0aW9uOiByZXF1aXJlX3BheW1lbnQgKGludGVybmFsKQogICAgLy8gIyBhcmd1bWVudHM6IE5vbmUKICAgIC8vICMgcHVycG9zZTogY2hlY2sgcGF5bWVudAogICAgLy8gIyBwcmUtY29uZGl0aW9uczogTm9uZQogICAgLy8gIyBwb3N0LWNvbmRpdGlvbnM6IE5vbmUKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgcmVxdWlyZV9wYXltZW50KHdobzogQWNjb3VudCkgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI0CiAgICAvLyByZWZfZ3JvdXBfaW5kZXggPSBUeG4uZ3JvdXBfaW5kZXgKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI1CiAgICAvLyBhc3NlcnQgcmVmX2dyb3VwX2luZGV4ID4gMCwgImdyb3VwIGluZGV4IGdyZWF0ZXIgdGhhbiB6ZXJvIgogICAgZHVwCiAgICBhc3NlcnQgLy8gZ3JvdXAgaW5kZXggZ3JlYXRlciB0aGFuIHplcm8KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjYKICAgIC8vIHBheW1lbnRfZ3JvdXBfaW5kZXggPSByZWZfZ3JvdXBfaW5kZXggLSAxCiAgICBpbnQgMQogICAgLQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyOAogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50IHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgZHVwCiAgICBndHhucyBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMQogICAgPT0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjctMjkKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuc2VuZGVyID09IHdobwogICAgLy8gKSwgInBheW1lbnQgc2VuZGVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgc2VuZGVyIGFjY3VyYXRlCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMxCiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgZHVwCiAgICBndHhucyBSZWNlaXZlcgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMgogICAgLy8gPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzEtMzIKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnJlY2VpdmVyCiAgICAvLyA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICA9PQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMC0zMwogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgLy8gICAgID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIC8vICksICJwYXltZW50IHJlY2VpdmVyIGFjY3VyYXRlIgogICAgYXNzZXJ0IC8vIHBheW1lbnQgcmVjZWl2ZXIgYWNjdXJhdGUKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzQKICAgIC8vIHJldHVybiBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5hbW91bnQKICAgIGd0eG5zIEFtb3VudAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX3NwaW5fY29zdCgpIC0+IHVpbnQ2NDoKX3NwaW5fY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTIyLTkyNAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MjUKICAgIC8vIHJldHVybiBVSW50NjQoNTA1MDApCiAgICBpbnQgNTA1MDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKSAtPiB1aW50NjQ6Cl9nZXRfbWF4X2V4dHJhX3BheW1lbnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg4MC04ODEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfZXh0cmFfcGF5bWVudChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODgyCiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfZXh0cmFfcGF5bWVudC5uYXRpdmUKICAgIGNhbGxzdWIgX3NwaW5fcGFyYW1zCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2ODktNjkwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2OTEKICAgIC8vIGJhbmtfYmFsYW5jZXMgPSBzZWxmLl9iYW5rX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjkzCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY5Mi02OTQKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgKyBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njk1CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2JhbmtfYmFsYW5jZXMoKSAtPiBieXRlczoKX2JhbmtfYmFsYW5jZXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYzMy02MzQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2JhbmtfYmFsYW5jZXMoc2VsZikgLT4gQmFua0JhbGFuY2VzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYzNgogICAgLy8gZGVmYXVsdD1zZWxmLl9pbnZhbGlkX2JhbGFuY2VzKCkKICAgIGNhbGxzdWIgX2ludmFsaWRfYmFsYW5jZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjM1CiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjM1LTYzNwogICAgLy8gcmV0dXJuIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLmdldCgKICAgIC8vICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgLy8gKQogICAgYm94X2dldAogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW52YWxpZF9iYWxhbmNlcygpIC0+IGJ5dGVzOgpfaW52YWxpZF9iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjI0LTYyNQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjI2LTYzMQogICAgLy8gcmV0dXJuIEJhbmtCYWxhbmNlcygKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NDMtNjQ0CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjQ1CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY0NwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjQ2LTY0OAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY0OQogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfbWF4X3BheW91dF9tdWx0aXBsaWVyKCkgLT4gdWludDY0OgpfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODg0LTg4NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcihzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODg2CiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfcGF5b3V0X211bHRpcGxpZXIubmF0aXZlCiAgICBjYWxsc3ViIF9zcGluX3BhcmFtcwogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NjYtNjY3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjY4CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY3MAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY2OS02NzEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcyCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjUxLTY1MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY1MwogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTUKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTQtNjU2CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICBmcmFtZV9kaWcgLTEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjU3LTY1OQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY2MAogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfYmV0X2tleShhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQsIG1heF9wYXlsaW5lX2luZGV4OiB1aW50NjQsIGluZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxMS05MTQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxNwogICAgLy8gKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTE2LTkxNwogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtNAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxOAogICAgLy8gKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MTYtOTE4CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MTkKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTE2LTkxOQogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxNS05MjAKICAgIC8vIHJldHVybiAoCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoKSAtPiB1aW50NjQ6Cl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4ODgtODg5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OTAKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLnJvdW5kX2Z1dHVyZV9kZWx0YS5uYXRpdmUKICAgIGNhbGxzdWIgX3NwaW5fcGFyYW1zCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlckludGVyZmFjZS5zcGluX2Nvc3QoKSAtPiBieXRlczoKc3Bpbl9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MzctNzM4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzM5CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3Bpbl9jb3N0KCkpCiAgICBjYWxsc3ViIF9zcGluX2Nvc3QKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VySW50ZXJmYWNlLmNsYWltKGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc2NS03NjYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIGNsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc3NgogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2NsYWltKGJldF9rZXkuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9jbGFpbQogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXJJbnRlcmZhY2UuX2NsYWltKGJldF9rZXk6IGJ5dGVzKSAtPiB1aW50NjQ6Cl9jbGFpbToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Nzc4LTc3OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3ODkKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5vd25lcl9kZXBvc2l0KGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6Cm93bmVyX2RlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU4NS01ODYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIG93bmVyX2RlcG9zaXQoc2VsZiwgYW1vdW50OiBhcmM0LlVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1OTEKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1OTIKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudC5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTkzCiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50Lm5hdGl2ZSkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZS5fb25seV9vd25lcigpIC0+IHZvaWQ6Cl9vbmx5X293bmVyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxODYtMTg3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vbmx5X293bmVyKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTkxCiAgICAvLyBhc3NlcnQgVHhuLnNlbmRlciA9PSBzZWxmLl9nZXRfb3duZXIoKSwgIm9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24iCiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIF9nZXRfb3duZXIKICAgID09CiAgICBhc3NlcnQgLy8gb25seSB0aGUgb3duZXIgY2FuIGNhbGwgdGhpcyBmdW5jdGlvbgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZS5fZ2V0X293bmVyKCkgLT4gYnl0ZXM6Cl9nZXRfb3duZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE5My0xOTUKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9vd25lcihzZWxmKSAtPiBBY2NvdW50OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE5NgogICAgLy8gcmV0dXJuIEJveChBY2NvdW50LCBrZXk9Im93bmVyIikuZ2V0KGRlZmF1bHQ9R2xvYmFsLmNyZWF0b3JfYWRkcmVzcykKICAgIGdsb2JhbCBDcmVhdG9yQWRkcmVzcwogICAgYnl0ZSAib3duZXIiCiAgICBib3hfZ2V0CiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VySW50ZXJmYWNlLmRlcG9zaXQoKSAtPiB2b2lkOgpkZXBvc2l0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjMtNDY0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBkZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDY4CiAgICAvLyBzZWxmLl9kZXBvc2l0KCkKICAgIGNhbGxzdWIgX2RlcG9zaXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl9kZXBvc2l0KCkgLT4gdm9pZDoKX2RlcG9zaXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU5NS01OTcKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlcG9zaXQoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MDEKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYwMgogICAgLy8gYXNzZXJ0IHBheW1lbnQgPiAwLCAicGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZHVwCiAgICBhc3NlcnQgLy8gcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYwMwogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwocGF5bWVudCkKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjA0CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUocGF5bWVudCkKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXJJbnRlcmZhY2Uud2l0aGRyYXcoYW1vdW50OiBieXRlcykgLT4gdm9pZDoKd2l0aGRyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ3Ny00NzgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHdpdGhkcmF3KHNlbGYsIGFtb3VudDogYXJjNC5VSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDg2CiAgICAvLyBzZWxmLl93aXRoZHJhdyhhbW91bnQubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF93aXRoZHJhdwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX3dpdGhkcmF3KGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfd2l0aGRyYXc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYwNi02MDgKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3dpdGhkcmF3KHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYxNgogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYxNwogICAgLy8gYXNzZXJ0IGFtb3VudCA+IFVJbnQ2NCgwKSwgImFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwIgogICAgZnJhbWVfZGlnIC0xCiAgICBhc3NlcnQgLy8gYW1vdW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjE4CiAgICAvLyBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpLCAiaW5zdWZmaWNpZW50IGJhbGFuY2UiCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBpbnN1ZmZpY2llbnQgYmFsYW5jZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MTkKICAgIC8vIGFzc2VydCBhbW91bnQgPD0gc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfdG90YWwKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIGFzc2VydCAvLyBpbnN1ZmZpY2llbnQgYmFsYW5jZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MjAKICAgIC8vIGl0eG4uUGF5bWVudChyZWNlaXZlcj1UeG4uc2VuZGVyLCBhbW91bnQ9YW1vdW50KS5zdWJtaXQoKQogICAgaXR4bl9iZWdpbgogICAgdHhuIFNlbmRlcgogICAgZnJhbWVfZGlnIC0xCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgaW50IHBheQogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgaW50IDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICBpdHhuX3N1Ym1pdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MjEKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MjIKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudCkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV9hdmFpbGFibGU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYzOS02NDAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2F2YWlsYWJsZShzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjQxCiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fZ2V0X2JhbGFuY2VfdG90YWwoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njg1LTY4NgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY4NwogICAgLy8gcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX3RvdGFsLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njk3LTY5OAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njk5CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcwMQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzAwLTcwMgogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIGFtb3VudCIKICAgIGFzc2VydCAvLyBiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzA0CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlIC0gYW1vdW50CiAgICBmcmFtZV9kaWcgLTEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzAzLTcwNQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsID0gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgOAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MDYKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlckludGVyZmFjZS5nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0OTUtNDk2CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTAwCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkpCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VySW50ZXJmYWNlLmdldF9iYWxhbmNlX2xvY2tlZCgpIC0+IGJ5dGVzOgpnZXRfYmFsYW5jZV9sb2NrZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOS01MTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MTQKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmFsYW5jZV9sb2NrZWQoKSkKICAgIGNhbGxzdWIgX2dldF9iYWxhbmNlX2xvY2tlZAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2dldF9iYWxhbmNlX2xvY2tlZCgpIC0+IHVpbnQ2NDoKX2dldF9iYWxhbmNlX2xvY2tlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjYyLTY2MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JhbGFuY2VfbG9ja2VkKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NjQKICAgIC8vIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9sb2NrZWQubmF0aXZlCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlckludGVyZmFjZS5nZXRfYmFsYW5jZV90b3RhbCgpIC0+IGJ5dGVzOgpnZXRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIzLTUyNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfdG90YWwoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTI4CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSkKICAgIGNhbGxzdWIgX2dldF9iYWxhbmNlX3RvdGFsCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5Cb290c3RyYXBwZWRJbnRlcmZhY2UuYm9vdHN0cmFwKCkgLT4gdm9pZDoKYm9vdHN0cmFwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OC04OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTAKICAgIC8vIHBheW1lbnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgcmVxdWlyZV9wYXltZW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxCiAgICAvLyBhc3NlcnQgcGF5bWVudCA+PSBzZWxmLl9ib290c3RyYXBfY29zdCgpLCAiaW5zdWZmaWNpZW50IHBheW1lbnQgZm9yIGJvb3RzdHJhcCIKICAgIGNhbGxzdWIgX2Jvb3RzdHJhcF9jb3N0CiAgICA+PQogICAgYXNzZXJ0IC8vIGluc3VmZmljaWVudCBwYXltZW50IGZvciBib290c3RyYXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTIKICAgIC8vIHNlbGYuX2Jvb3RzdHJhcCgpCiAgICBjYWxsc3ViIF9ib290c3RyYXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9ib290c3RyYXBfY29zdCgpIC0+IHVpbnQ2NDoKX2Jvb3RzdHJhcF9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MzEtODMzCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODM0CiAgICAvLyByZXR1cm4gR2xvYmFsLm1pbl9iYWxhbmNlICsgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIGdsb2JhbCBNaW5CYWxhbmNlCiAgICBjYWxsc3ViIF9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QKICAgICsKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKSAtPiB1aW50NjQ6Cl9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Q6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0MC04NDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQyCiAgICAvLyByZXR1cm4gVUludDY0KDI2NTAwKQogICAgaW50IDI2NTAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fYm9vdHN0cmFwKCkgLT4gdm9pZDoKX2Jvb3RzdHJhcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODI2LTgyOAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODI5CiAgICAvLyBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIGNhbGxzdWIgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwKCkgLT4gdm9pZDoKX3NwaW5fbWFuYWdlcl9ib290c3RyYXA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgzNi04MzcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MzgKICAgIC8vIHNlbGYuX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoKQogICAgY2FsbHN1YiBfaW5pdGlhbGl6ZV9zcGluX3BhcmFtcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoKSAtPiB2b2lkOgpfaW5pdGlhbGl6ZV9zcGluX3BhcmFtczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQ0LTg0NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV9zcGluX3BhcmFtcyhzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0NgogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0OAogICAgLy8gbm90IHNlbGYuX3NwaW5fcGFyYW1zKCkuc3Bpbl9mdXNlLm5hdGl2ZQogICAgY2FsbHN1YiBfc3Bpbl9wYXJhbXMKICAgIGludCAzODQKICAgIGdldGJpdAogICAgYnl0ZSAweDAwCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIGludCAwCiAgICBnZXRiaXQKICAgICEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQ3LTg0OQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBub3Qgc2VsZi5fc3Bpbl9wYXJhbXMoKS5zcGluX2Z1c2UubmF0aXZlCiAgICAvLyApLCAic3BpbiBwYXJhbXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICBhc3NlcnQgLy8gc3BpbiBwYXJhbXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODUwCiAgICAvLyBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLnZhbHVlID0gU3BpblBhcmFtcygKICAgIGJ5dGUgInNwaW5fcGFyYW1zIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NTAtODU4CiAgICAvLyBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLnZhbHVlID0gU3BpblBhcmFtcygKICAgIC8vICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgxMDAwMDAwKSwgICMgMSBWT0kKICAgIC8vICAgICBtYXhfcGF5b3V0X211bHRpcGxpZXI9YXJjNC5VSW50NjQoMTAwMCksICAjIDEwMDB4CiAgICAvLyAgICAgcm91bmRfZnV0dXJlX2RlbHRhPWFyYzQuVUludDY0KDEpLCAgIyAxIHJvdW5kCiAgICAvLyAgICAgbWluX2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JICgxIFZPSSBiZXQsIDEgcGF5bGluZSkKICAgIC8vICAgICBtYXhfYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgyMDAwMDAwMCksICAjIDIwIFZPSQogICAgLy8gICAgIG1pbl9iYW5rX2Ftb3VudD1hcmM0LlVJbnQ2NCgxMDAwMDAwMDAwMDApLCAgIyAxMDBrIFZPSQogICAgLy8gICAgIHNwaW5fZnVzZT1hcmM0LkJvb2woVHJ1ZSksCiAgICAvLyApCiAgICBieXRlIDB4MDAwMDAwMDAwMDBmNDI0MDAwMDAwMDAwMDAwMDAzZTgwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDBmNDI0MDAwMDAwMDAwMDEzMTJkMDAwMDAwMDAxNzQ4NzZlODAwODAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJvb3RzdHJhcHBlZEludGVyZmFjZS5ib290c3RyYXBfY29zdCgpIC0+IGJ5dGVzOgpib290c3RyYXBfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTgtOTkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGJvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2Jvb3RzdHJhcF9jb3N0KCkpCiAgICBjYWxsc3ViIF9ib290c3RyYXBfY29zdAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZUludGVyZmFjZS5nZXRfb3duZXIoKSAtPiBieXRlczoKZ2V0X293bmVyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMjYtMTI3CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfb3duZXIoc2VsZikgLT4gYXJjNC5BZGRyZXNzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMQogICAgLy8gcmV0dXJuIGFyYzQuQWRkcmVzcyhzZWxmLl9nZXRfb3duZXIoKSkKICAgIGNhbGxzdWIgX2dldF9vd25lcgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZUludGVyZmFjZS50cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDAtMTQxCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB0cmFuc2Zlcl9vd25lcnNoaXAoc2VsZiwgbmV3X293bmVyOiBhcmM0LkFkZHJlc3MpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ1CiAgICAvLyBzZWxmLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyLm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfdHJhbnNmZXJfb3duZXJzaGlwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5Pd25hYmxlLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKX3RyYW5zZmVyX293bmVyc2hpcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTk4LTIwMAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfdHJhbnNmZXJfb3duZXJzaGlwKHNlbGYsIG5ld19vd25lcjogQWNjb3VudCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyMDEKICAgIC8vIEJveChBY2NvdW50LCBrZXk9Im93bmVyIikudmFsdWUgPSBuZXdfb3duZXIKICAgIGJ5dGUgIm93bmVyIgogICAgYm94X2RlbAogICAgcG9wCiAgICBieXRlICJvd25lciIKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X3B1dAogICAgcmV0c3ViCg==",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TcGluTWFuYWdlci5jbGVhcl9zdGF0ZV9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTIKICAgIC8vIGNsYXNzIFNwaW5NYW5hZ2VyKFNwaW5NYW5hZ2VySW50ZXJmYWNlLCBCYW5rTWFuYWdlciwgT3duYWJsZSk6CiAgICBpbnQgMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 0,
            "num_uints": 0
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {},
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "SpinManager",
        "desc": "\n    A simple spin manager smart contract\n    ",
        "methods": [
            {
                "name": "get_bet_claim_round",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "spin_payline_cost",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "spin",
                "args": [
                    {
                        "type": "uint64",
                        "name": "bet_amount"
                    },
                    {
                        "type": "uint64",
                        "name": "max_payline_index",
                        "desc": "The maximum payline index."
                    },
                    {
                        "type": "uint64",
                        "name": "index",
                        "desc": "Player's choice of index."
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[56]",
                    "desc": "bet_key (bytes): The bet key."
                },
                "desc": "Spin the slot machine. Outcome is determined by the seed\nof future round."
            },
            {
                "name": "spin_cost",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "claim",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key",
                        "desc": "The key of the bet to claim"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "uint64",
                    "desc": "The payout for the bet"
                },
                "desc": "Claim a bet"
            },
            {
                "name": "owner_deposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
            },
            {
                "name": "deposit",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Deposit funds into the contract"
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount",
                        "desc": "The amount of funds to withdraw in atomic units"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw funds from the contract\nOnly callable by contract owner"
            },
            {
                "name": "get_balance_available",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the available balance"
            },
            {
                "name": "get_balance_locked",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the locked balance"
            },
            {
                "name": "get_balance_total",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the total balance"
            },
            {
                "name": "bootstrap",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                }
            },
            {
                "name": "bootstrap_cost",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "get_owner",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "address"
                },
                "desc": "Get the owner of the contract"
            },
            {
                "name": "transfer_ownership",
                "args": [
                    {
                        "type": "address",
                        "name": "new_owner"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Transfer the ownership of the contract"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "no_op": "CREATE"
    }
};
/**
 * Exposes methods for constructing all available smart contract calls
 */
export class SpinManagerCallFactory {
    /**
     * Gets available create call factories
     */
    static get create() {
        return {
            /**
             * Constructs a create call for the SpinManager smart contract using a bare call
             *
             * @param params Any parameters for the call
             * @returns A TypedCallParams object for the call
             */
            bare(params = {}) {
                return {
                    method: undefined,
                    methodArgs: undefined,
                    ...params,
                };
            },
        };
    }
    /**
     * Constructs a no op call for the get_bet_claim_round(byte[56])uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBetClaimRound(args, params) {
        return {
            method: 'get_bet_claim_round(byte[56])uint64',
            methodArgs: Array.isArray(args) ? args : [args.betKey],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin_payline_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spinPaylineCost(args, params) {
        return {
            method: 'spin_payline_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin(uint64,uint64,uint64)byte[56] ABI method
     *
     * Spin the slot machine. Outcome is determined by the seed
  of future round.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spin(args, params) {
        return {
            method: 'spin(uint64,uint64,uint64)byte[56]',
            methodArgs: Array.isArray(args) ? args : [args.betAmount, args.maxPaylineIndex, args.index],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spinCost(args, params) {
        return {
            method: 'spin_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the claim(byte[56])uint64 ABI method
     *
     * Claim a bet
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static claim(args, params) {
        return {
            method: 'claim(byte[56])uint64',
            methodArgs: Array.isArray(args) ? args : [args.betKey],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the owner_deposit(uint64)void ABI method
     *
     * Deposit funds into the contract as owner. The owner is expected to
  have already submitted the payment.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static ownerDeposit(args, params) {
        return {
            method: 'owner_deposit(uint64)void',
            methodArgs: Array.isArray(args) ? args : [args.amount],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the deposit()void ABI method
     *
     * Deposit funds into the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static deposit(args, params) {
        return {
            method: 'deposit()void',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the withdraw(uint64)void ABI method
     *
     * Withdraw funds from the contract
  Only callable by contract owner
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static withdraw(args, params) {
        return {
            method: 'withdraw(uint64)void',
            methodArgs: Array.isArray(args) ? args : [args.amount],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_available()uint64 ABI method
     *
     * Get the available balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceAvailable(args, params) {
        return {
            method: 'get_balance_available()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_locked()uint64 ABI method
     *
     * Get the locked balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceLocked(args, params) {
        return {
            method: 'get_balance_locked()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_total()uint64 ABI method
     *
     * Get the total balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceTotal(args, params) {
        return {
            method: 'get_balance_total()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the bootstrap()void ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static bootstrap(args, params) {
        return {
            method: 'bootstrap()void',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the bootstrap_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static bootstrapCost(args, params) {
        return {
            method: 'bootstrap_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_owner()address ABI method
     *
     * Get the owner of the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getOwner(args, params) {
        return {
            method: 'get_owner()address',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the transfer_ownership(address)void ABI method
     *
     * Transfer the ownership of the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static transferOwnership(args, params) {
        return {
            method: 'transfer_ownership(address)void',
            methodArgs: Array.isArray(args) ? args : [args.newOwner],
            ...params,
        };
    }
}
/**
 * A client to make calls to the SpinManager smart contract
 */
export class SpinManagerClient {
    algod;
    /**
     * The underlying `ApplicationClient` for when you want to have more flexibility
     */
    appClient;
    sender;
    /**
     * Creates a new instance of `SpinManagerClient`
     *
     * @param appDetails appDetails The details to identify the app to deploy
     * @param algod An algod client instance
     */
    constructor(appDetails, algod) {
        this.algod = algod;
        this.sender = appDetails.sender;
        this.appClient = algokit.getAppClient({
            ...appDetails,
            app: APP_SPEC
        }, algod);
    }
    /**
     * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
     *
     * @param result The AppCallTransactionResult to be mapped
     * @param returnValueFormatter An optional delegate to format the return value if required
     * @returns The smart contract response with an updated return value
     */
    mapReturnValue(result, returnValueFormatter) {
        if (result.return?.decodeError) {
            throw result.return.decodeError;
        }
        const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
            ? returnValueFormatter(result.return.returnValue)
            : result.return?.returnValue;
        return { ...result, return: returnValue };
    }
    /**
     * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
     *
     * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
     * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
     * @returns The result of the smart contract call
     */
    async call(typedCallParams, returnValueFormatter) {
        return this.mapReturnValue(await this.appClient.call(typedCallParams), returnValueFormatter);
    }
    /**
     * Idempotently deploys the SpinManager smart contract.
     *
     * @param params The arguments for the contract calls and any additional parameters for the call
     * @returns The deployment result
     */
    deploy(params = {}) {
        const createArgs = params.createCall?.(SpinManagerCallFactory.create);
        return this.appClient.deploy({
            ...params,
            createArgs,
            createOnCompleteAction: createArgs?.onCompleteAction,
        });
    }
    /**
     * Gets available create methods
     */
    get create() {
        const $this = this;
        return {
            /**
             * Creates a new instance of the SpinManager smart contract using a bare call.
             *
             * @param args The arguments for the bare call
             * @returns The create result
             */
            async bare(args = {}) {
                return $this.mapReturnValue(await $this.appClient.create(args));
            },
        };
    }
    /**
     * Makes a clear_state call to an existing instance of the SpinManager smart contract.
     *
     * @param args The arguments for the bare call
     * @returns The clear_state result
     */
    clearState(args = {}) {
        return this.appClient.clearState(args);
    }
    /**
     * Calls the get_bet_claim_round(byte[56])uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBetClaimRound(args, params = {}) {
        return this.call(SpinManagerCallFactory.getBetClaimRound(args, params));
    }
    /**
     * Calls the spin_payline_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    spinPaylineCost(args, params = {}) {
        return this.call(SpinManagerCallFactory.spinPaylineCost(args, params));
    }
    /**
     * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
     *
     * Spin the slot machine. Outcome is determined by the seed
  of future round.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call: bet_key (bytes): The bet key.
     */
    spin(args, params = {}) {
        return this.call(SpinManagerCallFactory.spin(args, params));
    }
    /**
     * Calls the spin_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    spinCost(args, params = {}) {
        return this.call(SpinManagerCallFactory.spinCost(args, params));
    }
    /**
     * Calls the claim(byte[56])uint64 ABI method.
     *
     * Claim a bet
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call: The payout for the bet
     */
    claim(args, params = {}) {
        return this.call(SpinManagerCallFactory.claim(args, params));
    }
    /**
     * Calls the owner_deposit(uint64)void ABI method.
     *
     * Deposit funds into the contract as owner. The owner is expected to
  have already submitted the payment.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    ownerDeposit(args, params = {}) {
        return this.call(SpinManagerCallFactory.ownerDeposit(args, params));
    }
    /**
     * Calls the deposit()void ABI method.
     *
     * Deposit funds into the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    deposit(args, params = {}) {
        return this.call(SpinManagerCallFactory.deposit(args, params));
    }
    /**
     * Calls the withdraw(uint64)void ABI method.
     *
     * Withdraw funds from the contract
  Only callable by contract owner
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    withdraw(args, params = {}) {
        return this.call(SpinManagerCallFactory.withdraw(args, params));
    }
    /**
     * Calls the get_balance_available()uint64 ABI method.
     *
     * Get the available balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceAvailable(args, params = {}) {
        return this.call(SpinManagerCallFactory.getBalanceAvailable(args, params));
    }
    /**
     * Calls the get_balance_locked()uint64 ABI method.
     *
     * Get the locked balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceLocked(args, params = {}) {
        return this.call(SpinManagerCallFactory.getBalanceLocked(args, params));
    }
    /**
     * Calls the get_balance_total()uint64 ABI method.
     *
     * Get the total balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceTotal(args, params = {}) {
        return this.call(SpinManagerCallFactory.getBalanceTotal(args, params));
    }
    /**
     * Calls the bootstrap()void ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    bootstrap(args, params = {}) {
        return this.call(SpinManagerCallFactory.bootstrap(args, params));
    }
    /**
     * Calls the bootstrap_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    bootstrapCost(args, params = {}) {
        return this.call(SpinManagerCallFactory.bootstrapCost(args, params));
    }
    /**
     * Calls the get_owner()address ABI method.
     *
     * Get the owner of the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getOwner(args, params = {}) {
        return this.call(SpinManagerCallFactory.getOwner(args, params));
    }
    /**
     * Calls the transfer_ownership(address)void ABI method.
     *
     * Transfer the ownership of the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    transferOwnership(args, params = {}) {
        return this.call(SpinManagerCallFactory.transferOwnership(args, params));
    }
    compose() {
        const client = this;
        const atc = new AtomicTransactionComposer();
        let promiseChain = Promise.resolve();
        const resultMappers = [];
        return {
            getBetClaimRound(args, params) {
                promiseChain = promiseChain.then(() => client.getBetClaimRound(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spinPaylineCost(args, params) {
                promiseChain = promiseChain.then(() => client.spinPaylineCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spin(args, params) {
                promiseChain = promiseChain.then(() => client.spin(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spinCost(args, params) {
                promiseChain = promiseChain.then(() => client.spinCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            claim(args, params) {
                promiseChain = promiseChain.then(() => client.claim(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            ownerDeposit(args, params) {
                promiseChain = promiseChain.then(() => client.ownerDeposit(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            deposit(args, params) {
                promiseChain = promiseChain.then(() => client.deposit(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            withdraw(args, params) {
                promiseChain = promiseChain.then(() => client.withdraw(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceAvailable(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceAvailable(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceLocked(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceLocked(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceTotal(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceTotal(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            bootstrap(args, params) {
                promiseChain = promiseChain.then(() => client.bootstrap(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            bootstrapCost(args, params) {
                promiseChain = promiseChain.then(() => client.bootstrapCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getOwner(args, params) {
                promiseChain = promiseChain.then(() => client.getOwner(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            transferOwnership(args, params) {
                promiseChain = promiseChain.then(() => client.transferOwnership(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            clearState(args) {
                promiseChain = promiseChain.then(() => client.clearState({ ...args, sendParams: { ...args?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            addTransaction(txn, defaultSender) {
                promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)));
                return this;
            },
            async atc() {
                await promiseChain;
                return atc;
            },
            async simulate(options) {
                await promiseChain;
                const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }));
                return {
                    ...result,
                    returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i](val.returnValue) : val.returnValue)
                };
            },
            async execute(sendParams) {
                await promiseChain;
                const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod);
                return {
                    ...result,
                    returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i](val.returnValue) : val.returnValue)
                };
            }
        };
    }
}

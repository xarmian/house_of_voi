/* eslint-disable */
/**
 * This file was automatically generated by @algorandfoundation/algokit-client-generator.
 * DO NOT MODIFY IT BY HAND.
 * requires: @algorandfoundation/algokit-utils: ^2
 */
import * as algokit from '@algorandfoundation/algokit-utils';
import { AtomicTransactionComposer, modelsv2 } from 'algosdk';
export const APP_SPEC = {
    "hints": {
        "bootstrap()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "bootstrap_cost()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "transfer_ownership(address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_grid(byte[32])byte[15]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_payline_count()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_payline(uint64)uint64[5]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_paylines()uint64[100]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "match_payline(byte[15],uint64)(uint64,byte)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            },
            "structs": {
                "output": {
                    "name": "PaylineMatch",
                    "elements": [
                        [
                            "count",
                            "uint64"
                        ],
                        [
                            "initial_symbol",
                            "byte"
                        ]
                    ]
                }
            }
        },
        "get_bet_grid(byte[56])byte[15]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claim(byte[56])uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_payout_multiplier(byte,uint64)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_bet_claim_round(byte[56])uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin_payline_cost()uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin(uint64,uint64,uint64)byte[56]": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "spin_cost()uint64": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "owner_deposit(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "deposit()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_available()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_locked()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_balance_total()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_reel(uint64)byte[100]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_slot(uint64,uint64)byte[1]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_reel_window(uint64,uint64)byte[3]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_owner()address": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_reels()byte[500]": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_reel_length()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "get_reel_count()uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5hcHByb3ZhbF9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuIE51bUFwcEFyZ3MKICAgIGJ6IG1haW5fYmFyZV9yb3V0aW5nQDMyCiAgICBtZXRob2QgImJvb3RzdHJhcCgpdm9pZCIKICAgIG1ldGhvZCAiYm9vdHN0cmFwX2Nvc3QoKXVpbnQ2NCIKICAgIG1ldGhvZCAidHJhbnNmZXJfb3duZXJzaGlwKGFkZHJlc3Mpdm9pZCIKICAgIG1ldGhvZCAiZ2V0X2dyaWQoYnl0ZVszMl0pYnl0ZVsxNV0iCiAgICBtZXRob2QgImdldF9wYXlsaW5lX2NvdW50KCl1aW50NjQiCiAgICBtZXRob2QgImdldF9wYXlsaW5lKHVpbnQ2NCl1aW50NjRbNV0iCiAgICBtZXRob2QgImdldF9wYXlsaW5lcygpdWludDY0WzEwMF0iCiAgICBtZXRob2QgIm1hdGNoX3BheWxpbmUoYnl0ZVsxNV0sdWludDY0KSh1aW50NjQsYnl0ZSkiCiAgICBtZXRob2QgImdldF9iZXRfZ3JpZChieXRlWzU2XSlieXRlWzE1XSIKICAgIG1ldGhvZCAiY2xhaW0oYnl0ZVs1Nl0pdWludDY0IgogICAgbWV0aG9kICJnZXRfcGF5b3V0X211bHRpcGxpZXIoYnl0ZSx1aW50NjQpdWludDY0IgogICAgbWV0aG9kICJnZXRfYmV0X2NsYWltX3JvdW5kKGJ5dGVbNTZdKXVpbnQ2NCIKICAgIG1ldGhvZCAic3Bpbl9wYXlsaW5lX2Nvc3QoKXVpbnQ2NCIKICAgIG1ldGhvZCAic3Bpbih1aW50NjQsdWludDY0LHVpbnQ2NClieXRlWzU2XSIKICAgIG1ldGhvZCAic3Bpbl9jb3N0KCl1aW50NjQiCiAgICBtZXRob2QgIm93bmVyX2RlcG9zaXQodWludDY0KXZvaWQiCiAgICBtZXRob2QgImRlcG9zaXQoKXZvaWQiCiAgICBtZXRob2QgIndpdGhkcmF3KHVpbnQ2NCl2b2lkIgogICAgbWV0aG9kICJnZXRfYmFsYW5jZV9hdmFpbGFibGUoKXVpbnQ2NCIKICAgIG1ldGhvZCAiZ2V0X2JhbGFuY2VfbG9ja2VkKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9iYWxhbmNlX3RvdGFsKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9yZWVsKHVpbnQ2NClieXRlWzEwMF0iCiAgICBtZXRob2QgImdldF9zbG90KHVpbnQ2NCx1aW50NjQpYnl0ZVsxXSIKICAgIG1ldGhvZCAiZ2V0X3JlZWxfd2luZG93KHVpbnQ2NCx1aW50NjQpYnl0ZVszXSIKICAgIG1ldGhvZCAiZ2V0X293bmVyKClhZGRyZXNzIgogICAgbWV0aG9kICJnZXRfcmVlbHMoKWJ5dGVbNTAwXSIKICAgIG1ldGhvZCAiZ2V0X3JlZWxfbGVuZ3RoKCl1aW50NjQiCiAgICBtZXRob2QgImdldF9yZWVsX2NvdW50KCl1aW50NjQiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBtYWluX2Jvb3RzdHJhcF9yb3V0ZUAyIG1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVAMyBtYWluX3RyYW5zZmVyX293bmVyc2hpcF9yb3V0ZUA0IG1haW5fZ2V0X2dyaWRfcm91dGVANSBtYWluX2dldF9wYXlsaW5lX2NvdW50X3JvdXRlQDYgbWFpbl9nZXRfcGF5bGluZV9yb3V0ZUA3IG1haW5fZ2V0X3BheWxpbmVzX3JvdXRlQDggbWFpbl9tYXRjaF9wYXlsaW5lX3JvdXRlQDkgbWFpbl9nZXRfYmV0X2dyaWRfcm91dGVAMTAgbWFpbl9jbGFpbV9yb3V0ZUAxMSBtYWluX2dldF9wYXlvdXRfbXVsdGlwbGllcl9yb3V0ZUAxMiBtYWluX2dldF9iZXRfY2xhaW1fcm91bmRfcm91dGVAMTMgbWFpbl9zcGluX3BheWxpbmVfY29zdF9yb3V0ZUAxNCBtYWluX3NwaW5fcm91dGVAMTUgbWFpbl9zcGluX2Nvc3Rfcm91dGVAMTYgbWFpbl9vd25lcl9kZXBvc2l0X3JvdXRlQDE3IG1haW5fZGVwb3NpdF9yb3V0ZUAxOCBtYWluX3dpdGhkcmF3X3JvdXRlQDE5IG1haW5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlX3JvdXRlQDIwIG1haW5fZ2V0X2JhbGFuY2VfbG9ja2VkX3JvdXRlQDIxIG1haW5fZ2V0X2JhbGFuY2VfdG90YWxfcm91dGVAMjIgbWFpbl9nZXRfcmVlbF9yb3V0ZUAyMyBtYWluX2dldF9zbG90X3JvdXRlQDI0IG1haW5fZ2V0X3JlZWxfd2luZG93X3JvdXRlQDI1IG1haW5fZ2V0X293bmVyX3JvdXRlQDI2IG1haW5fZ2V0X3JlZWxzX3JvdXRlQDI3IG1haW5fZ2V0X3JlZWxfbGVuZ3RoX3JvdXRlQDI4IG1haW5fZ2V0X3JlZWxfY291bnRfcm91dGVAMjkKICAgIGVyciAvLyByZWplY3QgdHJhbnNhY3Rpb24KCm1haW5fYm9vdHN0cmFwX3JvdXRlQDI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBib290c3RyYXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYm9vdHN0cmFwX2Nvc3Rfcm91dGVAMzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAzMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGJvb3RzdHJhcF9jb3N0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3RyYW5zZmVyX293bmVyc2hpcF9yb3V0ZUA0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDU0LTEwNTUKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDU0LTEwNTUKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiB0cmFuc2Zlcl9vd25lcnNoaXAKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X2dyaWRfcm91dGVANToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEwMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMTIKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFNwaW5NYW5hZ2VyLCBSZWVsTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMDMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfZ3JpZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcGF5bGluZV9jb3VudF9yb3V0ZUA2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTUyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X3BheWxpbmVfY291bnQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3BheWxpbmVfcm91dGVANzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE2MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMTIKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFNwaW5NYW5hZ2VyLCBSZWVsTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNjAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgY2FsbHN1YiBnZXRfcGF5bGluZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcGF5bGluZXNfcm91dGVAODoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE2NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9wYXlsaW5lcwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9tYXRjaF9wYXlsaW5lX3JvdXRlQDk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMTcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzE3CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgbWF0Y2hfcGF5bGluZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmV0X2dyaWRfcm91dGVAMTA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNzMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzczCiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgZ2V0X2JldF9ncmlkCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2NsYWltX3JvdXRlQDExOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzg3LTEzODgKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzg3LTEzODgKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiBjbGFpbQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcGF5b3V0X211bHRpcGxpZXJfcm91dGVAMTI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MDgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTA4CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X3BheW91dF9tdWx0aXBsaWVyCiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX2dldF9iZXRfY2xhaW1fcm91bmRfcm91dGVAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMTIKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFNwaW5NYW5hZ2VyLCBSZWVsTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9iZXRfY2xhaW1fcm91bmQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9wYXlsaW5lX2Nvc3Rfcm91dGVAMTQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkyNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIHNwaW5fcGF5bGluZV9jb3N0CiAgICBieXRlIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3NwaW5fcm91dGVAMTU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMTIKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFNwaW5NYW5hZ2VyLCBSZWVsTWFuYWdlciwgT3duYWJsZSk6CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICBjYWxsc3ViIHNwaW4KICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fc3Bpbl9jb3N0X3JvdXRlQDE2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBzcGluX2Nvc3QKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fb3duZXJfZGVwb3NpdF9yb3V0ZUAxNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAxMgogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoU3Bpbk1hbmFnZXIsIFJlZWxNYW5hZ2VyLCBPd25hYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTg1CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIGNhbGxzdWIgb3duZXJfZGVwb3NpdAogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9kZXBvc2l0X3JvdXRlQDE4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NjMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgY2FsbHN1YiBkZXBvc2l0CiAgICBpbnQgMQogICAgcmV0dXJuCgptYWluX3dpdGhkcmF3X3JvdXRlQDE5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgY2FsbHN1YiB3aXRoZHJhdwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZV9hdmFpbGFibGVfcm91dGVAMjA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ5NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlX2F2YWlsYWJsZQogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZV9sb2NrZWRfcm91dGVAMjE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9iYWxhbmNlX2xvY2tlZAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfYmFsYW5jZV90b3RhbF9yb3V0ZUAyMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTIzCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X2JhbGFuY2VfdG90YWwKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3JlZWxfcm91dGVAMjM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMzOC0zMzkKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMzgtMzM5CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X3JlZWwKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3Nsb3Rfcm91dGVAMjQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1Ni0zNTcKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBpcyBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGlzIG5vdCBjcmVhdGluZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTYtMzU3CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIGNhbGxzdWIgZ2V0X3Nsb3QKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fZ2V0X3JlZWxfd2luZG93X3JvdXRlQDI1OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzQtMzc1CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAxMgogICAgLy8gY2xhc3MgU2xvdE1hY2hpbmUoU3Bpbk1hbmFnZXIsIFJlZWxNYW5hZ2VyLCBPd25hYmxlKToKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0LTM3NQogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICBjYWxsc3ViIGdldF9yZWVsX3dpbmRvdwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfb3duZXJfcm91dGVAMjY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEyNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9vd25lcgogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcmVlbHNfcm91dGVAMjc6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI3MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9yZWVscwogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcmVlbF9sZW5ndGhfcm91dGVAMjg6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjMxNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICAhCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIGlzIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gaXMgbm90IGNyZWF0aW5nCiAgICBjYWxsc3ViIGdldF9yZWVsX2xlbmd0aAogICAgYnl0ZSAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50IDEKICAgIHJldHVybgoKbWFpbl9nZXRfcmVlbF9jb3VudF9yb3V0ZUAyOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzI0CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gaXMgTm9PcAogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBpcyBub3QgY3JlYXRpbmcKICAgIGNhbGxzdWIgZ2V0X3JlZWxfY291bnQKICAgIGJ5dGUgMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludCAxCiAgICByZXR1cm4KCm1haW5fYmFyZV9yb3V0aW5nQDMyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIHJlamVjdCB0cmFuc2FjdGlvbgogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICEKICAgIGFzc2VydCAvLyBpcyBjcmVhdGluZwogICAgaW50IDEKICAgIHJldHVybgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmJvb3RzdHJhcCgpIC0+IHZvaWQ6CmJvb3RzdHJhcDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAyNS0xMDI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDI3CiAgICAvLyBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIHJlcXVpcmVfcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDI4CiAgICAvLyBhc3NlcnQgcGF5bWVudCA+PSBzZWxmLl9ib290c3RyYXBfY29zdCgpLCAiaW5zdWZmaWVuY3QgcGF5bWVudCBmb3IgYm9vdHN0cmFwIgogICAgY2FsbHN1YiBfYm9vdHN0cmFwX2Nvc3QKICAgID49CiAgICBhc3NlcnQgLy8gaW5zdWZmaWVuY3QgcGF5bWVudCBmb3IgYm9vdHN0cmFwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMjkKICAgIC8vIHNlbGYuX2Jvb3RzdHJhcCgpCiAgICBjYWxsc3ViIF9ib290c3RyYXAKICAgIHJldHN1YgoKCi8vIG9wZW5zdWJtYXJpbmUudXRpbHMuYWxnb3JhbmQucmVxdWlyZV9wYXltZW50KHdobzogYnl0ZXMpIC0+IHVpbnQ2NDoKcmVxdWlyZV9wYXltZW50OgogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToxNS0yMwogICAgLy8gIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyBmdW5jdGlvbjogcmVxdWlyZV9wYXltZW50IChpbnRlcm5hbCkKICAgIC8vICMgYXJndW1lbnRzOiBOb25lCiAgICAvLyAjIHB1cnBvc2U6IGNoZWNrIHBheW1lbnQKICAgIC8vICMgcHJlLWNvbmRpdGlvbnM6IE5vbmUKICAgIC8vICMgcG9zdC1jb25kaXRpb25zOiBOb25lCiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIHJlcXVpcmVfcGF5bWVudCh3aG86IEFjY291bnQpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNAogICAgLy8gcmVmX2dyb3VwX2luZGV4ID0gVHhuLmdyb3VwX2luZGV4CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weToyNQogICAgLy8gYXNzZXJ0IHJlZl9ncm91cF9pbmRleCA+IDAsICJncm91cCBpbmRleCBncmVhdGVyIHRoYW4gemVybyIKICAgIGR1cAogICAgYXNzZXJ0IC8vIGdyb3VwIGluZGV4IGdyZWF0ZXIgdGhhbiB6ZXJvCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI2CiAgICAvLyBwYXltZW50X2dyb3VwX2luZGV4ID0gcmVmX2dyb3VwX2luZGV4IC0gMQogICAgaW50IDEKICAgIC0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MjgKICAgIC8vIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnNlbmRlciA9PSB3aG8KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludCBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICBmcmFtZV9kaWcgLTEKICAgID09CiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjI3LTI5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGd0eG4uUGF5bWVudFRyYW5zYWN0aW9uKHBheW1lbnRfZ3JvdXBfaW5kZXgpLnNlbmRlciA9PSB3aG8KICAgIC8vICksICJwYXltZW50IHNlbmRlciBhY2N1cmF0ZSIKICAgIGFzc2VydCAvLyBwYXltZW50IHNlbmRlciBhY2N1cmF0ZQogICAgLy8gdXNyL2xvY2FsL2xpYi9weXRob24zLjEyL3NpdGUtcGFja2FnZXMvb3BlbnN1Ym1hcmluZS91dGlscy9hbGdvcmFuZC5weTozMQogICAgLy8gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkucmVjZWl2ZXIKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzIKICAgIC8vID09IEdsb2JhbC5jdXJyZW50X2FwcGxpY2F0aW9uX2FkZHJlc3MKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjMxLTMyCiAgICAvLyBndHhuLlBheW1lbnRUcmFuc2FjdGlvbihwYXltZW50X2dyb3VwX2luZGV4KS5yZWNlaXZlcgogICAgLy8gPT0gR2xvYmFsLmN1cnJlbnRfYXBwbGljYXRpb25fYWRkcmVzcwogICAgPT0KICAgIC8vIHVzci9sb2NhbC9saWIvcHl0aG9uMy4xMi9zaXRlLXBhY2thZ2VzL29wZW5zdWJtYXJpbmUvdXRpbHMvYWxnb3JhbmQucHk6MzAtMzMKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkucmVjZWl2ZXIKICAgIC8vICAgICA9PSBHbG9iYWwuY3VycmVudF9hcHBsaWNhdGlvbl9hZGRyZXNzCiAgICAvLyApLCAicGF5bWVudCByZWNlaXZlciBhY2N1cmF0ZSIKICAgIGFzc2VydCAvLyBwYXltZW50IHJlY2VpdmVyIGFjY3VyYXRlCiAgICAvLyB1c3IvbG9jYWwvbGliL3B5dGhvbjMuMTIvc2l0ZS1wYWNrYWdlcy9vcGVuc3VibWFyaW5lL3V0aWxzL2FsZ29yYW5kLnB5OjM0CiAgICAvLyByZXR1cm4gZ3R4bi5QYXltZW50VHJhbnNhY3Rpb24ocGF5bWVudF9ncm91cF9pbmRleCkuYW1vdW50CiAgICBndHhucyBBbW91bnQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9ib290c3RyYXBfY29zdCgpIC0+IHVpbnQ2NDoKX2Jvb3RzdHJhcF9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDQyLTEwNDQKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDQ2CiAgICAvLyBHbG9iYWwubWluX2JhbGFuY2UKICAgIGdsb2JhbCBNaW5CYWxhbmNlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwNDcKICAgIC8vICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIGNhbGxzdWIgX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDQ2LTEwNDcKICAgIC8vIEdsb2JhbC5taW5fYmFsYW5jZQogICAgLy8gKyBzZWxmLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDQ4CiAgICAvLyArIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICBjYWxsc3ViIF9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA0Ni0xMDQ4CiAgICAvLyBHbG9iYWwubWluX2JhbGFuY2UKICAgIC8vICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICsgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA0OQogICAgLy8gKyBzZWxmLl9vd25hYmxlX2Jvb3RzdHJhcF9jb3N0KCkKICAgIGNhbGxzdWIgX293bmFibGVfYm9vdHN0cmFwX2Nvc3QKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA0Ni0xMDQ5CiAgICAvLyBHbG9iYWwubWluX2JhbGFuY2UKICAgIC8vICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICsgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICsgc2VsZi5fb3duYWJsZV9ib290c3RyYXBfY29zdCgpCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwNDUtMTA1MAogICAgLy8gcmV0dXJuICgKICAgIC8vICAgICBHbG9iYWwubWluX2JhbGFuY2UKICAgIC8vICAgICArIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAgICAgKyBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKQogICAgLy8gICAgICsgc2VsZi5fb3duYWJsZV9ib290c3RyYXBfY29zdCgpCiAgICAvLyApCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkgLT4gdWludDY0OgpfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NjYtNTY3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU2OAogICAgLy8gcmV0dXJuIFVJbnQ2NCgxNzcwMCkKICAgIGludCAxNzcwMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdCgpIC0+IHVpbnQ2NDoKX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQwLTg0MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NDIKICAgIC8vIHJldHVybiBVSW50NjQoMjY1MDApCiAgICBpbnQgMjY1MDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk93bmFibGUuX293bmFibGVfYm9vdHN0cmFwX2Nvc3QoKSAtPiB1aW50NjQ6Cl9vd25hYmxlX2Jvb3RzdHJhcF9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNzgtMTc5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9vd25hYmxlX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxODAKICAgIC8vIHJldHVybiBVSW50NjQoMTczMDApCiAgICBpbnQgMTczMDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9ib290c3RyYXAoKSAtPiB2b2lkOgpfYm9vdHN0cmFwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDM1LTEwMzcKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwMzgKICAgIC8vIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoKQogICAgY2FsbHN1YiBfYmFua19tYW5hZ2VyX2Jvb3RzdHJhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDM5CiAgICAvLyBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIGNhbGxzdWIgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA0MAogICAgLy8gc2VsZi5fb3duYWJsZV9ib290c3RyYXAoKQogICAgY2FsbHN1YiBfb3duYWJsZV9ib290c3RyYXAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwKCkgLT4gdm9pZDoKX2JhbmtfbWFuYWdlcl9ib290c3RyYXA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU2Mi01NjMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NjQKICAgIC8vIHNlbGYuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKQogICAgY2FsbHN1YiBfaW5pdGlhbGl6ZV9iYW5rX21hbmFnZXJfc3RvcmFnZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2luaXRpYWxpemVfYmFua19tYW5hZ2VyX3N0b3JhZ2UoKSAtPiB2b2lkOgpfaW5pdGlhbGl6ZV9iYW5rX21hbmFnZXJfc3RvcmFnZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTcwLTU3MQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV9iYW5rX21hbmFnZXJfc3RvcmFnZShzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU3NQogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU3NgogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfaW52YWxpZF9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NzgKICAgIC8vIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgaW50IDE5MgogICAgZ2V0Yml0CiAgICBieXRlIDB4MDAKICAgIGludCAwCiAgICB1bmNvdmVyIDIKICAgIHNldGJpdAogICAgaW50IDAKICAgIGdldGJpdAogICAgIQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1NzctNTc5CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIG5vdCBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV9mdXNlLm5hdGl2ZQogICAgLy8gKSwgImJhbmsgYmFsYW5jZXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICBhc3NlcnQgLy8gYmFuayBiYWxhbmNlcyBtdXN0IG5vdCBiZSBpbml0aWFsaXplZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1ODAKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9mdXNlID0gYXJjNC5Cb29sKFRydWUpCiAgICBpbnQgMTkyCiAgICBpbnQgMQogICAgc2V0Yml0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU4MQogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk93bmFibGUuX29ubHlfb3duZXIoKSAtPiB2b2lkOgpfb25seV9vd25lcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTg2LTE4NwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfb25seV9vd25lcihzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE5MQogICAgLy8gYXNzZXJ0IFR4bi5zZW5kZXIgPT0gc2VsZi5fZ2V0X293bmVyKCksICJvbmx5IHRoZSBvd25lciBjYW4gY2FsbCB0aGlzIGZ1bmN0aW9uIgogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiBfZ2V0X293bmVyCiAgICA9PQogICAgYXNzZXJ0IC8vIG9ubHkgdGhlIG93bmVyIGNhbiBjYWxsIHRoaXMgZnVuY3Rpb24KICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk93bmFibGUuX2dldF9vd25lcigpIC0+IGJ5dGVzOgpfZ2V0X293bmVyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxOTMtMTk1CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfb3duZXIoc2VsZikgLT4gQWNjb3VudDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxOTYKICAgIC8vIHJldHVybiBCb3goQWNjb3VudCwga2V5PSJvd25lciIpLmdldChkZWZhdWx0PUdsb2JhbC5jcmVhdG9yX2FkZHJlc3MpCiAgICBnbG9iYWwgQ3JlYXRvckFkZHJlc3MKICAgIGJ5dGUgIm93bmVyIgogICAgYm94X2dldAogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW52YWxpZF9iYWxhbmNlcygpIC0+IGJ5dGVzOgpfaW52YWxpZF9iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjI0LTYyNQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW52YWxpZF9iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjI2LTYzMQogICAgLy8gcmV0dXJuIEJhbmtCYWxhbmNlcygKICAgIC8vICAgICBiYWxhbmNlX2F2YWlsYWJsZT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBiYWxhbmNlX3RvdGFsPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfbG9ja2VkPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGJhbGFuY2VfZnVzZT1hcmM0LkJvb2woRmFsc2UpLAogICAgLy8gKQogICAgYnl0ZSAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fYmFua19iYWxhbmNlcygpIC0+IGJ5dGVzOgpfYmFua19iYWxhbmNlczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjMzLTYzNAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfYmFua19iYWxhbmNlcyhzZWxmKSAtPiBCYW5rQmFsYW5jZXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjM2CiAgICAvLyBkZWZhdWx0PXNlbGYuX2ludmFsaWRfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfaW52YWxpZF9iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MzUKICAgIC8vIHJldHVybiBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS5nZXQoCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MzUtNjM3CiAgICAvLyByZXR1cm4gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikuZ2V0KAogICAgLy8gICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9iYWxhbmNlcygpCiAgICAvLyApCiAgICBib3hfZ2V0CiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwKCkgLT4gdm9pZDoKX3NwaW5fbWFuYWdlcl9ib290c3RyYXA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgzNi04MzcKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIHByb3RvIDAgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MzgKICAgIC8vIHNlbGYuX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoKQogICAgY2FsbHN1YiBfaW5pdGlhbGl6ZV9zcGluX3BhcmFtcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoKSAtPiB2b2lkOgpfaW5pdGlhbGl6ZV9zcGluX3BhcmFtczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQ0LTg0NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5pdGlhbGl6ZV9zcGluX3BhcmFtcyhzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0NgogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg0OAogICAgLy8gbm90IHNlbGYuX3NwaW5fcGFyYW1zKCkuc3Bpbl9mdXNlLm5hdGl2ZQogICAgY2FsbHN1YiBfc3Bpbl9wYXJhbXMKICAgIGludCAzODQKICAgIGdldGJpdAogICAgYnl0ZSAweDAwCiAgICBpbnQgMAogICAgdW5jb3ZlciAyCiAgICBzZXRiaXQKICAgIGludCAwCiAgICBnZXRiaXQKICAgICEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODQ3LTg0OQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBub3Qgc2VsZi5fc3Bpbl9wYXJhbXMoKS5zcGluX2Z1c2UubmF0aXZlCiAgICAvLyApLCAic3BpbiBwYXJhbXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICBhc3NlcnQgLy8gc3BpbiBwYXJhbXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODUwCiAgICAvLyBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLnZhbHVlID0gU3BpblBhcmFtcygKICAgIGJ5dGUgInNwaW5fcGFyYW1zIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NTAtODU4CiAgICAvLyBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLnZhbHVlID0gU3BpblBhcmFtcygKICAgIC8vICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgxMDAwMDAwKSwgICMgMSBWT0kKICAgIC8vICAgICBtYXhfcGF5b3V0X211bHRpcGxpZXI9YXJjNC5VSW50NjQoMTAwMCksICAjIDEwMDB4CiAgICAvLyAgICAgcm91bmRfZnV0dXJlX2RlbHRhPWFyYzQuVUludDY0KDEpLCAgIyAxIHJvdW5kCiAgICAvLyAgICAgbWluX2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JICgxIFZPSSBiZXQsIDEgcGF5bGluZSkKICAgIC8vICAgICBtYXhfYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgyMDAwMDAwMCksICAjIDIwIFZPSQogICAgLy8gICAgIG1pbl9iYW5rX2Ftb3VudD1hcmM0LlVJbnQ2NCgxMDAwMDAwMDAwMDApLCAgIyAxMDBrIFZPSQogICAgLy8gICAgIHNwaW5fZnVzZT1hcmM0LkJvb2woVHJ1ZSksCiAgICAvLyApCiAgICBieXRlIDB4MDAwMDAwMDAwMDBmNDI0MDAwMDAwMDAwMDAwMDAzZTgwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDBmNDI0MDAwMDAwMDAwMDEzMTJkMDAwMDAwMDAxNzQ4NzZlODAwODAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9zcGluX3BhcmFtcygpIC0+IGJ5dGVzOgpfc3Bpbl9wYXJhbXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg3NC04NzUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fcGFyYW1zKHNlbGYpIC0+IFNwaW5QYXJhbXM6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODc3CiAgICAvLyBkZWZhdWx0PXNlbGYuX2ludmFsaWRfc3Bpbl9wYXJhbXMoKQogICAgY2FsbHN1YiBfaW52YWxpZF9zcGluX3BhcmFtcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NzYKICAgIC8vIHJldHVybiBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLmdldCgKICAgIGJ5dGUgInNwaW5fcGFyYW1zIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NzYtODc4CiAgICAvLyByZXR1cm4gQm94KFNwaW5QYXJhbXMsIGtleT0ic3Bpbl9wYXJhbXMiKS5nZXQoCiAgICAvLyAgICAgZGVmYXVsdD1zZWxmLl9pbnZhbGlkX3NwaW5fcGFyYW1zKCkKICAgIC8vICkKICAgIGJveF9nZXQKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2ludmFsaWRfc3Bpbl9wYXJhbXMoKSAtPiBieXRlczoKX2ludmFsaWRfc3Bpbl9wYXJhbXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg2Mi04NjMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfc3Bpbl9wYXJhbXMoc2VsZikgLT4gU3BpblBhcmFtczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4NjQtODcyCiAgICAvLyByZXR1cm4gU3BpblBhcmFtcygKICAgIC8vICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBtYXhfcGF5b3V0X211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcm91bmRfZnV0dXJlX2RlbHRhPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1pbl9iZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1heF9iZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgIG1pbl9iYW5rX2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBzcGluX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICkKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZS5fb3duYWJsZV9ib290c3RyYXAoKSAtPiB2b2lkOgpfb3duYWJsZV9ib290c3RyYXA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE4Mi0xODMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX293bmFibGVfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTg0CiAgICAvLyBCb3goQWNjb3VudCwga2V5PSJvd25lciIpLnZhbHVlID0gR2xvYmFsLmNyZWF0b3JfYWRkcmVzcwogICAgZ2xvYmFsIENyZWF0b3JBZGRyZXNzCiAgICBieXRlICJvd25lciIKICAgIGJveF9kZWwKICAgIHBvcAogICAgYnl0ZSAib3duZXIiCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5ib290c3RyYXBfY29zdCgpIC0+IGJ5dGVzOgpib290c3RyYXBfY29zdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAzMS0xMDMyCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBib290c3RyYXBfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDMzCiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fYm9vdHN0cmFwX2Nvc3QoKSkKICAgIGNhbGxzdWIgX2Jvb3RzdHJhcF9jb3N0CiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS50cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyOiBieXRlcykgLT4gdm9pZDoKdHJhbnNmZXJfb3duZXJzaGlwOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDU0LTEwNTYKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDYwCiAgICAvLyBzZWxmLl9vbmx5X293bmVyKCkKICAgIGNhbGxzdWIgX29ubHlfb3duZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA2MQogICAgLy8gc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX3RyYW5zZmVyX293bmVyc2hpcAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuT3duYWJsZS5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lcjogYnl0ZXMpIC0+IHZvaWQ6Cl90cmFuc2Zlcl9vd25lcnNoaXA6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE5OC0yMDAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3RyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IEFjY291bnQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MjAxCiAgICAvLyBCb3goQWNjb3VudCwga2V5PSJvd25lciIpLnZhbHVlID0gbmV3X293bmVyCiAgICBieXRlICJvd25lciIKICAgIGJveF9kZWwKICAgIHBvcAogICAgYnl0ZSAib3duZXIiCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9ncmlkKHNlZWQ6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2dyaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMDMtMTEwNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTA4CiAgICAvLyBlbnN1cmVfYnVkZ2V0KDEwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIFJFTSBtYXkgdXNlIDEwNzAgb3Bjb2RlIGJ1ZGdldAogICAgaW50IDEwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEwOQogICAgLy8gcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfZ3JpZChzZWVkLmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfZ2V0X2dyaWQKICAgIHJldHN1YgoKCi8vIGFsZ29weS5lbnN1cmVfYnVkZ2V0KHJlcXVpcmVkX2J1ZGdldDogdWludDY0LCBmZWVfc291cmNlOiB1aW50NjQpIC0+IHZvaWQ6CmVuc3VyZV9idWRnZXQ6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MTEtMTcKICAgIHByb3RvIDIgMAogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjE4CiAgICBmcmFtZV9kaWcgLTIKICAgIGludCAxMAogICAgKwoKZW5zdXJlX2J1ZGdldF93aGlsZV90b3BAMToKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToxOQogICAgZnJhbWVfZGlnIDAKICAgIGdsb2JhbCBPcGNvZGVCdWRnZXQKICAgID4KICAgIGJ6IGVuc3VyZV9idWRnZXRfYWZ0ZXJfd2hpbGVANwogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjIwCiAgICBpdHhuX2JlZ2luCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjEKICAgIGludCBhcHBsCiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjIKICAgIGludCBEZWxldGVBcHBsaWNhdGlvbgogICAgaXR4bl9maWVsZCBPbkNvbXBsZXRpb24KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyMwogICAgYnl0ZSAweDA2ODEwMQogICAgaXR4bl9maWVsZCBBcHByb3ZhbFByb2dyYW0KICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weToyNAogICAgYnl0ZSAweDA2ODEwMQogICAgaXR4bl9maWVsZCBDbGVhclN0YXRlUHJvZ3JhbQogICAgLy8gPGFsZ29weT4vYWxnb3B5LnB5OjI1LTI5CiAgICBmcmFtZV9kaWcgLTEKICAgIHN3aXRjaCBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzBAMyBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlXzFANAogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANgoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8wQDM6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjcKICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgYiBlbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANgoKZW5zdXJlX2J1ZGdldF9zd2l0Y2hfY2FzZV8xQDQ6CiAgICAvLyA8YWxnb3B5Pi9hbGdvcHkucHk6MjkKICAgIGdsb2JhbCBNaW5UeG5GZWUKICAgIGl0eG5fZmllbGQgRmVlCgplbnN1cmVfYnVkZ2V0X3N3aXRjaF9jYXNlX25leHRANjoKICAgIC8vIDxhbGdvcHk+L2FsZ29weS5weTozMAogICAgaXR4bl9zdWJtaXQKICAgIGIgZW5zdXJlX2J1ZGdldF93aGlsZV90b3BAMQoKZW5zdXJlX2J1ZGdldF9hZnRlcl93aGlsZUA3OgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9ncmlkKHNlZWQ6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9ncmlkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTExLTExMTIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ncmlkKHNlbGYsIHNlZWQ6IEJ5dGVzKSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTE2CiAgICAvLyByZWVsX3RvcHMgPSBzZWxmLl9nZXRfcmVlbF90b3BzKHNlZWQpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9yZWVsX3RvcHMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTExOAogICAgLy8gc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgwKSwgcmVlbF90b3BzWzBdLm5hdGl2ZSkKICAgIGR1cAogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMAogICAgc3dhcAogICAgY2FsbHN1YiBfZ2V0X3JlZWxfd2luZG93CiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMTkKICAgIC8vICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgxKSwgcmVlbF90b3BzWzFdLm5hdGl2ZSkKICAgIGR1cAogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMQogICAgc3dhcAogICAgY2FsbHN1YiBfZ2V0X3JlZWxfd2luZG93CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMTgtMTExOQogICAgLy8gc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgwKSwgcmVlbF90b3BzWzBdLm5hdGl2ZSkKICAgIC8vICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgxKSwgcmVlbF90b3BzWzFdLm5hdGl2ZSkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMjAKICAgIC8vICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgyKSwgcmVlbF90b3BzWzJdLm5hdGl2ZSkKICAgIGRpZyAxCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBpbnQgMgogICAgc3dhcAogICAgY2FsbHN1YiBfZ2V0X3JlZWxfd2luZG93CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExMTgtMTEyMAogICAgLy8gc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgwKSwgcmVlbF90b3BzWzBdLm5hdGl2ZSkKICAgIC8vICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgxKSwgcmVlbF90b3BzWzFdLm5hdGl2ZSkKICAgIC8vICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgyKSwgcmVlbF90b3BzWzJdLm5hdGl2ZSkKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTIxCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMyksIHJlZWxfdG9wc1szXS5uYXRpdmUpCiAgICBkaWcgMQogICAgZXh0cmFjdCAyNCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDMKICAgIHN3YXAKICAgIGNhbGxzdWIgX2dldF9yZWVsX3dpbmRvdwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTE4LTExMjEKICAgIC8vIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMCksIHJlZWxfdG9wc1swXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMSksIHJlZWxfdG9wc1sxXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMiksIHJlZWxfdG9wc1syXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMyksIHJlZWxfdG9wc1szXS5uYXRpdmUpCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEyMgogICAgLy8gKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDQpLCByZWVsX3RvcHNbNF0ubmF0aXZlKQogICAgc3dhcAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgaW50IDQKICAgIHN3YXAKICAgIGNhbGxzdWIgX2dldF9yZWVsX3dpbmRvdwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTE4LTExMjIKICAgIC8vIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMCksIHJlZWxfdG9wc1swXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMSksIHJlZWxfdG9wc1sxXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMiksIHJlZWxfdG9wc1syXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMyksIHJlZWxfdG9wc1szXS5uYXRpdmUpCiAgICAvLyArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoNCksIHJlZWxfdG9wc1s0XS5uYXRpdmUpCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTExNy0xMTIzCiAgICAvLyByZXR1cm4gKAogICAgLy8gICAgIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMCksIHJlZWxfdG9wc1swXS5uYXRpdmUpCiAgICAvLyAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDEpLCByZWVsX3RvcHNbMV0ubmF0aXZlKQogICAgLy8gICAgICsgc2VsZi5fZ2V0X3JlZWxfd2luZG93KFVJbnQ2NCgyKSwgcmVlbF90b3BzWzJdLm5hdGl2ZSkKICAgIC8vICAgICArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMyksIHJlZWxfdG9wc1szXS5uYXRpdmUpCiAgICAvLyAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDQpLCByZWVsX3RvcHNbNF0ubmF0aXZlKQogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9yZWVsX3RvcHMoc2VlZDogYnl0ZXMpIC0+IGJ5dGVzOgpfZ2V0X3JlZWxfdG9wczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA2NS0xMDY4CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcmVlbF90b3BzKAogICAgLy8gICAgIHNlbGYsIHNlZWQ6IEJ5dGVzCiAgICAvLyApIC0+IGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzVdXToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDcyCiAgICAvLyBtYXhfcmVlbF9zdG9wID0gc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkgLSAoCiAgICBjYWxsc3ViIF9nZXRfcmVlbF9sZW5ndGgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA3MwogICAgLy8gc2VsZi5fZ2V0X3JlZWxfd2luZG93X2xlbmd0aCgpICsgVUludDY0KDEpCiAgICBjYWxsc3ViIF9nZXRfcmVlbF93aW5kb3dfbGVuZ3RoCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDcyLTEwNzQKICAgIC8vIG1heF9yZWVsX3N0b3AgPSBzZWxmLl9nZXRfcmVlbF9sZW5ndGgoKSAtICgKICAgIC8vICAgICBzZWxmLl9nZXRfcmVlbF93aW5kb3dfbGVuZ3RoKCkgKyBVSW50NjQoMSkKICAgIC8vICkKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA3NgogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMSIpKVstODpdKS5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDMxCiAgICBjb25jYXQKICAgIHNoYTI1NgogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGRpZyAxCiAgICBzd2FwCiAgICAtCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwNzUtMTA3OAogICAgLy8gdG9wXzEgPSAoCiAgICAvLyAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMSIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICkKICAgIGRpZyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwNzYtMTA3NwogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMSIpKVstODpdKS5uYXRpdmUKICAgIC8vICUgbWF4X3JlZWxfc3RvcAogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDc1LTEwNzgKICAgIC8vIHRvcF8xID0gKAogICAgLy8gICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjEiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgJSBtYXhfcmVlbF9zdG9wCiAgICAvLyApCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwODAKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjIiKSlbLTg6XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzMgogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIGR1cAogICAgbGVuCiAgICBpbnQgOAogICAgZGlnIDEKICAgID49CiAgICBpbnQgOAogICAgZGlnIDIKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBkaWcgMQogICAgc3dhcAogICAgLQogICAgc3dhcAogICAgc3Vic3RyaW5nMwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDc5LTEwODIKICAgIC8vIHRvcF8yID0gKAogICAgLy8gICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjIiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgJSBtYXhfcmVlbF9zdG9wCiAgICAvLyApCiAgICBkaWcgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDgwLTEwODEKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjIiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAlIG1heF9yZWVsX3N0b3AKICAgICUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA3OS0xMDgyCiAgICAvLyB0b3BfMiA9ICgKICAgIC8vICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKG9wLnNoYTI1NihzZWVkICsgQnl0ZXMoYiIyIikpWy04Ol0pLm5hdGl2ZQogICAgLy8gICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gKQogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDg0CiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKG9wLnNoYTI1NihzZWVkICsgQnl0ZXMoYiIzIikpWy04Ol0pLm5hdGl2ZQogICAgZnJhbWVfZGlnIC0xCiAgICBieXRlIDB4MzMKICAgIGNvbmNhdAogICAgc2hhMjU2CiAgICBkdXAKICAgIGxlbgogICAgaW50IDgKICAgIGRpZyAxCiAgICA+PQogICAgaW50IDgKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgZGlnIDEKICAgIHN3YXAKICAgIC0KICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA4My0xMDg2CiAgICAvLyB0b3BfMyA9ICgKICAgIC8vICAgICBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKG9wLnNoYTI1NihzZWVkICsgQnl0ZXMoYiIzIikpWy04Ol0pLm5hdGl2ZQogICAgLy8gICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gKQogICAgZGlnIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA4NC0xMDg1CiAgICAvLyBhcmM0LlVJbnQ2NC5mcm9tX2J5dGVzKG9wLnNoYTI1NihzZWVkICsgQnl0ZXMoYiIzIikpWy04Ol0pLm5hdGl2ZQogICAgLy8gJSBtYXhfcmVlbF9zdG9wCiAgICAlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwODMtMTA4NgogICAgLy8gdG9wXzMgPSAoCiAgICAvLyAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMyIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICkKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA4OAogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNCIpKVstODpdKS5uYXRpdmUKICAgIGZyYW1lX2RpZyAtMQogICAgYnl0ZSAweDM0CiAgICBjb25jYXQKICAgIHNoYTI1NgogICAgZHVwCiAgICBsZW4KICAgIGludCA4CiAgICBkaWcgMQogICAgPj0KICAgIGludCA4CiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGRpZyAxCiAgICBzd2FwCiAgICAtCiAgICBzd2FwCiAgICBzdWJzdHJpbmczCiAgICBidG9pCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwODctMTA5MAogICAgLy8gdG9wXzQgPSAoCiAgICAvLyAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNCIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICkKICAgIGRpZyAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwODgtMTA4OQogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNCIpKVstODpdKS5uYXRpdmUKICAgIC8vICUgbWF4X3JlZWxfc3RvcAogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDg3LTEwOTAKICAgIC8vIHRvcF80ID0gKAogICAgLy8gICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjQiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgJSBtYXhfcmVlbF9zdG9wCiAgICAvLyApCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwOTIKICAgIC8vIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjUiKSlbLTg6XSkubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ5dGUgMHgzNQogICAgY29uY2F0CiAgICBzaGEyNTYKICAgIGR1cAogICAgbGVuCiAgICBpbnQgOAogICAgZGlnIDEKICAgID49CiAgICBpbnQgOAogICAgZGlnIDIKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBkaWcgMQogICAgc3dhcAogICAgLQogICAgc3dhcAogICAgc3Vic3RyaW5nMwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDkxLTEwOTQKICAgIC8vIHRvcF81ID0gKAogICAgLy8gICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjUiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgJSBtYXhfcmVlbF9zdG9wCiAgICAvLyApCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwOTItMTA5MwogICAgLy8gYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNSIpKVstODpdKS5uYXRpdmUKICAgIC8vICUgbWF4X3JlZWxfc3RvcAogICAgJQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDk2CiAgICAvLyBhcmM0LlVJbnQ2NCh0b3BfMSksCiAgICB1bmNvdmVyIDQKICAgIGl0b2IKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTA5NwogICAgLy8gYXJjNC5VSW50NjQodG9wXzIpLAogICAgdW5jb3ZlciA0CiAgICBpdG9iCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwOTgKICAgIC8vIGFyYzQuVUludDY0KHRvcF8zKSwKICAgIHVuY292ZXIgNAogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDk5CiAgICAvLyBhcmM0LlVJbnQ2NCh0b3BfNCksCiAgICB1bmNvdmVyIDQKICAgIGl0b2IKICAgIGNvdmVyIDQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTEwMAogICAgLy8gYXJjNC5VSW50NjQodG9wXzUpLAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBjb3ZlciA0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEwOTUtMTEwMQogICAgLy8gcmV0dXJuIGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgYXJjNC5VSW50NjQodG9wXzEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KHRvcF8yKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCh0b3BfMyksCiAgICAvLyAgICAgYXJjNC5VSW50NjQodG9wXzQpLAogICAgLy8gICAgIGFyYzQuVUludDY0KHRvcF81KSwKICAgIC8vICkKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5SZWVsTWFuYWdlci5fZ2V0X3JlZWxfbGVuZ3RoKCkgLT4gdWludDY0OgpfZ2V0X3JlZWxfbGVuZ3RoOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MTAtNDEyCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcmVlbF9sZW5ndGgoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxNgogICAgLy8gcmV0dXJuIEJveChVSW50NjQsIGtleT0icmVlbF9sZW5ndGgiKS5nZXQoZGVmYXVsdD1VSW50NjQoMTAwKSkKICAgIGJ5dGUgInJlZWxfbGVuZ3RoIgogICAgYm94X2dldAogICAgc3dhcAogICAgYnRvaQogICAgaW50IDEwMAogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VyLl9nZXRfcmVlbF93aW5kb3dfbGVuZ3RoKCkgLT4gdWludDY0OgpfZ2V0X3JlZWxfd2luZG93X2xlbmd0aDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQxLTQ0MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JlZWxfd2luZG93X2xlbmd0aChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDQzCiAgICAvLyByZXR1cm4gQm94KFVJbnQ2NCwga2V5PSJyZWVsX3dpbmRvd19sZW5ndGgiKS5nZXQoZGVmYXVsdD1VSW50NjQoMykpCiAgICBieXRlICJyZWVsX3dpbmRvd19sZW5ndGgiCiAgICBib3hfZ2V0CiAgICBzd2FwCiAgICBidG9pCiAgICBpbnQgMwogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VyLl9nZXRfcmVlbF93aW5kb3cocmVlbDogdWludDY0LCBpbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9yZWVsX3dpbmRvdzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzg1LTM4NwogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JlZWxfd2luZG93KHNlbGYsIHJlZWw6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NCkgLT4gQnl0ZXM6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzkyCiAgICAvLyByZWVsX2RhdGEgPSBzZWxmLl9nZXRfcmVlbChyZWVsKQogICAgZnJhbWVfZGlnIC0yCiAgICBjYWxsc3ViIF9nZXRfcmVlbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTMKICAgIC8vIHJlZWxfbGVuZ3RoID0gc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkKICAgIGNhbGxzdWIgX2dldF9yZWVsX2xlbmd0aAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTUKICAgIC8vIHBvczEgPSAoaW5kZXggKyBVSW50NjQoMCkpICUgcmVlbF9sZW5ndGgKICAgIGZyYW1lX2RpZyAtMQogICAgZGlnIDEKICAgICUKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM5NgogICAgLy8gcG9zMiA9IChpbmRleCArIFVJbnQ2NCgxKSkgJSByZWVsX2xlbmd0aAogICAgZnJhbWVfZGlnIC0xCiAgICBpbnQgMQogICAgKwogICAgZGlnIDEKICAgICUKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzk3CiAgICAvLyBwb3MzID0gKGluZGV4ICsgVUludDY0KDIpKSAlIHJlZWxfbGVuZ3RoCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAyCiAgICArCiAgICBzd2FwCiAgICAlCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozOTktNDAwCiAgICAvLyAjIEdldCBhbGwgdGhyZWUgYnl0ZXMgaW4gb25lIHNsaWNlIGlmIHBvc2l0aW9ucyBhcmUgY29uc2VjdXRpdmUKICAgIC8vIGlmIHBvczEgKyBVSW50NjQoMikgPT0gcG9zMyBhbmQgcG9zMSArIFVJbnQ2NCgxKSA9PSBwb3MyOgogICAgaW50IDIKICAgICsKICAgID09CiAgICBieiBfZ2V0X3JlZWxfd2luZG93X2FmdGVyX2lmX2Vsc2VAMwogICAgZnJhbWVfZGlnIDEKICAgIGludCAxCiAgICArCiAgICBmcmFtZV9kaWcgMgogICAgPT0KICAgIGJ6IF9nZXRfcmVlbF93aW5kb3dfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMQogICAgLy8gcmV0dXJuIHJlZWxfZGF0YVtwb3MxIDogcG9zMyArIDFdCiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICBsZW4KICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGRpZyAxCiAgICA+PQogICAgdW5jb3ZlciAyCiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIHN3YXAKICAgIGZyYW1lX2RpZyAzCiAgICBpbnQgMQogICAgKwogICAgZHVwCiAgICBkaWcgMgogICAgPj0KICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIHNlbGVjdAogICAgZHVwCiAgICBkaWcgMgogICAgPAogICAgZGlnIDIKICAgIHN3YXAKICAgIHNlbGVjdAogICAgc3Vic3RyaW5nMwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcmVlbF93aW5kb3dfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUKICAgIC8vIHJlZWxfZGF0YVtwb3MxIDogcG9zMSArIDFdCiAgICBmcmFtZV9kaWcgMAogICAgZHVwCiAgICBsZW4KICAgIGZyYW1lX2RpZyAxCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGRpZyAxCiAgICA+PQogICAgZGlnIDIKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgY292ZXIgMgogICAgc3dhcAogICAgaW50IDEKICAgICsKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBkaWcgMgogICAgc3dhcAogICAgc2VsZWN0CiAgICBkdXAKICAgIGRpZyAzCiAgICA8CiAgICBkaWcgMwogICAgc3dhcAogICAgc2VsZWN0CiAgICBkaWcgMwogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDA2CiAgICAvLyArIHJlZWxfZGF0YVtwb3MyIDogcG9zMiArIDFdCiAgICBmcmFtZV9kaWcgMgogICAgZHVwCiAgICBkaWcgMgogICAgPj0KICAgIGRpZyAxCiAgICBkaWcgMwogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGNvdmVyIDIKICAgIGludCAxCiAgICArCiAgICBkdXAKICAgIGRpZyAyCiAgICA+PQogICAgZGlnIDIKICAgIHN3YXAKICAgIHNlbGVjdAogICAgZHVwCiAgICBkaWcgMwogICAgPAogICAgZGlnIDMKICAgIHN3YXAKICAgIHNlbGVjdAogICAgZGlnIDMKICAgIHVuY292ZXIgMwogICAgdW5jb3ZlciAyCiAgICBzdWJzdHJpbmczCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwNS00MDYKICAgIC8vIHJlZWxfZGF0YVtwb3MxIDogcG9zMSArIDFdCiAgICAvLyArIHJlZWxfZGF0YVtwb3MyIDogcG9zMiArIDFdCiAgICB1bmNvdmVyIDMKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDcKICAgIC8vICsgcmVlbF9kYXRhW3BvczMgOiBwb3MzICsgMV0KICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGRpZyAyCiAgICA+PQogICAgZGlnIDEKICAgIGRpZyAzCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgY292ZXIgMgogICAgaW50IDEKICAgICsKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGR1cAogICAgZGlnIDIKICAgIDwKICAgIGRpZyAyCiAgICBzd2FwCiAgICBzZWxlY3QKICAgIHVuY292ZXIgMwogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MDUtNDA3CiAgICAvLyByZWVsX2RhdGFbcG9zMSA6IHBvczEgKyAxXQogICAgLy8gKyByZWVsX2RhdGFbcG9zMiA6IHBvczIgKyAxXQogICAgLy8gKyByZWVsX2RhdGFbcG9zMyA6IHBvczMgKyAxXQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQwMy00MDgKICAgIC8vICMgT3RoZXJ3aXNlIHVzZSBzaW5nbGUgY29uY2F0IGZvciBub24tY29uc2VjdXRpdmUgcG9zaXRpb25zICh3cmFwLWFyb3VuZCBjYXNlKQogICAgLy8gcmV0dXJuICgKICAgIC8vICAgICByZWVsX2RhdGFbcG9zMSA6IHBvczEgKyAxXQogICAgLy8gICAgICsgcmVlbF9kYXRhW3BvczIgOiBwb3MyICsgMV0KICAgIC8vICAgICArIHJlZWxfZGF0YVtwb3MzIDogcG9zMyArIDFdCiAgICAvLyApCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VyLl9nZXRfcmVlbChpbmRleDogdWludDY0KSAtPiBieXRlczoKX2dldF9yZWVsOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNDctMzQ5CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcmVlbChzZWxmLCBpbmRleDogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTMKICAgIC8vIHJlZWxfbGVuZ3RoID0gc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkKICAgIGNhbGxzdWIgX2dldF9yZWVsX2xlbmd0aAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNTQKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfcmVlbHMoKVtpbmRleCAqIHJlZWxfbGVuZ3RoIDogKGluZGV4ICsgMSkgKiByZWVsX2xlbmd0aF0KICAgIGNhbGxzdWIgX2dldF9yZWVscwogICAgZHVwCiAgICBsZW4KICAgIGZyYW1lX2RpZyAtMQogICAgZGlnIDMKICAgICoKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBkaWcgMgogICAgc3dhcAogICAgc2VsZWN0CiAgICBjb3ZlciAyCiAgICBmcmFtZV9kaWcgLTEKICAgIGludCAxCiAgICArCiAgICB1bmNvdmVyIDQKICAgICoKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGR1cAogICAgZGlnIDMKICAgIDwKICAgIGRpZyAzCiAgICBzd2FwCiAgICBzZWxlY3QKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VyLl9nZXRfcmVlbHMoKSAtPiBieXRlczoKX2dldF9yZWVsczoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDI2LTQyOAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JlZWxzKHNlbGYpIC0+IEJ5dGVzOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQyOQogICAgLy8gcmV0dXJuIEJveChCeXRlcywga2V5PSJyZWVscyIpLmdldCgKICAgIGJ5dGUgInJlZWxzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjktNDM5CiAgICAvLyByZXR1cm4gQm94KEJ5dGVzLCBrZXk9InJlZWxzIikuZ2V0KAogICAgLy8gICAgIGRlZmF1bHQ9KAogICAgLy8gICAgICAgICBCeXRlcygKICAgIC8vICAgICAgICAgICAgIGIiREREX0NfX19DRF9DX19DX0NfX0NCRERCQ19fX19fX0REX19fX19EX0RfQV9ERENfQ0NEQ19EX19fX19CRF9EQ19DX19fX19fX19DX19DX0NfX19fX0JfRF9DX19fX19fQ19EXyIKICAgIC8vICAgICAgICAgICAgICsgYiJfRF9EX0RfX19DX19fX19EQkNfQ19CX19EX0JfX19fX0NBRF9fX19fX0RfX19DRENfQ0NEX19EX19fX0NEX19DX0NDRENfX19DX0NfX19fX19fQ19EQkRfRF9fRENfX19DRF9EIgogICAgLy8gICAgICAgICAgICAgKyBiIl9DQ19EQkRfX0RDX0NfX19ERF9CRERfX19DQV9fRF9fX0NDX0RDX19EQ0RfX0NDQ19DX19fX19EQ19CX0NEX19DX19fX19fX19EX19fREJfX19fQ19EQ19EX19fX0RfX19fX18iCiAgICAvLyAgICAgICAgICAgICArIGIiX19EQ0RCQ0RfREREX19fQ0NfX19fQ19fQ19fQ0NEX0NfX0NfQ0JEQl9fQ19EQ19fX0NfX0REX0RfX19fX19fX0RfX19fQ0FCX19fX0RfQ19fREREX19fQ19fX19fQ19EX19fXyIKICAgIC8vICAgICAgICAgICAgICsgYiJfX19fRENEQ0RfRF9CQkREQ19fX19fQ0NfX0RfX0RfX0RfX19fX19fQl9DQ19fX0RfQ0RfX19CQ0RDX19BX19fX19fX0RDRF9DX19DX19EX19fX19EX19EX19fQ19DX0NEQ0NfIgogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgYm94X2dldAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MzEtNDM3CiAgICAvLyBCeXRlcygKICAgIC8vICAgICBiIkRERF9DX19fQ0RfQ19fQ19DX19DQkREQkNfX19fX19ERF9fX19fRF9EX0FfRERDX0NDRENfRF9fX19fQkRfRENfQ19fX19fX19fQ19fQ19DX19fX19CX0RfQ19fX19fX0NfRF8iCiAgICAvLyAgICAgKyBiIl9EX0RfRF9fX0NfX19fX0RCQ19DX0JfX0RfQl9fX19fQ0FEX19fX19fRF9fX0NEQ19DQ0RfX0RfX19fQ0RfX0NfQ0NEQ19fX0NfQ19fX19fX19DX0RCRF9EX19EQ19fX0NEX0QiCiAgICAvLyAgICAgKyBiIl9DQ19EQkRfX0RDX0NfX19ERF9CRERfX19DQV9fRF9fX0NDX0RDX19EQ0RfX0NDQ19DX19fX19EQ19CX0NEX19DX19fX19fX19EX19fREJfX19fQ19EQ19EX19fX0RfX19fX18iCiAgICAvLyAgICAgKyBiIl9fRENEQkNEX0RERF9fX0NDX19fX0NfX0NfX0NDRF9DX19DX0NCREJfX0NfRENfX19DX19ERF9EX19fX19fX19EX19fX0NBQl9fX19EX0NfX0RERF9fX0NfX19fX0NfRF9fX18iCiAgICAvLyAgICAgKyBiIl9fX19EQ0RDRF9EX0JCRERDX19fX19DQ19fRF9fRF9fRF9fX19fX19CX0NDX19fRF9DRF9fX0JDRENfX0FfX19fX19fRENEX0NfX0NfX0RfX19fX0RfX0RfX19DX0NfQ0RDQ18iCiAgICAvLyApCiAgICBieXRlIDB4NDQ0NDQ0NWY0MzVmNWY1ZjQzNDQ1ZjQzNWY1ZjQzNWY0MzVmNWY0MzQyNDQ0NDQyNDM1ZjVmNWY1ZjVmNWY0NDQ0NWY1ZjVmNWY1ZjQ0NWY0NDVmNDE1ZjQ0NDQ0MzVmNDM0MzQ0NDM1ZjQ0NWY1ZjVmNWY1ZjQyNDQ1ZjQ0NDM1ZjQzNWY1ZjVmNWY1ZjVmNWY1ZjQzNWY1ZjQzNWY0MzVmNWY1ZjVmNWY0MjVmNDQ1ZjQzNWY1ZjVmNWY1ZjVmNDM1ZjQ0NWY1ZjQ0NWY0NDVmNDQ1ZjVmNWY0MzVmNWY1ZjVmNWY0NDQyNDM1ZjQzNWY0MjVmNWY0NDVmNDI1ZjVmNWY1ZjVmNDM0MTQ0NWY1ZjVmNWY1ZjVmNDQ1ZjVmNWY0MzQ0NDM1ZjQzNDM0NDVmNWY0NDVmNWY1ZjVmNDM0NDVmNWY0MzVmNDM0MzQ0NDM1ZjVmNWY0MzVmNDM1ZjVmNWY1ZjVmNWY1ZjQzNWY0NDQyNDQ1ZjQ0NWY1ZjQ0NDM1ZjVmNWY0MzQ0NWY0NDVmNDM0MzVmNDQ0MjQ0NWY1ZjQ0NDM1ZjQzNWY1ZjVmNDQ0NDVmNDI0NDQ0NWY1ZjVmNDM0MTVmNWY0NDVmNWY1ZjQzNDM1ZjQ0NDM1ZjVmNDQ0MzQ0NWY1ZjQzNDM0MzVmNDM1ZjVmNWY1ZjVmNDQ0MzVmNDI1ZjQzNDQ1ZjVmNDM1ZjVmNWY1ZjVmNWY1ZjVmNDQ1ZjVmNWY0NDQyNWY1ZjVmNWY0MzVmNDQ0MzVmNDQ1ZjVmNWY1ZjQ0NWY1ZjVmNWY1ZjVmNWY1ZjQ0NDM0NDQyNDM0NDVmNDQ0NDQ0NWY1ZjVmNDM0MzVmNWY1ZjVmNDM1ZjVmNDM1ZjVmNDM0MzQ0NWY0MzVmNWY0MzVmNDM0MjQ0NDI1ZjVmNDM1ZjQ0NDM1ZjVmNWY0MzVmNWY0NDQ0NWY0NDVmNWY1ZjVmNWY1ZjVmNWY0NDVmNWY1ZjVmNDM0MTQyNWY1ZjVmNWY0NDVmNDM1ZjVmNDQ0NDQ0NWY1ZjVmNDM1ZjVmNWY1ZjVmNDM1ZjQ0NWY1ZjVmNWY1ZjVmNWY1ZjQ0NDM0NDQzNDQ1ZjQ0NWY0MjQyNDQ0NDQzNWY1ZjVmNWY1ZjQzNDM1ZjVmNDQ1ZjVmNDQ1ZjVmNDQ1ZjVmNWY1ZjVmNWY1ZjQyNWY0MzQzNWY1ZjVmNDQ1ZjQzNDQ1ZjVmNWY0MjQzNDQ0MzVmNWY0MTVmNWY1ZjVmNWY1ZjVmNDQ0MzQ0NWY0MzVmNWY0MzVmNWY0NDVmNWY1ZjVmNWY0NDVmNWY0NDVmNWY1ZjQzNWY0MzVmNDM0NDQzNDM1ZgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjktNDM5CiAgICAvLyByZXR1cm4gQm94KEJ5dGVzLCBrZXk9InJlZWxzIikuZ2V0KAogICAgLy8gICAgIGRlZmF1bHQ9KAogICAgLy8gICAgICAgICBCeXRlcygKICAgIC8vICAgICAgICAgICAgIGIiREREX0NfX19DRF9DX19DX0NfX0NCRERCQ19fX19fX0REX19fX19EX0RfQV9ERENfQ0NEQ19EX19fX19CRF9EQ19DX19fX19fX19DX19DX0NfX19fX0JfRF9DX19fX19fQ19EXyIKICAgIC8vICAgICAgICAgICAgICsgYiJfRF9EX0RfX19DX19fX19EQkNfQ19CX19EX0JfX19fX0NBRF9fX19fX0RfX19DRENfQ0NEX19EX19fX0NEX19DX0NDRENfX19DX0NfX19fX19fQ19EQkRfRF9fRENfX19DRF9EIgogICAgLy8gICAgICAgICAgICAgKyBiIl9DQ19EQkRfX0RDX0NfX19ERF9CRERfX19DQV9fRF9fX0NDX0RDX19EQ0RfX0NDQ19DX19fX19EQ19CX0NEX19DX19fX19fX19EX19fREJfX19fQ19EQ19EX19fX0RfX19fX18iCiAgICAvLyAgICAgICAgICAgICArIGIiX19EQ0RCQ0RfREREX19fQ0NfX19fQ19fQ19fQ0NEX0NfX0NfQ0JEQl9fQ19EQ19fX0NfX0REX0RfX19fX19fX0RfX19fQ0FCX19fX0RfQ19fREREX19fQ19fX19fQ19EX19fXyIKICAgIC8vICAgICAgICAgICAgICsgYiJfX19fRENEQ0RfRF9CQkREQ19fX19fQ0NfX0RfX0RfX0RfX19fX19fQl9DQ19fX0RfQ0RfX19CQ0RDX19BX19fX19fX0RDRF9DX19DX19EX19fX19EX19EX19fQ19DX0NEQ0NfIgogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfcGF5bGluZV9jb3VudCgpIC0+IGJ5dGVzOgpnZXRfcGF5bGluZV9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE1Mi0xMTUzCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfcGF5bGluZV9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTU0CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3BheWxpbmVfY291bnQoKSkKICAgIGNhbGxzdWIgX2dldF9wYXlsaW5lX2NvdW50CiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3BheWxpbmVfY291bnQoKSAtPiB1aW50NjQ6Cl9nZXRfcGF5bGluZV9jb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE1Ni0xMTU3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcGF5bGluZV9jb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE1OAogICAgLy8gcmV0dXJuIEJveChVSW50NjQsIGtleT0icGF5bGluZV9jb3VudCIpLmdldChkZWZhdWx0PVVJbnQ2NCgyMCkpCiAgICBieXRlICJwYXlsaW5lX2NvdW50IgogICAgYm94X2dldAogICAgc3dhcAogICAgYnRvaQogICAgaW50IDIwCiAgICBzd2FwCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuZ2V0X3BheWxpbmUocGF5bGluZV9pbmRleDogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfcGF5bGluZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE2MC0xMTYzCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfcGF5bGluZSgKICAgIC8vICAgICBzZWxmLCBwYXlsaW5lX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFs1XV06CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE2NAogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9wYXlsaW5lKHBheWxpbmVfaW5kZXgubmF0aXZlKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9nZXRfcGF5bGluZQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9wYXlsaW5lKGluZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X3BheWxpbmU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNzAtMTE3MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheWxpbmUoCiAgICAvLyAgICAgc2VsZiwgaW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFs1XV06CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE3NAogICAgLy8gcGF5bGluZXMgPSBzZWxmLl9nZXRfcGF5bGluZXMoKQogICAgY2FsbHN1YiBfZ2V0X3BheWxpbmVzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNzUKICAgIC8vIHN0YXJ0ID0gaW5kZXggKiBVSW50NjQoNSkKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDUKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE3NwogICAgLy8gcGF5bGluZXNbc3RhcnRdLAogICAgZHVwCiAgICBpbnQgOAogICAgKgogICAgZGlnIDIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE3OAogICAgLy8gcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMSldLAogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgaW50IDgKICAgICoKICAgIGRpZyAyCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNzkKICAgIC8vIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDIpXSwKICAgIGR1cAogICAgaW50IDIKICAgICsKICAgIGludCA4CiAgICAqCiAgICBkaWcgMgogICAgc3dhcAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTgwCiAgICAvLyBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgzKV0sCiAgICBkdXAKICAgIGludCAzCiAgICArCiAgICBpbnQgOAogICAgKgogICAgZGlnIDIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTE4MQogICAgLy8gcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoNCldLAogICAgaW50IDQKICAgICsKICAgIGludCA4CiAgICAqCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExNzYtMTE4MgogICAgLy8gcmV0dXJuIGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgcGF5bGluZXNbc3RhcnRdLAogICAgLy8gICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDEpXSwKICAgIC8vICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgyKV0sCiAgICAvLyAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMyldLAogICAgLy8gICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDQpXSwKICAgIC8vICkKICAgIHVuY292ZXIgNAogICAgdW5jb3ZlciA0CiAgICBjb25jYXQKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fZ2V0X3BheWxpbmVzKCkgLT4gYnl0ZXM6Cl9nZXRfcGF5bGluZXM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExODQtMTE4NwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheWxpbmVzKAogICAgLy8gICAgIHNlbGYsCiAgICAvLyApIC0+IGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzEwMF1dOgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjExOTItMTMxNAogICAgLy8gZGVmYXVsdD1hcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICMgdG9wIGxpbmUKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAjIG1pZGRsZSBsaW5lCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgIyBib3R0b20gbGluZQogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICMgViBzaGFwZQogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICMgaW52ZXJ0ZWQgVgogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICMgdG9wLWNlbnRlciBwZWFrCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgIyBib3R0b20tY2VudGVyIHZhbGxleQogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICMgTSBzaGFwZQogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICMgVyBzaGFwZQogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICMgQWRkaXRpb25hbCBwYXlsaW5lcwogICAgLy8gICAgICMgWzAsMSwxLDEsMl0KICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAjIFsyLDEsMSwxLDBdCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgIyBbMCwxLDIsMiwyXQogICAgLy8gICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICMgWzIsMSwwLDAsMF0KICAgIC8vICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAjIFsxLDEsMCwxLDFdCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgIyBbMSwxLDIsMSwxXQogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICMgWzAsMiwwLDIsMF0KICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAjIFsyLDAsMiwwLDJdCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgIyBbMSwyLDIsMiwxXQogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICMgWzEsMCwwLDAsMV0KICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAjIFswLDEsMCwxLDJdCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyApCiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAyMDAwMDAwMDAwMDAwMDAwMjAwMDAwMDAwMDAwMDAwMDIwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDEwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMTAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAxMDAwMDAwMDAwMDAwMDAwMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTkwCiAgICAvLyBrZXk9InBheWxpbmVzIiwKICAgIGJ5dGUgInBheWxpbmVzIgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTg4LTEzMTUKICAgIC8vIHJldHVybiBCb3goCiAgICAvLyAgICAgYXJjNC5TdGF0aWNBcnJheVthcmM0LlVJbnQ2NCwgdHlwaW5nLkxpdGVyYWxbMTAwXV0sCiAgICAvLyAgICAga2V5PSJwYXlsaW5lcyIsCiAgICAvLyApLmdldCgKICAgIC8vICAgICBkZWZhdWx0PWFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgICAgICMgdG9wIGxpbmUKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAjIG1pZGRsZSBsaW5lCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgIyBib3R0b20gbGluZQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICMgViBzaGFwZQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICMgaW52ZXJ0ZWQgVgogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICMgdG9wLWNlbnRlciBwZWFrCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgIyBib3R0b20tY2VudGVyIHZhbGxleQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICMgTSBzaGFwZQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICMgVyBzaGFwZQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICMgQWRkaXRpb25hbCBwYXlsaW5lcwogICAgLy8gICAgICAgICAjIFswLDEsMSwxLDJdCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgIyBbMiwxLDEsMSwwXQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICMgWzAsMSwyLDIsMl0KICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAjIFsyLDEsMCwwLDBdCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgIyBbMSwxLDAsMSwxXQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICMgWzEsMSwyLDEsMV0KICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAjIFswLDIsMCwyLDBdCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgIyBbMiwwLDIsMCwyXQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICMgWzEsMiwyLDIsMV0KICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAjIFsxLDAsMCwwLDFdCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgIyBbMCwxLDAsMSwyXQogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgYm94X2dldAogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5nZXRfcGF5bGluZXMoKSAtPiBieXRlczoKZ2V0X3BheWxpbmVzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTY2LTExNjcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9wYXlsaW5lcyhzZWxmKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFsxMDBdXToKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMTY4CiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X3BheWxpbmVzKCkKICAgIGNhbGxzdWIgX2dldF9wYXlsaW5lcwogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUubWF0Y2hfcGF5bGluZShncmlkOiBieXRlcywgcGF5bGluZV9pbmRleDogYnl0ZXMpIC0+IGJ5dGVzOgptYXRjaF9wYXlsaW5lOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzE3LTEzMTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIG1hdGNoX3BheWxpbmUoc2VsZiwgZ3JpZDogQnl0ZXMxNSwgcGF5bGluZV9pbmRleDogYXJjNC5VSW50NjQpIC0+IFBheWxpbmVNYXRjaDoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzI2CiAgICAvLyByZXR1cm4gc2VsZi5fbWF0Y2hfcGF5bGluZShncmlkLmJ5dGVzLCBwYXlsaW5lX2luZGV4Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBzd2FwCiAgICBjYWxsc3ViIF9tYXRjaF9wYXlsaW5lCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TbG90TWFjaGluZS5fbWF0Y2hfcGF5bGluZShncmlkOiBieXRlcywgcGF5bGluZV9pbmRleDogdWludDY0KSAtPiBieXRlczoKX21hdGNoX3BheWxpbmU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMjgtMTMyOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfbWF0Y2hfcGF5bGluZShzZWxmLCBncmlkOiBCeXRlcywgcGF5bGluZV9pbmRleDogVUludDY0KSAtPiBQYXlsaW5lTWF0Y2g6CiAgICBwcm90byAyIDEKICAgIGJ5dGUgIiIKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzM0CiAgICAvLyBwYXlsaW5lcyA9IHNlbGYuX2dldF9wYXlsaW5lcygpCiAgICBjYWxsc3ViIF9nZXRfcGF5bGluZXMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzNS0xMzM2CiAgICAvLyAjIFJlcGxhY2Ugc2xpY2luZyB3aXRoIGluZGl2aWR1YWwgaW5kZXggYWNjZXNzCiAgICAvLyBzdGFydCA9IHBheWxpbmVfaW5kZXggKiBVSW50NjQoNSkKICAgIGZyYW1lX2RpZyAtMQogICAgaW50IDUKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzOAogICAgLy8gcGF5bGluZXNbc3RhcnRdLAogICAgZHVwCiAgICBpbnQgOAogICAgKgogICAgZGlnIDIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTMzOQogICAgLy8gcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMSldLAogICAgZHVwCiAgICBpbnQgMQogICAgKwogICAgaW50IDgKICAgICoKICAgIGRpZyAyCiAgICBzd2FwCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBjb3ZlciAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNDAKICAgIC8vIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDIpXSwKICAgIGR1cAogICAgaW50IDIKICAgICsKICAgIGludCA4CiAgICAqCiAgICBkaWcgMgogICAgc3dhcAogICAgaW50IDgKICAgIGV4dHJhY3QzIC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzQxCiAgICAvLyBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgzKV0sCiAgICBkdXAKICAgIGludCAzCiAgICArCiAgICBpbnQgOAogICAgKgogICAgZGlnIDIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGNvdmVyIDIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM0MgogICAgLy8gcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoNCldLAogICAgaW50IDQKICAgICsKICAgIGludCA4CiAgICAqCiAgICBpbnQgOAogICAgZXh0cmFjdDMgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzMzctMTM0MwogICAgLy8gcGF5bGluZSA9IGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgcGF5bGluZXNbc3RhcnRdLAogICAgLy8gICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDEpXSwKICAgIC8vICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgyKV0sCiAgICAvLyAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMyldLAogICAgLy8gICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDQpXSwKICAgIC8vICkKICAgIHVuY292ZXIgNAogICAgdW5jb3ZlciA0CiAgICBjb25jYXQKICAgIHVuY292ZXIgMwogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBkdXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM0NS0xMzQ2CiAgICAvLyAjIEdldCB0aGUgZmlyc3Qgc3ltYm9sIHRvIG1hdGNoIGFnYWluc3QKICAgIC8vIGZpcnN0X3BvcyA9IFVJbnQ2NCgwKSAqIFVJbnQ2NCgzKSArIHBheWxpbmVbMF0ubmF0aXZlCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM0NwogICAgLy8gc3ltYm9sX3RvX21hdGNoID0gZ3JpZFtmaXJzdF9wb3MgOiBmaXJzdF9wb3MgKyAxXQogICAgZnJhbWVfZGlnIC0yCiAgICBsZW4KICAgIGR1cAogICAgY292ZXIgMgogICAgZHVwMgogICAgPj0KICAgIGRpZyAyCiAgICBkaWcgMgogICAgdW5jb3ZlciAyCiAgICBzZWxlY3QKICAgIGNvdmVyIDIKICAgIHN3YXAKICAgIGludCAxCiAgICArCiAgICBkdXAKICAgIGRpZyAyCiAgICA+PQogICAgc3dhcAogICAgY292ZXIgMgogICAgc2VsZWN0CiAgICBkdXAKICAgIGRpZyAyCiAgICA8CiAgICBkaWcgMgogICAgc3dhcAogICAgc2VsZWN0CiAgICBmcmFtZV9kaWcgLTIKICAgIGNvdmVyIDIKICAgIHN1YnN0cmluZzMKICAgIGR1cAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzQ5CiAgICAvLyBpZiBzeW1ib2xfdG9fbWF0Y2ggPT0gYiJfIjoKICAgIGJ5dGUgMHg1ZgogICAgPT0KICAgIGJ6IF9tYXRjaF9wYXlsaW5lX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzUxCiAgICAvLyBjb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNTAtMTM1MwogICAgLy8gcmV0dXJuIFBheWxpbmVNYXRjaCgKICAgIC8vICAgICBjb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICBpbml0aWFsX3N5bWJvbD1hcmM0LkJ5dGUuZnJvbV9ieXRlcyhzeW1ib2xfdG9fbWF0Y2gpLAogICAgLy8gKQogICAgZnJhbWVfZGlnIDQKICAgIGNvbmNhdAogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9tYXRjaF9wYXlsaW5lX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM1NQogICAgLy8gbWF0Y2hlcyA9IFVJbnQ2NCgxKSAgIyBXZSBzdGFydCB3aXRoIDEgbWF0Y2ggKHRoZSBmaXJzdCBzeW1ib2wpCiAgICBpbnQgMQogICAgZnJhbWVfYnVyeSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNTctMTM1OAogICAgLy8gIyBDaGVjayBzdWJzZXF1ZW50IHBvc2l0aW9ucwogICAgLy8gZm9yIGkgaW4gdXJhbmdlKDEsIDUpOgogICAgaW50IDEKICAgIGZyYW1lX2J1cnkgMAoKX21hdGNoX3BheWxpbmVfZm9yX2hlYWRlckAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzU3LTEzNTgKICAgIC8vICMgQ2hlY2sgc3Vic2VxdWVudCBwb3NpdGlvbnMKICAgIC8vIGZvciBpIGluIHVyYW5nZSgxLCA1KToKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgNQogICAgPAogICAgYnogX21hdGNoX3BheWxpbmVfYWZ0ZXJfZm9yQDkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM1OQogICAgLy8gZ3JpZF9wb3MgPSBpICogVUludDY0KDMpICsgcGF5bGluZVtpXS5uYXRpdmUKICAgIGZyYW1lX2RpZyAwCiAgICBkdXAKICAgIGludCAzCiAgICAqCiAgICBzd2FwCiAgICBpbnQgOAogICAgKgogICAgZnJhbWVfZGlnIDIKICAgIHN3YXAKICAgIGludCA4CiAgICBleHRyYWN0MyAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM2MAogICAgLy8gY3VycmVudF9zeW1ib2wgPSBncmlkW2dyaWRfcG9zIDogZ3JpZF9wb3MgKyAxXQogICAgZHVwCiAgICBmcmFtZV9kaWcgMwogICAgZHVwCiAgICBjb3ZlciAzCiAgICA+PQogICAgZGlnIDEKICAgIGRpZyAzCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgY292ZXIgMgogICAgaW50IDEKICAgICsKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIGR1cAogICAgZGlnIDIKICAgIDwKICAgIGRpZyAyCiAgICBzd2FwCiAgICBzZWxlY3QKICAgIGZyYW1lX2RpZyAtMgogICAgY292ZXIgMgogICAgc3Vic3RyaW5nMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzYyLTEzNjMKICAgIC8vICMgSWYgc3ltYm9sIG1hdGNoZXMsIGNvbnRpbnVlIGNvdW50aW5nCiAgICAvLyBpZiBjdXJyZW50X3N5bWJvbCA9PSBzeW1ib2xfdG9fbWF0Y2g6CiAgICBmcmFtZV9kaWcgNAogICAgPT0KICAgIGJ6IF9tYXRjaF9wYXlsaW5lX2FmdGVyX2ZvckA5CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNjQKICAgIC8vIG1hdGNoZXMgKz0gVUludDY0KDEpCiAgICBmcmFtZV9kaWcgMQogICAgaW50IDEKICAgICsKICAgIGZyYW1lX2J1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzU3LTEzNTgKICAgIC8vICMgQ2hlY2sgc3Vic2VxdWVudCBwb3NpdGlvbnMKICAgIC8vIGZvciBpIGluIHVyYW5nZSgxLCA1KToKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfYnVyeSAwCiAgICBiIF9tYXRjaF9wYXlsaW5lX2Zvcl9oZWFkZXJAMwoKX21hdGNoX3BheWxpbmVfYWZ0ZXJfZm9yQDk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNjkKICAgIC8vIGNvdW50PWFyYzQuVUludDY0KG1hdGNoZXMpLAogICAgZnJhbWVfZGlnIDEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM2OC0xMzcxCiAgICAvLyByZXR1cm4gUGF5bGluZU1hdGNoKAogICAgLy8gICAgIGNvdW50PWFyYzQuVUludDY0KG1hdGNoZXMpLAogICAgLy8gICAgIGluaXRpYWxfc3ltYm9sPWFyYzQuQnl0ZS5mcm9tX2J5dGVzKHN5bWJvbF90b19tYXRjaCksCiAgICAvLyApCiAgICBmcmFtZV9kaWcgNAogICAgY29uY2F0CiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9iZXRfZ3JpZChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6CmdldF9iZXRfZ3JpZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM3My0xMzc0CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBnZXRfYmV0X2dyaWQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gQnl0ZXMxNToKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzc1CiAgICAvLyBlbnN1cmVfYnVkZ2V0KDEwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIFJFTSBtYXkgdXNlIDEwNzAgb3Bjb2RlIGJ1ZGdldAogICAgaW50IDEwMDAKICAgIGludCAwCiAgICBjYWxsc3ViIGVuc3VyZV9idWRnZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM3NgogICAgLy8gcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfYmV0X2dyaWQoYmV0X2tleS5ieXRlcykpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXRfZ3JpZAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9iZXRfZ3JpZChiZXRfa2V5OiBieXRlcykgLT4gYnl0ZXM6Cl9nZXRfYmV0X2dyaWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzNzgtMTM3OQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9ncmlkKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBCeXRlczoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTgtMTM4MAogICAgLy8gICAgICAgICBzZWxmLmJldCA9IEJveE1hcChCeXRlcywgQmV0LCBrZXlfcHJlZml4PSIiKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuYmV0LmdldCgKICAgIC8vICAgICAgICAgICAgIGJldF9rZXksCiAgICAvLyAgICAgICAgICAgICBkZWZhdWx0PUJldCgKICAgIC8vICAgICAgICAgICAgICAgICB3aG89YXJjNC5BZGRyZXNzKEdsb2JhbC56ZXJvX2FkZHJlc3MpLAogICAgLy8gICAgICAgICAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIGdldF9iZXRfY2xhaW1fcm91bmQoc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmV0X2NsYWltX3JvdW5kKGJldF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9iZXRfY2xhaW1fcm91bmQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX2dldF9iZXQoYmV0X2tleSkuY2xhaW1fcm91bmQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICAjIC0tLSBib290c3RyYXAgLS0tCiAgICAvLyAKICAgIC8vICAgICAjIGluaGVyaXRzIGJvb3N0cmFwcGVkIGZyb20gYmFuayBtYW5hZ2VyCiAgICAvLyAgICAgIyAgZG9lcyBub3QgYXR0ZW1wdCB0byBib29zdHJhcCBmb3IgaXQKICAgIC8vIAogICAgLy8gICAgICMgb3ZlcnJpZGUKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgICAgIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoKQogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBHbG9iYWwubWluX2JhbGFuY2UgKyBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAgICAgc2VsZi5faW5pdGlhbGl6ZV9zcGluX3BhcmFtcygpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCgyNjUwMCkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9pbml0aWFsaXplX3NwaW5fcGFyYW1zKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICAgICAgbm90IHNlbGYuX3NwaW5fcGFyYW1zKCkuc3Bpbl9mdXNlLm5hdGl2ZQogICAgLy8gICAgICAgICApLCAic3BpbiBwYXJhbXMgbXVzdCBub3QgYmUgaW5pdGlhbGl6ZWQiCiAgICAvLyAgICAgICAgIEJveChTcGluUGFyYW1zLCBrZXk9InNwaW5fcGFyYW1zIikudmFsdWUgPSBTcGluUGFyYW1zKAogICAgLy8gICAgICAgICAgICAgbWF4X2V4dHJhX3BheW1lbnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JCiAgICAvLyAgICAgICAgICAgICBtYXhfcGF5b3V0X211bHRpcGxpZXI9YXJjNC5VSW50NjQoMTAwMCksICAjIDEwMDB4CiAgICAvLyAgICAgICAgICAgICByb3VuZF9mdXR1cmVfZGVsdGE9YXJjNC5VSW50NjQoMSksICAjIDEgcm91bmQKICAgIC8vICAgICAgICAgICAgIG1pbl9iZXRfYW1vdW50PWFyYzQuVUludDY0KDEwMDAwMDApLCAgIyAxIFZPSSAoMSBWT0kgYmV0LCAxIHBheWxpbmUpCiAgICAvLyAgICAgICAgICAgICBtYXhfYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgyMDAwMDAwMCksICAjIDIwIFZPSQogICAgLy8gICAgICAgICAgICAgbWluX2JhbmtfYW1vdW50PWFyYzQuVUludDY0KDEwMDAwMDAwMDAwMCksICAjIDEwMGsgVk9JCiAgICAvLyAgICAgICAgICAgICBzcGluX2Z1c2U9YXJjNC5Cb29sKFRydWUpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICAjIC0tLSBpbXBsZW1lbnRhdGlvbiAtLS0KICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9pbnZhbGlkX3NwaW5fcGFyYW1zKHNlbGYpIC0+IFNwaW5QYXJhbXM6CiAgICAvLyAgICAgICAgIHJldHVybiBTcGluUGFyYW1zKAogICAgLy8gICAgICAgICAgICAgbWF4X2V4dHJhX3BheW1lbnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtYXhfcGF5b3V0X211bHRpcGxpZXI9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICByb3VuZF9mdXR1cmVfZGVsdGE9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtaW5fYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1heF9iZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWluX2JhbmtfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgc3Bpbl9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9zcGluX3BhcmFtcyhzZWxmKSAtPiBTcGluUGFyYW1zOgogICAgLy8gICAgICAgICByZXR1cm4gQm94KFNwaW5QYXJhbXMsIGtleT0ic3Bpbl9wYXJhbXMiKS5nZXQoCiAgICAvLyAgICAgICAgICAgICBkZWZhdWx0PXNlbGYuX2ludmFsaWRfc3Bpbl9wYXJhbXMoKQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X21heF9leHRyYV9wYXltZW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X2V4dHJhX3BheW1lbnQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcihzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1heF9wYXlvdXRfbXVsdGlwbGllci5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkucm91bmRfZnV0dXJlX2RlbHRhLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9taW5fYmV0X2Ftb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBtaW4gYmV0IGFtb3VudCBpcyAxIFZPSQogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWluX2JldF9hbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X21heF9iZXRfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIG1heCBiZXQgYW1vdW50IGlzIDkgVk9JLiBNdXN0IGJlIGFkanVzdGVkIGZvciB0aGUgbWF4IHBheW91dCBtdWx0aXBsaWVyIGFuZAogICAgLy8gICAgICAgICBtYXggcGF5b3V0IGluZGV4CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfYmV0X2Ftb3VudC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfbWluX2JhbmtfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWluX2JhbmtfYW1vdW50Lm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgICAgICBzZWxmLCBhZGRyZXNzOiBBY2NvdW50LCBhbW91bnQ6IFVJbnQ2NCwgbWF4X3BheWxpbmVfaW5kZXg6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NAogICAgLy8gICAgICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgICAgICBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIC8vICAgICAgICAgICAgICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgICMgb3ZlcnJpZGUKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfc3Bpbl9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIFVJbnQ2NCg1MDUwMCkKICAgIC8vIAogICAgLy8gICAgIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gICAgIGRlZiBzcGluX3BheWxpbmVfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfc3Bpbl9wYXlsaW5lX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDMwMDAwKQogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9zcGluKAogICAgLy8gICAgICAgICBzZWxmLCBiZXRfYW1vdW50OiBVSW50NjQsIG1heF9wYXlsaW5lX2luZGV4OiBVSW50NjQsIGluZGV4OiBVSW50NjQKICAgIC8vICAgICApIC0+IEJ5dGVzOgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgU3BpbiB0aGUgc2xvdCBtYWNoaW5lLiBPdXRjb21lIGlzIGRldGVybWluZWQgYnkgdGhlIHNlZWQKICAgIC8vICAgICAgICAgb2YgZnV0dXJlIHJvdW5kLgogICAgLy8gCiAgICAvLyAgICAgICAgIEFyZ3M6CiAgICAvLyAgICAgICAgICAgICBiZXQgKHVpbnQpOiBUaGUgcGxheWVyJ3Mgd2FnZXIuCiAgICAvLyAgICAgICAgICAgICBpbmRleCAodWludCk6IFBsYXllcidzIGNob2ljZSBvZiBpbmRleC4KICAgIC8vIAogICAgLy8gICAgICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICAgICAgciAodWludCk6IFRoZSByb3VuZCBudW1iZXIgb2YgdGhlIHNwaW4uCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICAjIHBheW1lbnQgYXNzZXJ0aW9ucwogICAgLy8gICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA9IGJldF9hbW91bnQgKiAobWF4X3BheWxpbmVfaW5kZXggKyBVSW50NjQoMSkpCiAgICAvLyAgICAgICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA+PSBzZWxmLl9nZXRfbWluX2JldF9hbW91bnQoKQogICAgLy8gICAgICAgICApLCAiYmV0IGFtb3VudCB0b28gc21hbGwiCiAgICAvLyAgICAgICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2JldF9hbW91bnQoKQogICAgLy8gICAgICAgICApLCAiYmV0IGFtb3VudCB0b28gbGFyZ2UiCiAgICAvLyAgICAgICAgIGFjdHVhbF9wYXltZW50X2Ftb3VudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgLy8gICAgICAgICBhc3NlcnQgYWN0dWFsX3BheW1lbnRfYW1vdW50ID49IGV4cGVjdGVkX3BheW1lbnRfYW1vdW50LCAicGF5bWVudCBpbnN1ZmZpY2llbnQiCiAgICAvLyAgICAgICAgIGV4dHJhX3BheW1lbnRfYW1vdW50ID0gYWN0dWFsX3BheW1lbnRfYW1vdW50IC0gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQKICAgIC8vICAgICAgICAgIyBleHRyYSBwYXltZW50IGFtb3VudCBtdXN0IGxlc3MgdGhhbiBtYXggYnV0IGdyZWF0ZXIgdGhhbiBtaW4gY29zdHMKICAgIC8vICAgICAgICAgbWluX2Nvc3RzID0gc2VsZi5fc3Bpbl9jb3N0KCkgKyBzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpICogKAogICAgLy8gICAgICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXggKyBVSW50NjQoMSkKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPj0gbWluX2Nvc3RzCiAgICAvLyAgICAgICAgICksICJleHRyYSBwYXltZW50IG11c3QgYmUgZ3JlYXRlciB0aGFuIGJveCBjb3N0IgogICAgLy8gICAgICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkKICAgIC8vICAgICAgICAgKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQiCiAgICAvLyAgICAgICAgICMgYmFuayBhc3NlcnRpb25zCiAgICAvLyAgICAgICAgICMgbG9jayBzcGluIGlmIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIG1pbiBiYW5rIGFtb3VudAogICAgLy8gICAgICAgICAjIGFzc2VydCAoCiAgICAvLyAgICAgICAgICMgICAgIHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkgPj0gc2VsZi5fZ2V0X21pbl9iYW5rX2Ftb3VudCgpCiAgICAvLyAgICAgICAgICMgKSwgImJhbGFuY2UgdG90YWwgbXVzdCBiZSBncmVhdGVyIHRoYW4gbWluIGJhbmsgYW1vdW50IgogICAgLy8gICAgICAgICAjIFVwZGF0ZSBiYWxhbmNlIHRyYWNraW5nCiAgICAvLyAgICAgICAgICMgICBBZGQgYmV0IGFtb3VudCB0byB0b3RhbCBiYWxhbmNlCiAgICAvLyAgICAgICAgICMgYXNzZXJ0IG1heCBwYXlsaW5lIGluZGV4IGlzIGxlc3MgdGhhbiBtYXggaW5kZXgKICAgIC8vICAgICAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQpCiAgICAvLyAgICAgICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShleHBlY3RlZF9wYXltZW50X2Ftb3VudCkKICAgIC8vICAgICAgICAgbWF4X3Bvc3NpYmxlX3BheW91dCA9ICgKICAgIC8vICAgICAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ICogc2VsZi5fZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcigpCiAgICAvLyAgICAgICAgICkKICAgIC8vICAgICAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKG1heF9wb3NzaWJsZV9wYXlvdXQpCiAgICAvLyAgICAgICAgIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShtYXhfcG9zc2libGVfcGF5b3V0KQogICAgLy8gICAgICAgICAjIENyZWF0ZSBiZXQKICAgIC8vICAgICAgICAgY29uZmlybWVkX3JvdW5kID0gR2xvYmFsLnJvdW5kCiAgICAvLyAgICAgICAgIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleShUeG4uc2VuZGVyLCBiZXRfYW1vdW50LCBtYXhfcGF5bGluZV9pbmRleCwgaW5kZXgpCiAgICAvLyAgICAgICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIC8vICAgICAgICAgY2xhaW1fcm91bmQgPSBjb25maXJtZWRfcm91bmQgKyBzZWxmLl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKCkKICAgIC8vICAgICAgICAgc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgICAgICAgICB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICAgICAgYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gICAgICAgICAgICAgcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICBhcmM0LmVtaXQoCiAgICAvLyAgICAgICAgICAgICBCZXRQbGFjZWQoCiAgICAvLyAgICAgICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICAgICAgICAgICkKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICByZXR1cm4gYmV0X2tleQogICAgLy8gCiAgICAvLyAgICAgIyBfY2xhaW0KICAgIC8vIAogICAgLy8gCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgLy8gICAgICIiIgogICAgLy8gICAgIEEgc2ltcGxlIHJlZWwgc2xvdCBtYWNoaW5lIHNtYXJ0IGNvbnRyYWN0CiAgICAvLyAKICAgIC8vICAgICBCb3hlczoKICAgIC8vICAgICAgICAgYmFsYW5jZSoKICAgIC8vICAgICAgICAgKm90aGVycyoKICAgIC8vICAgICAgICAgICAgIHNsb3QgbWFjaGluZQogICAgLy8gICAgICAgICAgICAgICAgIHBheWxpbmVfY291bnQgVUludDY0IChkZWZhdWx0OiA5KQogICAgLy8gICAgICAgICAgICAgICAgIHBheWxpbmVzIFVJbnQ2NFs0NV0gKGRlZmF1bHQ6ICopCiAgICAvLyAKICAgIC8vICAgICAiIiIKICAgIC8vIAogICAgLy8gICAgIEBhcmM0LmFiaW1ldGhvZAogICAgLy8gICAgIGRlZiBib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAgICAgcGF5bWVudCA9IHJlcXVpcmVfcGF5bWVudChUeG4uc2VuZGVyKQogICAgLy8gICAgICAgICBhc3NlcnQgcGF5bWVudCA+PSBzZWxmLl9ib290c3RyYXBfY29zdCgpLCAiaW5zdWZmaWVuY3QgcGF5bWVudCBmb3IgYm9vdHN0cmFwIgogICAgLy8gICAgICAgICBzZWxmLl9ib290c3RyYXAoKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIGJvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fYm9vdHN0cmFwX2Nvc3QoKSkKICAgIC8vIAogICAgLy8gICAgICMgb3ZlcnJpZGUKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfYm9vdHN0cmFwKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgICAgIHNlbGYuX2JhbmtfbWFuYWdlcl9ib290c3RyYXAoKQogICAgLy8gICAgICAgICBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwKCkKICAgIC8vICAgICAgICAgc2VsZi5fb3duYWJsZV9ib290c3RyYXAoKQogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgICAgICBHbG9iYWwubWluX2JhbGFuY2UKICAgIC8vICAgICAgICAgICAgICsgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICAgICAgICAgICAgICsgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICAgICAgICAgICAgICsgc2VsZi5fb3duYWJsZV9ib290c3RyYXBfY29zdCgpCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgICMgLS0tIG93bmFibGUgLS0tCiAgICAvLyAKICAgIC8vICAgICAjIG92ZXJyaWRlCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAgICAgZGVmIHRyYW5zZmVyX293bmVyc2hpcChzZWxmLCBuZXdfb3duZXI6IGFyYzQuQWRkcmVzcykgLT4gTm9uZToKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIFRyYW5zZmVyIHRoZSBvd25lcnNoaXAgb2YgdGhlIGNvbnRyYWN0CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBzZWxmLl9vbmx5X293bmVyKCkKICAgIC8vICAgICAgICAgc2VsZi5fdHJhbnNmZXJfb3duZXJzaGlwKG5ld19vd25lci5uYXRpdmUpCiAgICAvLyAKICAgIC8vICAgICAjIC0tLSBHcmlkIC0tLQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9yZWVsX3RvcHMoCiAgICAvLyAgICAgICAgIHNlbGYsIHNlZWQ6IEJ5dGVzCiAgICAvLyAgICAgKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFs1XV06CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBHZXQgdGhlIHRvcCBvZiBlYWNoIHJlZWwuCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBtYXhfcmVlbF9zdG9wID0gc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkgLSAoCiAgICAvLyAgICAgICAgICAgICBzZWxmLl9nZXRfcmVlbF93aW5kb3dfbGVuZ3RoKCkgKyBVSW50NjQoMSkKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICB0b3BfMSA9ICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjEiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgICAgICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICB0b3BfMiA9ICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjIiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgICAgICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICB0b3BfMyA9ICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjMiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgICAgICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICB0b3BfNCA9ICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjQiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgICAgICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICB0b3BfNSA9ICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0LmZyb21fYnl0ZXMob3Auc2hhMjU2KHNlZWQgKyBCeXRlcyhiIjUiKSlbLTg6XSkubmF0aXZlCiAgICAvLyAgICAgICAgICAgICAlIG1heF9yZWVsX3N0b3AKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5TdGF0aWNBcnJheSgKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHRvcF8xKSwKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHRvcF8yKSwKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHRvcF8zKSwKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHRvcF80KSwKICAgIC8vICAgICAgICAgICAgIGFyYzQuVUludDY0KHRvcF81KSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIGdldF9ncmlkKHNlbGYsIHNlZWQ6IEJ5dGVzMzIpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBHZXQgdGhlIGdyaWQgb2YgdGhlIHNsb3QgbWFjaGluZS4KICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIGVuc3VyZV9idWRnZXQoMTAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkgICMgUkVNIG1heSB1c2UgMTA3MCBvcGNvZGUgYnVkZ2V0CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2dyaWQoc2VlZC5ieXRlcykpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgR2V0IHRoZSBncmlkIG9mIHRoZSBzbG90IG1hY2hpbmUuCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICByZWVsX3RvcHMgPSBzZWxmLl9nZXRfcmVlbF90b3BzKHNlZWQpCiAgICAvLyAgICAgICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgICAgICBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDApLCByZWVsX3RvcHNbMF0ubmF0aXZlKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDEpLCByZWVsX3RvcHNbMV0ubmF0aXZlKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDIpLCByZWVsX3RvcHNbMl0ubmF0aXZlKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDMpLCByZWVsX3RvcHNbM10ubmF0aXZlKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9nZXRfcmVlbF93aW5kb3coVUludDY0KDQpLCByZWVsX3RvcHNbNF0ubmF0aXZlKQogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICAjIC0tLSBQYXlsaW5lcyAtLS0KICAgIC8vIAogICAgLy8gICAgICMgY2xhc3NpYyBwYXlsaW5lcyBmb3IgNSB4IDMgZ3JpZAogICAgLy8gICAgICMgWwogICAgLy8gICAgICMgICBbMCwgMCwgMCwgMCwgMF0sICAjIHRvcCBsaW5lCiAgICAvLyAgICAgIyAgIFsxLCAxLCAxLCAxLCAxXSwgICMgbWlkZGxlIGxpbmUKICAgIC8vICAgICAjICAgWzIsIDIsIDIsIDIsIDJdLCAgIyBib3R0b20gbGluZQogICAgLy8gICAgICMgICBbMCwgMSwgMiwgMSwgMF0sICAjIFYgc2hhcGUKICAgIC8vICAgICAjICAgWzIsIDEsIDAsIDEsIDJdLCAgIyBpbnZlcnRlZCBWCiAgICAvLyAgICAgIyAgIFswLCAwLCAxLCAwLCAwXSwgICMgdG9wLWNlbnRlciBwZWFrCiAgICAvLyAgICAgIyAgIFsyLCAyLCAxLCAyLCAyXSwgICMgYm90dG9tLWNlbnRlciB2YWxsZXkKICAgIC8vICAgICAjICAgWzEsIDAsIDEsIDIsIDFdLCAgIyBNIHNoYXBlCiAgICAvLyAgICAgIyAgIFsxLCAyLCAxLCAwLCAxXSAgICMgVyBzaGFwZQogICAgLy8gICAgICMgQWRkaXRpb25hbCBwYXlsaW5lcwogICAgLy8gICAgICMgICBbMCwxLDEsMSwyXQogICAgLy8gICAgICMgICBbMiwxLDEsMSwwXQogICAgLy8gICAgICMgICBbMCwxLDIsMiwyXQogICAgLy8gICAgICMgICBbMiwxLDAsMCwwXQogICAgLy8gICAgICMgICBbMSwxLDAsMSwxXQogICAgLy8gICAgICMgICBbMSwxLDIsMSwxXQogICAgLy8gICAgICMgICBbMCwyLDAsMiwwXQogICAgLy8gICAgICMgICBbMiwwLDIsMCwyXQogICAgLy8gICAgICMgICBbMSwyLDIsMiwxXQogICAgLy8gICAgICMgICBbMSwwLDAsMCwxXQogICAgLy8gICAgICMgICBbMCwxLDAsMSwyXQogICAgLy8gICAgICMgXQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIGdldF9wYXlsaW5lX2NvdW50KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3BheWxpbmVfY291bnQoKSkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfcGF5bGluZV9jb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBCb3goVUludDY0LCBrZXk9InBheWxpbmVfY291bnQiKS5nZXQoZGVmYXVsdD1VSW50NjQoMjApKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIGdldF9wYXlsaW5lKAogICAgLy8gICAgICAgICBzZWxmLCBwYXlsaW5lX2luZGV4OiBhcmM0LlVJbnQ2NAogICAgLy8gICAgICkgLT4gYXJjNC5TdGF0aWNBcnJheVthcmM0LlVJbnQ2NCwgdHlwaW5nLkxpdGVyYWxbNV1dOgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X3BheWxpbmUocGF5bGluZV9pbmRleC5uYXRpdmUpCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgZ2V0X3BheWxpbmVzKHNlbGYpIC0+IGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzEwMF1dOgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X3BheWxpbmVzKCkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfcGF5bGluZSgKICAgIC8vICAgICAgICAgc2VsZiwgaW5kZXg6IFVJbnQ2NAogICAgLy8gICAgICkgLT4gYXJjNC5TdGF0aWNBcnJheVthcmM0LlVJbnQ2NCwgdHlwaW5nLkxpdGVyYWxbNV1dOgogICAgLy8gICAgICAgICBwYXlsaW5lcyA9IHNlbGYuX2dldF9wYXlsaW5lcygpCiAgICAvLyAgICAgICAgIHN0YXJ0ID0gaW5kZXggKiBVSW50NjQoNSkKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lc1tzdGFydF0sCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgxKV0sCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgyKV0sCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCgzKV0sCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lc1tzdGFydCArIFVJbnQ2NCg0KV0sCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfcGF5bGluZXMoCiAgICAvLyAgICAgICAgIHNlbGYsCiAgICAvLyAgICAgKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFsxMDBdXToKICAgIC8vICAgICAgICAgcmV0dXJuIEJveCgKICAgIC8vICAgICAgICAgICAgIGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzEwMF1dLAogICAgLy8gICAgICAgICAgICAga2V5PSJwYXlsaW5lcyIsCiAgICAvLyAgICAgICAgICkuZ2V0KAogICAgLy8gICAgICAgICAgICAgZGVmYXVsdD1hcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICAgICAgICAgICAgICMgdG9wIGxpbmUKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIG1pZGRsZSBsaW5lCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBib3R0b20gbGluZQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgICMgViBzaGFwZQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgICMgaW52ZXJ0ZWQgVgogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgICMgdG9wLWNlbnRlciBwZWFrCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBib3R0b20tY2VudGVyIHZhbGxleQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgICMgTSBzaGFwZQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgICMgVyBzaGFwZQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgICMgQWRkaXRpb25hbCBwYXlsaW5lcwogICAgLy8gICAgICAgICAgICAgICAgICMgWzAsMSwxLDEsMl0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFsyLDEsMSwxLDBdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMCwxLDIsMiwyXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzIsMSwwLDAsMF0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFsxLDEsMCwxLDFdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMSwxLDIsMSwxXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzAsMiwwLDIsMF0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFsyLDAsMiwwLDJdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMSwyLDIsMiwxXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzEsMCwwLDAsMV0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFswLDEsMCwxLDJdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICApCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gICAgIGRlZiBtYXRjaF9wYXlsaW5lKHNlbGYsIGdyaWQ6IEJ5dGVzMTUsIHBheWxpbmVfaW5kZXg6IGFyYzQuVUludDY0KSAtPiBQYXlsaW5lTWF0Y2g6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBNYXRjaCBncmlkIHRvIHBheWxpbmUgYnkgaW5kZXgKICAgIC8vIAogICAgLy8gICAgICAgICBSZXR1cm5zIHBheWxpbmUgbWF0Y2gKICAgIC8vICAgICAgICAgICAgICAgICBjb3VudCwgbnVtYmVyIG9mIGNvbnNlY3V0aXZlIG1hdGNoZXMgb24gcGF5bGluZQogICAgLy8gICAgICAgICAgICAgICAgIGluaXRpYWxfc3ltYm9sLCBzdGFyaW5nIHN5bWJvbAogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX21hdGNoX3BheWxpbmUoZ3JpZC5ieXRlcywgcGF5bGluZV9pbmRleC5uYXRpdmUpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfbWF0Y2hfcGF5bGluZShzZWxmLCBncmlkOiBCeXRlcywgcGF5bGluZV9pbmRleDogVUludDY0KSAtPiBQYXlsaW5lTWF0Y2g6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBNYXRjaCBhIHBheWxpbmUgb24gdGhlIGdyaWQuCiAgICAvLyAgICAgICAgIFJldHVybnMgY29uc2VjdXRpdmUgcGF5bGluZSBtYXRjaGVzLgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgcGF5bGluZXMgPSBzZWxmLl9nZXRfcGF5bGluZXMoKQogICAgLy8gICAgICAgICAjIFJlcGxhY2Ugc2xpY2luZyB3aXRoIGluZGl2aWR1YWwgaW5kZXggYWNjZXNzCiAgICAvLyAgICAgICAgIHN0YXJ0ID0gcGF5bGluZV9pbmRleCAqIFVJbnQ2NCg1KQogICAgLy8gICAgICAgICBwYXlsaW5lID0gYXJjNC5TdGF0aWNBcnJheSgKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0XSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDEpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDIpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDMpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDQpXSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgICAgICMgR2V0IHRoZSBmaXJzdCBzeW1ib2wgdG8gbWF0Y2ggYWdhaW5zdAogICAgLy8gICAgICAgICBmaXJzdF9wb3MgPSBVSW50NjQoMCkgKiBVSW50NjQoMykgKyBwYXlsaW5lWzBdLm5hdGl2ZQogICAgLy8gICAgICAgICBzeW1ib2xfdG9fbWF0Y2ggPSBncmlkW2ZpcnN0X3BvcyA6IGZpcnN0X3BvcyArIDFdCiAgICAvLyAKICAgIC8vICAgICAgICAgaWYgc3ltYm9sX3RvX21hdGNoID09IGIiXyI6CiAgICAvLyAgICAgICAgICAgICByZXR1cm4gUGF5bGluZU1hdGNoKAogICAgLy8gICAgICAgICAgICAgICAgIGNvdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGluaXRpYWxfc3ltYm9sPWFyYzQuQnl0ZS5mcm9tX2J5dGVzKHN5bWJvbF90b19tYXRjaCksCiAgICAvLyAgICAgICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICAgICAgbWF0Y2hlcyA9IFVJbnQ2NCgxKSAgIyBXZSBzdGFydCB3aXRoIDEgbWF0Y2ggKHRoZSBmaXJzdCBzeW1ib2wpCiAgICAvLyAKICAgIC8vICAgICAgICAgIyBDaGVjayBzdWJzZXF1ZW50IHBvc2l0aW9ucwogICAgLy8gICAgICAgICBmb3IgaSBpbiB1cmFuZ2UoMSwgNSk6CiAgICAvLyAgICAgICAgICAgICBncmlkX3BvcyA9IGkgKiBVSW50NjQoMykgKyBwYXlsaW5lW2ldLm5hdGl2ZQogICAgLy8gICAgICAgICAgICAgY3VycmVudF9zeW1ib2wgPSBncmlkW2dyaWRfcG9zIDogZ3JpZF9wb3MgKyAxXQogICAgLy8gCiAgICAvLyAgICAgICAgICAgICAjIElmIHN5bWJvbCBtYXRjaGVzLCBjb250aW51ZSBjb3VudGluZwogICAgLy8gICAgICAgICAgICAgaWYgY3VycmVudF9zeW1ib2wgPT0gc3ltYm9sX3RvX21hdGNoOgogICAgLy8gICAgICAgICAgICAgICAgIG1hdGNoZXMgKz0gVUludDY0KDEpCiAgICAvLyAgICAgICAgICAgICBlbHNlOgogICAgLy8gICAgICAgICAgICAgICAgIGJyZWFrCiAgICAvLyAKICAgIC8vICAgICAgICAgcmV0dXJuIFBheWxpbmVNYXRjaCgKICAgIC8vICAgICAgICAgICAgIGNvdW50PWFyYzQuVUludDY0KG1hdGNoZXMpLAogICAgLy8gICAgICAgICAgICAgaW5pdGlhbF9zeW1ib2w9YXJjNC5CeXRlLmZyb21fYnl0ZXMoc3ltYm9sX3RvX21hdGNoKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAgICAgZGVmIGdldF9iZXRfZ3JpZChzZWxmLCBiZXRfa2V5OiBCeXRlczU2KSAtPiBCeXRlczE1OgogICAgLy8gICAgICAgICBlbnN1cmVfYnVkZ2V0KDEwMDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIFJFTSBtYXkgdXNlIDEwNzAgb3Bjb2RlIGJ1ZGdldAogICAgLy8gICAgICAgICByZXR1cm4gQnl0ZXMxNS5mcm9tX2J5dGVzKHNlbGYuX2dldF9iZXRfZ3JpZChiZXRfa2V5LmJ5dGVzKSkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfYmV0X2dyaWQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJ5dGVzOgogICAgLy8gICAgICAgICBhc3NlcnQgYmV0X2tleSBpbiBzZWxmLmJldCwgImJldCBub3QgZm91bmQiCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9sZW4KICAgIGJ1cnkgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzgwCiAgICAvLyBhc3NlcnQgYmV0X2tleSBpbiBzZWxmLmJldCwgImJldCBub3QgZm91bmQiCiAgICBhc3NlcnQgLy8gYmV0IG5vdCBmb3VuZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzgxCiAgICAvLyBiZXQgPSBzZWxmLmJldFtiZXRfa2V5XS5jb3B5KCkKICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2dldAogICAgYXNzZXJ0IC8vIGNoZWNrIHNlbGYuYmV0IGVudHJ5IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzgyCiAgICAvLyBjb21iaW5lZCA9IHNlbGYuX2dldF9ibG9ja19zZWVkKGJldC5jbGFpbV9yb3VuZC5uYXRpdmUpICsgYmV0X2tleQogICAgZXh0cmFjdCA0OCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgY2FsbHN1YiBfZ2V0X2Jsb2NrX3NlZWQKICAgIGZyYW1lX2RpZyAtMQogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzODMKICAgIC8vIGhhc2hlZCA9IG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIHNoYTI1NgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzg0CiAgICAvLyBncmlkID0gc2VsZi5fZ2V0X2dyaWQoaGFzaGVkKQogICAgY2FsbHN1YiBfZ2V0X2dyaWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM4NQogICAgLy8gcmV0dXJuIGdyaWQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9nZXRfYmxvY2tfc2VlZChyb3VuZDogdWludDY0KSAtPiBieXRlczoKX2dldF9ibG9ja19zZWVkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTA0LTE1MDUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9ibG9ja19zZWVkKHNlbGYsIHJvdW5kOiBVSW50NjQpIC0+IEJ5dGVzOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MDYKICAgIC8vIHJldHVybiBvcC5CbG9jay5ibGtfc2VlZChyb3VuZClbLTMyOl0KICAgIGZyYW1lX2RpZyAtMQogICAgYmxvY2sgQmxrU2VlZAogICAgZHVwCiAgICBsZW4KICAgIGludCAzMgogICAgZGlnIDEKICAgID49CiAgICBpbnQgMzIKICAgIGRpZyAyCiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgZGlnIDEKICAgIHN3YXAKICAgIC0KICAgIHN3YXAKICAgIHN1YnN0cmluZzMKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmNsYWltKGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjEzODctMTM4OQogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAxIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTM5OQogICAgLy8gZW5zdXJlX2J1ZGdldCgxNDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KSAgIyBSRU0gbWF5IHVzZSAxMzk5IG9wY29kZSBidWRnZXQKICAgIGludCAxNDAwCiAgICBpbnQgMAogICAgY2FsbHN1YiBlbnN1cmVfYnVkZ2V0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0MDAKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9jbGFpbShiZXRfa2V5LmJ5dGVzKSkKICAgIGZyYW1lX2RpZyAtMQogICAgY2FsbHN1YiBfY2xhaW0KICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLl9jbGFpbShiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfY2xhaW06CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0MDItMTQwNAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgYnl0ZSAiIgogICAgZHVwbiAyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojc5OC0xNDEzCiAgICAvLyAgICAgICAgIHNlbGYuYmV0ID0gQm94TWFwKEJ5dGVzLCBCZXQsIGtleV9wcmVmaXg9IiIpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X2JldChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gQmV0OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgICAgICAgICAgYmV0X2tleSwKICAgIC8vICAgICAgICAgICAgIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgICAgICAgICAgYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIHBheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICApLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlczU2KSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iZXRfY2xhaW1fcm91bmQoYmV0X2tleS5ieXRlcykpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fZ2V0X2JldChiZXRfa2V5KS5jbGFpbV9yb3VuZC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgICMgLS0tIGJvb3RzdHJhcCAtLS0KICAgIC8vIAogICAgLy8gICAgICMgaW5oZXJpdHMgYm9vc3RyYXBwZWQgZnJvbSBiYW5rIG1hbmFnZXIKICAgIC8vICAgICAjICBkb2VzIG5vdCBhdHRlbXB0IHRvIGJvb3N0cmFwIGZvciBpdAogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAgICAgc2VsZi5fc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICAgICAjIG92ZXJyaWRlCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICAgICBzZWxmLl9pbml0aWFsaXplX3NwaW5fcGFyYW1zKCkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDI2NTAwKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2luaXRpYWxpemVfc3Bpbl9wYXJhbXMoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgICAgICBub3Qgc2VsZi5fc3Bpbl9wYXJhbXMoKS5zcGluX2Z1c2UubmF0aXZlCiAgICAvLyAgICAgICAgICksICJzcGluIHBhcmFtcyBtdXN0IG5vdCBiZSBpbml0aWFsaXplZCIKICAgIC8vICAgICAgICAgQm94KFNwaW5QYXJhbXMsIGtleT0ic3Bpbl9wYXJhbXMiKS52YWx1ZSA9IFNwaW5QYXJhbXMoCiAgICAvLyAgICAgICAgICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgxMDAwMDAwKSwgICMgMSBWT0kKICAgIC8vICAgICAgICAgICAgIG1heF9wYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgxMDAwKSwgICMgMTAwMHgKICAgIC8vICAgICAgICAgICAgIHJvdW5kX2Z1dHVyZV9kZWx0YT1hcmM0LlVJbnQ2NCgxKSwgICMgMSByb3VuZAogICAgLy8gICAgICAgICAgICAgbWluX2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JICgxIFZPSSBiZXQsIDEgcGF5bGluZSkKICAgIC8vICAgICAgICAgICAgIG1heF9iZXRfYW1vdW50PWFyYzQuVUludDY0KDIwMDAwMDAwKSwgICMgMjAgVk9JCiAgICAvLyAgICAgICAgICAgICBtaW5fYmFua19hbW91bnQ9YXJjNC5VSW50NjQoMTAwMDAwMDAwMDAwKSwgICMgMTAwayBWT0kKICAgIC8vICAgICAgICAgICAgIHNwaW5fZnVzZT1hcmM0LkJvb2woVHJ1ZSksCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgICMgLS0tIGltcGxlbWVudGF0aW9uIC0tLQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2ludmFsaWRfc3Bpbl9wYXJhbXMoc2VsZikgLT4gU3BpblBhcmFtczoKICAgIC8vICAgICAgICAgcmV0dXJuIFNwaW5QYXJhbXMoCiAgICAvLyAgICAgICAgICAgICBtYXhfZXh0cmFfcGF5bWVudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1heF9wYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIHJvdW5kX2Z1dHVyZV9kZWx0YT1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1pbl9iZXRfYW1vdW50PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgbWF4X2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBtaW5fYmFua19hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBzcGluX2Z1c2U9YXJjNC5Cb29sKEZhbHNlKSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX3NwaW5fcGFyYW1zKHNlbGYpIC0+IFNwaW5QYXJhbXM6CiAgICAvLyAgICAgICAgIHJldHVybiBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLmdldCgKICAgIC8vICAgICAgICAgICAgIGRlZmF1bHQ9c2VsZi5faW52YWxpZF9zcGluX3BhcmFtcygpCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfZXh0cmFfcGF5bWVudC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfbWF4X3BheW91dF9tdWx0aXBsaWVyKHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X3BheW91dF9tdWx0aXBsaWVyLm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5yb3VuZF9mdXR1cmVfZGVsdGEubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X21pbl9iZXRfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIG1pbiBiZXQgYW1vdW50IGlzIDEgVk9JCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5taW5fYmV0X2Ftb3VudC5uYXRpdmUKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfbWF4X2JldF9hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgbWF4IGJldCBhbW91bnQgaXMgOSBWT0kuIE11c3QgYmUgYWRqdXN0ZWQgZm9yIHRoZSBtYXggcGF5b3V0IG11bHRpcGxpZXIgYW5kCiAgICAvLyAgICAgICAgIG1heCBwYXlvdXQgaW5kZXgKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1heF9iZXRfYW1vdW50Lm5hdGl2ZQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9taW5fYmFua19hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5taW5fYmFua19hbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X2JldF9rZXkoCiAgICAvLyAgICAgICAgIHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyAgICAgKSAtPiBCeXRlczoKICAgIC8vICAgICAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgICAgICAgICArIGFyYzQuVUludDY0KG1heF9wYXlsaW5lX2luZGV4KS5ieXRlcwogICAgLy8gICAgICAgICAgICAgKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9zcGluX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gVUludDY0KDUwNTAwKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAgICAgZGVmIHNwaW5fcGF5bGluZV9jb3N0KHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3Bpbl9wYXlsaW5lX2Nvc3QoKSkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9zcGluX3BheWxpbmVfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBVSW50NjQoMzAwMDApCiAgICAvLyAKICAgIC8vICAgICAjIG92ZXJyaWRlCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX3NwaW4oCiAgICAvLyAgICAgICAgIHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCwgbWF4X3BheWxpbmVfaW5kZXg6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NAogICAgLy8gICAgICkgLT4gQnl0ZXM6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBTcGluIHRoZSBzbG90IG1hY2hpbmUuIE91dGNvbWUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgc2VlZAogICAgLy8gICAgICAgICBvZiBmdXR1cmUgcm91bmQuCiAgICAvLyAKICAgIC8vICAgICAgICAgQXJnczoKICAgIC8vICAgICAgICAgICAgIGJldCAodWludCk6IFRoZSBwbGF5ZXIncyB3YWdlci4KICAgIC8vICAgICAgICAgICAgIGluZGV4ICh1aW50KTogUGxheWVyJ3MgY2hvaWNlIG9mIGluZGV4LgogICAgLy8gCiAgICAvLyAgICAgICAgIFJldHVybnM6CiAgICAvLyAgICAgICAgICAgICByICh1aW50KTogVGhlIHJvdW5kIG51bWJlciBvZiB0aGUgc3Bpbi4KICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgICMgcGF5bWVudCBhc3NlcnRpb25zCiAgICAvLyAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID0gYmV0X2Ftb3VudCAqIChtYXhfcGF5bGluZV9pbmRleCArIFVJbnQ2NCgxKSkKICAgIC8vICAgICAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID49IHNlbGYuX2dldF9taW5fYmV0X2Ftb3VudCgpCiAgICAvLyAgICAgICAgICksICJiZXQgYW1vdW50IHRvbyBzbWFsbCIKICAgIC8vICAgICAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfYmV0X2Ftb3VudCgpCiAgICAvLyAgICAgICAgICksICJiZXQgYW1vdW50IHRvbyBsYXJnZSIKICAgIC8vICAgICAgICAgYWN0dWFsX3BheW1lbnRfYW1vdW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgICAgIGFzc2VydCBhY3R1YWxfcGF5bWVudF9hbW91bnQgPj0gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQsICJwYXltZW50IGluc3VmZmljaWVudCIKICAgIC8vICAgICAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPSBhY3R1YWxfcGF5bWVudF9hbW91bnQgLSBleHBlY3RlZF9wYXltZW50X2Ftb3VudAogICAgLy8gICAgICAgICAjIGV4dHJhIHBheW1lbnQgYW1vdW50IG11c3QgbGVzcyB0aGFuIG1heCBidXQgZ3JlYXRlciB0aGFuIG1pbiBjb3N0cwogICAgLy8gICAgICAgICBtaW5fY29zdHMgPSBzZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkgKiAoCiAgICAvLyAgICAgICAgICAgICBtYXhfcGF5bGluZV9pbmRleCArIFVJbnQ2NCgxKQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA+PSBtaW5fY29zdHMKICAgIC8vICAgICAgICAgKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gYm94IGNvc3QiCiAgICAvLyAgICAgICAgIGFzc2VydCAoCiAgICAvLyAgICAgICAgICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKQogICAgLy8gICAgICAgICApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGxlc3MgdGhhbiBtYXggZXh0cmEgcGF5bWVudCIKICAgIC8vICAgICAgICAgIyBiYW5rIGFzc2VydGlvbnMKICAgIC8vICAgICAgICAgIyBsb2NrIHNwaW4gaWYgYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gbWluIGJhbmsgYW1vdW50CiAgICAvLyAgICAgICAgICMgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgIyAgICAgc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLl9nZXRfbWluX2JhbmtfYW1vdW50KCkKICAgIC8vICAgICAgICAgIyApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICAvLyAgICAgICAgICMgVXBkYXRlIGJhbGFuY2UgdHJhY2tpbmcKICAgIC8vICAgICAgICAgIyAgIEFkZCBiZXQgYW1vdW50IHRvIHRvdGFsIGJhbGFuY2UKICAgIC8vICAgICAgICAgIyBhc3NlcnQgbWF4IHBheWxpbmUgaW5kZXggaXMgbGVzcyB0aGFuIG1heCBpbmRleAogICAgLy8gICAgICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbChleHBlY3RlZF9wYXltZW50X2Ftb3VudCkKICAgIC8vICAgICAgICAgc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKGV4cGVjdGVkX3BheW1lbnRfYW1vdW50KQogICAgLy8gICAgICAgICBtYXhfcG9zc2libGVfcGF5b3V0ID0gKAogICAgLy8gICAgICAgICAgICAgZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgKiBzZWxmLl9nZXRfbWF4X3BheW91dF9tdWx0aXBsaWVyKCkKICAgIC8vICAgICAgICAgKQogICAgLy8gICAgICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQobWF4X3Bvc3NpYmxlX3BheW91dCkKICAgIC8vICAgICAgICAgc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG1heF9wb3NzaWJsZV9wYXlvdXQpCiAgICAvLyAgICAgICAgICMgQ3JlYXRlIGJldAogICAgLy8gICAgICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICAgICAgYmV0X2tleSA9IHNlbGYuX2dldF9iZXRfa2V5KFR4bi5zZW5kZXIsIGJldF9hbW91bnQsIG1heF9wYXlsaW5lX2luZGV4LCBpbmRleCkKICAgIC8vICAgICAgICAgYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZCA9IGNvbmZpcm1lZF9yb3VuZCArIHNlbGYuX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoKQogICAgLy8gICAgICAgICBzZWxmLmJldFtiZXRfa2V5XSA9IEJldCgKICAgIC8vICAgICAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgICAgICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCksCiAgICAvLyAgICAgICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIGFyYzQuZW1pdCgKICAgIC8vICAgICAgICAgICAgIEJldFBsYWNlZCgKICAgIC8vICAgICAgICAgICAgICAgICB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICAgICAgICAgICAgICBtYXhfcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCksCiAgICAvLyAgICAgICAgICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoY2xhaW1fcm91bmQpLAogICAgLy8gICAgICAgICAgICAgKQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHJldHVybiBiZXRfa2V5CiAgICAvLyAKICAgIC8vICAgICAjIF9jbGFpbQogICAgLy8gCiAgICAvLyAKICAgIC8vIGNsYXNzIFNsb3RNYWNoaW5lKFNwaW5NYW5hZ2VyLCBSZWVsTWFuYWdlciwgT3duYWJsZSk6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgQSBzaW1wbGUgcmVlbCBzbG90IG1hY2hpbmUgc21hcnQgY29udHJhY3QKICAgIC8vIAogICAgLy8gICAgIEJveGVzOgogICAgLy8gICAgICAgICBiYWxhbmNlKgogICAgLy8gICAgICAgICAqb3RoZXJzKgogICAgLy8gICAgICAgICAgICAgc2xvdCBtYWNoaW5lCiAgICAvLyAgICAgICAgICAgICAgICAgcGF5bGluZV9jb3VudCBVSW50NjQgKGRlZmF1bHQ6IDkpCiAgICAvLyAgICAgICAgICAgICAgICAgcGF5bGluZXMgVUludDY0WzQ1XSAoZGVmYXVsdDogKikKICAgIC8vIAogICAgLy8gICAgICIiIgogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kCiAgICAvLyAgICAgZGVmIGJvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgICAgICBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICAvLyAgICAgICAgIGFzc2VydCBwYXltZW50ID49IHNlbGYuX2Jvb3RzdHJhcF9jb3N0KCksICJpbnN1ZmZpZW5jdCBwYXltZW50IGZvciBib290c3RyYXAiCiAgICAvLyAgICAgICAgIHNlbGYuX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgYm9vdHN0cmFwX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9ib290c3RyYXBfY29zdCgpKQogICAgLy8gCiAgICAvLyAgICAgIyBvdmVycmlkZQogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICAgICAgc2VsZi5fYmFua19tYW5hZ2VyX2Jvb3RzdHJhcCgpCiAgICAvLyAgICAgICAgIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoKQogICAgLy8gICAgICAgICBzZWxmLl9vd25hYmxlX2Jvb3RzdHJhcCgpCiAgICAvLyAKICAgIC8vICAgICAjIG92ZXJyaWRlCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgICAgIEdsb2JhbC5taW5fYmFsYW5jZQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9iYW5rX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9zcGluX21hbmFnZXJfYm9vdHN0cmFwX2Nvc3QoKQogICAgLy8gICAgICAgICAgICAgKyBzZWxmLl9vd25hYmxlX2Jvb3RzdHJhcF9jb3N0KCkKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgIyAtLS0gb3duYWJsZSAtLS0KICAgIC8vIAogICAgLy8gICAgICMgb3ZlcnJpZGUKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QKICAgIC8vICAgICBkZWYgdHJhbnNmZXJfb3duZXJzaGlwKHNlbGYsIG5ld19vd25lcjogYXJjNC5BZGRyZXNzKSAtPiBOb25lOgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgVHJhbnNmZXIgdGhlIG93bmVyc2hpcCBvZiB0aGUgY29udHJhY3QKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIHNlbGYuX29ubHlfb3duZXIoKQogICAgLy8gICAgICAgICBzZWxmLl90cmFuc2Zlcl9vd25lcnNoaXAobmV3X293bmVyLm5hdGl2ZSkKICAgIC8vIAogICAgLy8gICAgICMgLS0tIEdyaWQgLS0tCiAgICAvLyAKICAgIC8vICAgICBAc3Vicm91dGluZQogICAgLy8gICAgIGRlZiBfZ2V0X3JlZWxfdG9wcygKICAgIC8vICAgICAgICAgc2VsZiwgc2VlZDogQnl0ZXMKICAgIC8vICAgICApIC0+IGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzVdXToKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIEdldCB0aGUgdG9wIG9mIGVhY2ggcmVlbC4KICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIG1heF9yZWVsX3N0b3AgPSBzZWxmLl9nZXRfcmVlbF9sZW5ndGgoKSAtICgKICAgIC8vICAgICAgICAgICAgIHNlbGYuX2dldF9yZWVsX3dpbmRvd19sZW5ndGgoKSArIFVJbnQ2NCgxKQogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHRvcF8xID0gKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMSIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAgICAgICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHRvcF8yID0gKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMiIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAgICAgICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHRvcF8zID0gKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiMyIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAgICAgICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHRvcF80ID0gKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNCIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAgICAgICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHRvcF81ID0gKAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQuZnJvbV9ieXRlcyhvcC5zaGEyNTYoc2VlZCArIEJ5dGVzKGIiNSIpKVstODpdKS5uYXRpdmUKICAgIC8vICAgICAgICAgICAgICUgbWF4X3JlZWxfc3RvcAogICAgLy8gICAgICAgICApCiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQodG9wXzEpLAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQodG9wXzIpLAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQodG9wXzMpLAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQodG9wXzQpLAogICAgLy8gICAgICAgICAgICAgYXJjNC5VSW50NjQodG9wXzUpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgZ2V0X2dyaWQoc2VsZiwgc2VlZDogQnl0ZXMzMikgLT4gQnl0ZXMxNToKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIEdldCB0aGUgZ3JpZCBvZiB0aGUgc2xvdCBtYWNoaW5lLgogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgZW5zdXJlX2J1ZGdldCgxMDAwLCBPcFVwRmVlU291cmNlLkdyb3VwQ3JlZGl0KSAgIyBSRU0gbWF5IHVzZSAxMDcwIG9wY29kZSBidWRnZXQKICAgIC8vICAgICAgICAgcmV0dXJuIEJ5dGVzMTUuZnJvbV9ieXRlcyhzZWxmLl9nZXRfZ3JpZChzZWVkLmJ5dGVzKSkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9nZXRfZ3JpZChzZWxmLCBzZWVkOiBCeXRlcykgLT4gQnl0ZXM6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBHZXQgdGhlIGdyaWQgb2YgdGhlIHNsb3QgbWFjaGluZS4KICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIHJlZWxfdG9wcyA9IHNlbGYuX2dldF9yZWVsX3RvcHMoc2VlZCkKICAgIC8vICAgICAgICAgcmV0dXJuICgKICAgIC8vICAgICAgICAgICAgIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMCksIHJlZWxfdG9wc1swXS5uYXRpdmUpCiAgICAvLyAgICAgICAgICAgICArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMSksIHJlZWxfdG9wc1sxXS5uYXRpdmUpCiAgICAvLyAgICAgICAgICAgICArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMiksIHJlZWxfdG9wc1syXS5uYXRpdmUpCiAgICAvLyAgICAgICAgICAgICArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoMyksIHJlZWxfdG9wc1szXS5uYXRpdmUpCiAgICAvLyAgICAgICAgICAgICArIHNlbGYuX2dldF9yZWVsX3dpbmRvdyhVSW50NjQoNCksIHJlZWxfdG9wc1s0XS5uYXRpdmUpCiAgICAvLyAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgICMgLS0tIFBheWxpbmVzIC0tLQogICAgLy8gCiAgICAvLyAgICAgIyBjbGFzc2ljIHBheWxpbmVzIGZvciA1IHggMyBncmlkCiAgICAvLyAgICAgIyBbCiAgICAvLyAgICAgIyAgIFswLCAwLCAwLCAwLCAwXSwgICMgdG9wIGxpbmUKICAgIC8vICAgICAjICAgWzEsIDEsIDEsIDEsIDFdLCAgIyBtaWRkbGUgbGluZQogICAgLy8gICAgICMgICBbMiwgMiwgMiwgMiwgMl0sICAjIGJvdHRvbSBsaW5lCiAgICAvLyAgICAgIyAgIFswLCAxLCAyLCAxLCAwXSwgICMgViBzaGFwZQogICAgLy8gICAgICMgICBbMiwgMSwgMCwgMSwgMl0sICAjIGludmVydGVkIFYKICAgIC8vICAgICAjICAgWzAsIDAsIDEsIDAsIDBdLCAgIyB0b3AtY2VudGVyIHBlYWsKICAgIC8vICAgICAjICAgWzIsIDIsIDEsIDIsIDJdLCAgIyBib3R0b20tY2VudGVyIHZhbGxleQogICAgLy8gICAgICMgICBbMSwgMCwgMSwgMiwgMV0sICAjIE0gc2hhcGUKICAgIC8vICAgICAjICAgWzEsIDIsIDEsIDAsIDFdICAgIyBXIHNoYXBlCiAgICAvLyAgICAgIyBBZGRpdGlvbmFsIHBheWxpbmVzCiAgICAvLyAgICAgIyAgIFswLDEsMSwxLDJdCiAgICAvLyAgICAgIyAgIFsyLDEsMSwxLDBdCiAgICAvLyAgICAgIyAgIFswLDEsMiwyLDJdCiAgICAvLyAgICAgIyAgIFsyLDEsMCwwLDBdCiAgICAvLyAgICAgIyAgIFsxLDEsMCwxLDFdCiAgICAvLyAgICAgIyAgIFsxLDEsMiwxLDFdCiAgICAvLyAgICAgIyAgIFswLDIsMCwyLDBdCiAgICAvLyAgICAgIyAgIFsyLDAsMiwwLDJdCiAgICAvLyAgICAgIyAgIFsxLDIsMiwyLDFdCiAgICAvLyAgICAgIyAgIFsxLDAsMCwwLDFdCiAgICAvLyAgICAgIyAgIFswLDEsMCwxLDJdCiAgICAvLyAgICAgIyBdCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgZ2V0X3BheWxpbmVfY291bnQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgICAgIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcGF5bGluZV9jb3VudCgpKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9wYXlsaW5lX2NvdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICAgICAgcmV0dXJuIEJveChVSW50NjQsIGtleT0icGF5bGluZV9jb3VudCIpLmdldChkZWZhdWx0PVVJbnQ2NCgyMCkpCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vICAgICBkZWYgZ2V0X3BheWxpbmUoCiAgICAvLyAgICAgICAgIHNlbGYsIHBheWxpbmVfaW5kZXg6IGFyYzQuVUludDY0CiAgICAvLyAgICAgKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFs1XV06CiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfcGF5bGluZShwYXlsaW5lX2luZGV4Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gICAgIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gICAgIGRlZiBnZXRfcGF5bGluZXMoc2VsZikgLT4gYXJjNC5TdGF0aWNBcnJheVthcmM0LlVJbnQ2NCwgdHlwaW5nLkxpdGVyYWxbMTAwXV06CiAgICAvLyAgICAgICAgIHJldHVybiBzZWxmLl9nZXRfcGF5bGluZXMoKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9wYXlsaW5lKAogICAgLy8gICAgICAgICBzZWxmLCBpbmRleDogVUludDY0CiAgICAvLyAgICAgKSAtPiBhcmM0LlN0YXRpY0FycmF5W2FyYzQuVUludDY0LCB0eXBpbmcuTGl0ZXJhbFs1XV06CiAgICAvLyAgICAgICAgIHBheWxpbmVzID0gc2VsZi5fZ2V0X3BheWxpbmVzKCkKICAgIC8vICAgICAgICAgc3RhcnQgPSBpbmRleCAqIFVJbnQ2NCg1KQogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5TdGF0aWNBcnJheSgKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0XSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDEpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDIpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDMpXSwKICAgIC8vICAgICAgICAgICAgIHBheWxpbmVzW3N0YXJ0ICsgVUludDY0KDQpXSwKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9wYXlsaW5lcygKICAgIC8vICAgICAgICAgc2VsZiwKICAgIC8vICAgICApIC0+IGFyYzQuU3RhdGljQXJyYXlbYXJjNC5VSW50NjQsIHR5cGluZy5MaXRlcmFsWzEwMF1dOgogICAgLy8gICAgICAgICByZXR1cm4gQm94KAogICAgLy8gICAgICAgICAgICAgYXJjNC5TdGF0aWNBcnJheVthcmM0LlVJbnQ2NCwgdHlwaW5nLkxpdGVyYWxbMTAwXV0sCiAgICAvLyAgICAgICAgICAgICBrZXk9InBheWxpbmVzIiwKICAgIC8vICAgICAgICAgKS5nZXQoCiAgICAvLyAgICAgICAgICAgICBkZWZhdWx0PWFyYzQuU3RhdGljQXJyYXkoCiAgICAvLyAgICAgICAgICAgICAgICAgIyB0b3AgbGluZQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgICMgbWlkZGxlIGxpbmUKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIGJvdHRvbSBsaW5lCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBWIHNoYXBlCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBpbnZlcnRlZCBWCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgIyB0b3AtY2VudGVyIHBlYWsKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIGJvdHRvbS1jZW50ZXIgdmFsbGV5CiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBNIHNoYXBlCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBXIHNoYXBlCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBBZGRpdGlvbmFsIHBheWxpbmVzCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMCwxLDEsMSwyXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzIsMSwxLDEsMF0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFswLDEsMiwyLDJdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMiwxLDAsMCwwXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzEsMSwwLDEsMV0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFsxLDEsMiwxLDFdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMCwyLDAsMiwwXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDIpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzIsMCwyLDAsMl0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICAgICAjIFsxLDIsMiwyLDFdCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMiksCiAgICAvLyAgICAgICAgICAgICAgICAgYXJjNC5VSW50NjQoMSksCiAgICAvLyAgICAgICAgICAgICAgICAgIyBbMSwwLDAsMCwxXQogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgICAgIGFyYzQuVUludDY0KDEpLAogICAgLy8gICAgICAgICAgICAgICAgICMgWzAsMSwwLDEsMl0KICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgxKSwKICAgIC8vICAgICAgICAgICAgICAgICBhcmM0LlVJbnQ2NCgyKSwKICAgIC8vICAgICAgICAgICAgICkKICAgIC8vICAgICAgICAgKQogICAgLy8gCiAgICAvLyAgICAgQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyAgICAgZGVmIG1hdGNoX3BheWxpbmUoc2VsZiwgZ3JpZDogQnl0ZXMxNSwgcGF5bGluZV9pbmRleDogYXJjNC5VSW50NjQpIC0+IFBheWxpbmVNYXRjaDoKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIE1hdGNoIGdyaWQgdG8gcGF5bGluZSBieSBpbmRleAogICAgLy8gCiAgICAvLyAgICAgICAgIFJldHVybnMgcGF5bGluZSBtYXRjaAogICAgLy8gICAgICAgICAgICAgICAgIGNvdW50LCBudW1iZXIgb2YgY29uc2VjdXRpdmUgbWF0Y2hlcyBvbiBwYXlsaW5lCiAgICAvLyAgICAgICAgICAgICAgICAgaW5pdGlhbF9zeW1ib2wsIHN0YXJpbmcgc3ltYm9sCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICByZXR1cm4gc2VsZi5fbWF0Y2hfcGF5bGluZShncmlkLmJ5dGVzLCBwYXlsaW5lX2luZGV4Lm5hdGl2ZSkKICAgIC8vIAogICAgLy8gICAgIEBzdWJyb3V0aW5lCiAgICAvLyAgICAgZGVmIF9tYXRjaF9wYXlsaW5lKHNlbGYsIGdyaWQ6IEJ5dGVzLCBwYXlsaW5lX2luZGV4OiBVSW50NjQpIC0+IFBheWxpbmVNYXRjaDoKICAgIC8vICAgICAgICAgIiIiCiAgICAvLyAgICAgICAgIE1hdGNoIGEgcGF5bGluZSBvbiB0aGUgZ3JpZC4KICAgIC8vICAgICAgICAgUmV0dXJucyBjb25zZWN1dGl2ZSBwYXlsaW5lIG1hdGNoZXMuCiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBwYXlsaW5lcyA9IHNlbGYuX2dldF9wYXlsaW5lcygpCiAgICAvLyAgICAgICAgICMgUmVwbGFjZSBzbGljaW5nIHdpdGggaW5kaXZpZHVhbCBpbmRleCBhY2Nlc3MKICAgIC8vICAgICAgICAgc3RhcnQgPSBwYXlsaW5lX2luZGV4ICogVUludDY0KDUpCiAgICAvLyAgICAgICAgIHBheWxpbmUgPSBhcmM0LlN0YXRpY0FycmF5KAogICAgLy8gICAgICAgICAgICAgcGF5bGluZXNbc3RhcnRdLAogICAgLy8gICAgICAgICAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMSldLAogICAgLy8gICAgICAgICAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMildLAogICAgLy8gICAgICAgICAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoMyldLAogICAgLy8gICAgICAgICAgICAgcGF5bGluZXNbc3RhcnQgKyBVSW50NjQoNCldLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICAgICAgIyBHZXQgdGhlIGZpcnN0IHN5bWJvbCB0byBtYXRjaCBhZ2FpbnN0CiAgICAvLyAgICAgICAgIGZpcnN0X3BvcyA9IFVJbnQ2NCgwKSAqIFVJbnQ2NCgzKSArIHBheWxpbmVbMF0ubmF0aXZlCiAgICAvLyAgICAgICAgIHN5bWJvbF90b19tYXRjaCA9IGdyaWRbZmlyc3RfcG9zIDogZmlyc3RfcG9zICsgMV0KICAgIC8vIAogICAgLy8gICAgICAgICBpZiBzeW1ib2xfdG9fbWF0Y2ggPT0gYiJfIjoKICAgIC8vICAgICAgICAgICAgIHJldHVybiBQYXlsaW5lTWF0Y2goCiAgICAvLyAgICAgICAgICAgICAgICAgY291bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICAgICAgaW5pdGlhbF9zeW1ib2w9YXJjNC5CeXRlLmZyb21fYnl0ZXMoc3ltYm9sX3RvX21hdGNoKSwKICAgIC8vICAgICAgICAgICAgICkKICAgIC8vIAogICAgLy8gICAgICAgICBtYXRjaGVzID0gVUludDY0KDEpICAjIFdlIHN0YXJ0IHdpdGggMSBtYXRjaCAodGhlIGZpcnN0IHN5bWJvbCkKICAgIC8vIAogICAgLy8gICAgICAgICAjIENoZWNrIHN1YnNlcXVlbnQgcG9zaXRpb25zCiAgICAvLyAgICAgICAgIGZvciBpIGluIHVyYW5nZSgxLCA1KToKICAgIC8vICAgICAgICAgICAgIGdyaWRfcG9zID0gaSAqIFVJbnQ2NCgzKSArIHBheWxpbmVbaV0ubmF0aXZlCiAgICAvLyAgICAgICAgICAgICBjdXJyZW50X3N5bWJvbCA9IGdyaWRbZ3JpZF9wb3MgOiBncmlkX3BvcyArIDFdCiAgICAvLyAKICAgIC8vICAgICAgICAgICAgICMgSWYgc3ltYm9sIG1hdGNoZXMsIGNvbnRpbnVlIGNvdW50aW5nCiAgICAvLyAgICAgICAgICAgICBpZiBjdXJyZW50X3N5bWJvbCA9PSBzeW1ib2xfdG9fbWF0Y2g6CiAgICAvLyAgICAgICAgICAgICAgICAgbWF0Y2hlcyArPSBVSW50NjQoMSkKICAgIC8vICAgICAgICAgICAgIGVsc2U6CiAgICAvLyAgICAgICAgICAgICAgICAgYnJlYWsKICAgIC8vIAogICAgLy8gICAgICAgICByZXR1cm4gUGF5bGluZU1hdGNoKAogICAgLy8gICAgICAgICAgICAgY291bnQ9YXJjNC5VSW50NjQobWF0Y2hlcyksCiAgICAvLyAgICAgICAgICAgICBpbml0aWFsX3N5bWJvbD1hcmM0LkJ5dGUuZnJvbV9ieXRlcyhzeW1ib2xfdG9fbWF0Y2gpLAogICAgLy8gICAgICAgICApCiAgICAvLyAKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QKICAgIC8vICAgICBkZWYgZ2V0X2JldF9ncmlkKHNlbGYsIGJldF9rZXk6IEJ5dGVzNTYpIC0+IEJ5dGVzMTU6CiAgICAvLyAgICAgICAgIGVuc3VyZV9idWRnZXQoMTAwMCwgT3BVcEZlZVNvdXJjZS5Hcm91cENyZWRpdCkgICMgUkVNIG1heSB1c2UgMTA3MCBvcGNvZGUgYnVkZ2V0CiAgICAvLyAgICAgICAgIHJldHVybiBCeXRlczE1LmZyb21fYnl0ZXMoc2VsZi5fZ2V0X2JldF9ncmlkKGJldF9rZXkuYnl0ZXMpKQogICAgLy8gCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2dldF9iZXRfZ3JpZChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gQnl0ZXM6CiAgICAvLyAgICAgICAgIGFzc2VydCBiZXRfa2V5IGluIHNlbGYuYmV0LCAiYmV0IG5vdCBmb3VuZCIKICAgIC8vICAgICAgICAgYmV0ID0gc2VsZi5iZXRbYmV0X2tleV0uY29weSgpCiAgICAvLyAgICAgICAgIGNvbWJpbmVkID0gc2VsZi5fZ2V0X2Jsb2NrX3NlZWQoYmV0LmNsYWltX3JvdW5kLm5hdGl2ZSkgKyBiZXRfa2V5CiAgICAvLyAgICAgICAgIGhhc2hlZCA9IG9wLnNoYTI1Nihjb21iaW5lZCkKICAgIC8vICAgICAgICAgZ3JpZCA9IHNlbGYuX2dldF9ncmlkKGhhc2hlZCkKICAgIC8vICAgICAgICAgcmV0dXJuIGdyaWQKICAgIC8vIAogICAgLy8gICAgICMgb3ZlcnJpZGUKICAgIC8vICAgICBAYXJjNC5hYmltZXRob2QKICAgIC8vICAgICBkZWYgY2xhaW0oc2VsZiwgYmV0X2tleTogQnl0ZXM1NikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBDbGFpbSBhIGJldAogICAgLy8gCiAgICAvLyAgICAgICAgIEFyZ3M6CiAgICAvLyAgICAgICAgICAgICBiZXRfa2V5OiBUaGUga2V5IG9mIHRoZSBiZXQgdG8gY2xhaW0KICAgIC8vIAogICAgLy8gICAgICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICAgICAgcGF5b3V0OiBUaGUgcGF5b3V0IGZvciB0aGUgYmV0CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBlbnN1cmVfYnVkZ2V0KDE0MDAsIE9wVXBGZWVTb3VyY2UuR3JvdXBDcmVkaXQpICAjIFJFTSBtYXkgdXNlIDEzOTkgb3Bjb2RlIGJ1ZGdldAogICAgLy8gICAgICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fY2xhaW0oYmV0X2tleS5ieXRlcykpCiAgICAvLyAKICAgIC8vICAgICAjIG92ZXJyaWRlCiAgICAvLyAgICAgQHN1YnJvdXRpbmUKICAgIC8vICAgICBkZWYgX2NsYWltKHNlbGYsIGJldF9rZXk6IEJ5dGVzKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgICAgICIiIgogICAgLy8gICAgICAgICBDbGFpbSBhIGJldAogICAgLy8gICAgICAgICBBcmdzOgogICAgLy8gICAgICAgICAgICAgYmV0X2tleTogVGhlIGtleSBvZiB0aGUgYmV0IHRvIGNsYWltCiAgICAvLyAKICAgIC8vICAgICAgICAgUmV0dXJuczoKICAgIC8vICAgICAgICAgICAgIHBheW91dDogVGhlIHBheW91dCBmb3IgdGhlIGJldAogICAgLy8gICAgICAgICAiIiIKICAgIC8vICAgICAgICAgYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgZnJhbWVfZGlnIC0xCiAgICBib3hfbGVuCiAgICBidXJ5IDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQxMwogICAgLy8gYXNzZXJ0IGJldF9rZXkgaW4gc2VsZi5iZXQsICJiZXQgbm90IGZvdW5kIgogICAgYXNzZXJ0IC8vIGJldCBub3QgZm91bmQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQxNAogICAgLy8gYmV0ID0gc2VsZi5iZXRbYmV0X2tleV0uY29weSgpCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9nZXQKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgc2VsZi5iZXQgZW50cnkgZXhpc3RzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0MTUKICAgIC8vIHNwaW5fcGFyYW1zID0gc2VsZi5fc3Bpbl9wYXJhbXMoKQogICAgY2FsbHN1YiBfc3Bpbl9wYXJhbXMKICAgIHN3YXAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQxNi0xNDE4CiAgICAvLyAjIGlmIHJvdW5kIGlzIGdyZWF0ZXIgdGhhbiBjbGFpbV9yb3VuZCArIE1BWF9DTEFJTV9ST1VORF9ERUxUQSwgdGhlIGJldCBpcyBleHBpcmVkCiAgICAvLyAjIGFuZCB3ZSBjYW4gcmV0dXJuIHRoZSBib3ggY29zdCB0byB0aGUgc2VuZGVyCiAgICAvLyBpZiBHbG9iYWwucm91bmQgPiBiZXQuY2xhaW1fcm91bmQubmF0aXZlICsgVUludDY0KE1BWF9DTEFJTV9ST1VORF9ERUxUQSk6CiAgICBnbG9iYWwgUm91bmQKICAgIHN3YXAKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgY292ZXIgMwogICAgaW50IDEwMDAKICAgICsKICAgID4KICAgIGJ6IF9jbGFpbV9lbHNlX2JvZHlAMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDE5CiAgICAvLyBkZWwgc2VsZi5iZXRbYmV0X2tleV0KICAgIGZyYW1lX2RpZyAtMQogICAgYm94X2RlbAogICAgcG9wCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0MjMKICAgIC8vIGJldC5tYXhfcGF5bGluZV9pbmRleC5uYXRpdmUgLSBiZXQucGF5bGluZV9pbmRleC5uYXRpdmUgKyBVSW50NjQoMSkKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGV4dHJhY3QgNDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHN3YXAKICAgIGR1cAogICAgZXh0cmFjdCA1NiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgdW5jb3ZlciAyCiAgICBzd2FwCiAgICAtCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDI2CiAgICAvLyBiZXQuYW1vdW50Lm5hdGl2ZQogICAgc3dhcAogICAgZXh0cmFjdCAzMiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDI2LTE0MjcKICAgIC8vIGJldC5hbW91bnQubmF0aXZlCiAgICAvLyAqIHJlbWFpbmluZ19wYXlsaW5lcwogICAgKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDI4CiAgICAvLyAqIHNwaW5fcGFyYW1zLm1heF9wYXlvdXRfbXVsdGlwbGllci5uYXRpdmUKICAgIHN3YXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDI2LTE0MjgKICAgIC8vIGJldC5hbW91bnQubmF0aXZlCiAgICAvLyAqIHJlbWFpbmluZ19wYXlsaW5lcwogICAgLy8gKiBzcGluX3BhcmFtcy5tYXhfcGF5b3V0X211bHRpcGxpZXIubmF0aXZlCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0MzAKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChtYXhfcG9zc2libGVfcGF5b3V0KQogICAgZHVwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQzMQogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG1heF9wb3NzaWJsZV9wYXlvdXQpCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQzMgogICAgLy8gaXR4bi5QYXltZW50KHJlY2VpdmVyPVR4bi5zZW5kZXIsIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgX3NwaW5fY29zdAogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQzMy0xNDQzCiAgICAvLyAjIGFyYzQuZW1pdCgKICAgIC8vICMgICAgIEJldENsYWltZWQoCiAgICAvLyAjICAgICAgICAgd2hvPWJldC53aG8sCiAgICAvLyAjICAgICAgICAgYW1vdW50PWJldC5hbW91bnQsCiAgICAvLyAjICAgICAgICAgY29uZmlybWVkX3JvdW5kPWJldC5jb25maXJtZWRfcm91bmQsCiAgICAvLyAjICAgICAgICAgaW5kZXg9YmV0LmluZGV4LAogICAgLy8gIyAgICAgICAgIGNsYWltX3JvdW5kPWJldC5jbGFpbV9yb3VuZCwKICAgIC8vICMgICAgICAgICBwYXlvdXQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAjICAgICApCiAgICAvLyAjICkKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2NsYWltX2Vsc2VfYm9keUAzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDQ3LTE0NDgKICAgIC8vICMgY2FsY3VsYXRlIHIgZnJvbSBibG9jayBzZWVkIGFuZCBiZXQga2V5CiAgICAvLyBjb21iaW5lZCA9IHNlbGYuX2dldF9ibG9ja19zZWVkKGJldC5jbGFpbV9yb3VuZC5uYXRpdmUpICsgYmV0X2tleQogICAgZnJhbWVfZGlnIDQKICAgIGNhbGxzdWIgX2dldF9ibG9ja19zZWVkCiAgICBmcmFtZV9kaWcgLTEKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDQ5CiAgICAvLyBoYXNoZWQgPSBvcC5zaGEyNTYoY29tYmluZWQpCiAgICBzaGEyNTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ1MAogICAgLy8gZ3JpZCA9IHNlbGYuX2dldF9ncmlkKGhhc2hlZCkKICAgIGNhbGxzdWIgX2dldF9ncmlkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NTEKICAgIC8vIHBheWxpbmVfbWF0Y2ggPSBzZWxmLl9tYXRjaF9wYXlsaW5lKGdyaWQsIGJldC5wYXlsaW5lX2luZGV4Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAzCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGV4dHJhY3QgNTYgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICBjYWxsc3ViIF9tYXRjaF9wYXlsaW5lCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NTgKICAgIC8vIGJldC5hbW91bnQubmF0aXZlICogc2VsZi5fZ2V0X3BheW91dF9tdWx0aXBsaWVyKHBheWxpbmVfbWF0Y2gpCiAgICBzd2FwCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBzd2FwCiAgICBjYWxsc3ViIF9nZXRfcGF5b3V0X211bHRpcGxpZXIKICAgIHBvcAogICAgZGlnIDEKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ1Mi0xNDU5CiAgICAvLyAjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMKICAgIC8vICMgZ2V0IHBheW91dCBpbnRlcm5hbCBpZiBzdWJjbGFzcyBvZiBTbG90TWFjaGluZVBheW91dE1vZGVsCiAgICAvLyAjIG90aGVyd2lzZSBjYWxsIG1vZGVsIHRvIGdldCBwYXlvdXQKICAgIC8vICMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIwogICAgLy8gIyB1c2UgZW1iZWRkZWQgcGF5b3V0IG1vZGVsCiAgICAvLyBwYXlvdXQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiZXQuYW1vdW50Lm5hdGl2ZSAqIHNlbGYuX2dldF9wYXlvdXRfbXVsdGlwbGllcihwYXlsaW5lX21hdGNoKQogICAgLy8gKQogICAgaXRvYgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDcxCiAgICAvLyBiZXQuYW1vdW50Lm5hdGl2ZSAqIHNwaW5fcGFyYW1zLm1heF9wYXlvdXRfbXVsdGlwbGllci5uYXRpdmUKICAgIHVuY292ZXIgMgogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICAqCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NzMKICAgIC8vIHNlbGYuX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChtYXhfcG9zc2libGVfcGF5b3V0KQogICAgZHVwCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9sb2NrZWQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ3NAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG1heF9wb3NzaWJsZV9wYXlvdXQgLSBwYXlvdXQubmF0aXZlKQogICAgZGlnIDEKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfYnVyeSAxCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC0KICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDc1CiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChwYXlvdXQubmF0aXZlKQogICAgY2FsbHN1YiBfZGVjcmVtZW50X2JhbGFuY2VfdG90YWwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ3Ni0xNDc3CiAgICAvLyAjIFRPRE8gYnJhbmNoIG9uIHBheWxpbmUgaW5kZXgKICAgIC8vIGlmIHBheW91dCA+IDA6CiAgICBieXRlIDB4MDAwMDAwMDAwMDAwMDAwMAogICAgYj4KICAgIGJ6IF9jbGFpbV9hZnRlcl9pZl9lbHNlQDYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ3OAogICAgLy8gaXR4bi5QYXltZW50KHJlY2VpdmVyPWJldC53aG8ubmF0aXZlLCBhbW91bnQ9cGF5b3V0Lm5hdGl2ZSkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIGZyYW1lX2RpZyAzCiAgICBleHRyYWN0IDAgMzIgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBmcmFtZV9kaWcgMQogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKCl9jbGFpbV9hZnRlcl9pZl9lbHNlQDY6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0NzktMTQ4OQogICAgLy8gIyBhcmM0LmVtaXQoCiAgICAvLyAjICAgICBCZXRDbGFpbWVkKAogICAgLy8gIyAgICAgICAgIHdobz1iZXQud2hvLAogICAgLy8gIyAgICAgICAgIGFtb3VudD1iZXQuYW1vdW50LAogICAgLy8gIyAgICAgICAgIGNvbmZpcm1lZF9yb3VuZD1iZXQuY29uZmlybWVkX3JvdW5kLAogICAgLy8gIyAgICAgICAgIGluZGV4PWJldC5pbmRleCwKICAgIC8vICMgICAgICAgICBjbGFpbV9yb3VuZD1iZXQuY2xhaW1fcm91bmQsCiAgICAvLyAjICAgICAgICAgcGF5b3V0PXBheW91dCwKICAgIC8vICMgICAgICkKICAgIC8vICMgKQogICAgLy8gaWYgYmV0LnBheWxpbmVfaW5kZXgubmF0aXZlICsgVUludDY0KDEpID4gYmV0Lm1heF9wYXlsaW5lX2luZGV4Lm5hdGl2ZToKICAgIGZyYW1lX2RpZyAwCiAgICBpbnQgMQogICAgKwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDIKICAgIGZyYW1lX2RpZyAzCiAgICBleHRyYWN0IDQwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICA+CiAgICBieiBfY2xhaW1fZWxzZV9ib2R5QDkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ5MAogICAgLy8gZGVsIHNlbGYuYmV0W2JldF9rZXldCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9kZWwKICAgIHBvcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDkxLTE0OTQKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTIKICAgIC8vIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTMKICAgIC8vIGFtb3VudD1zZWxmLl9zcGluX2Nvc3QoKSArIHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCksCiAgICBjYWxsc3ViIF9zcGluX2Nvc3QKICAgIGNhbGxzdWIgX3NwaW5fcGF5bGluZV9jb3N0CiAgICArCiAgICBpdHhuX2ZpZWxkIEFtb3VudAogICAgaXR4bl9maWVsZCBSZWNlaXZlcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDkxCiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICBpbnQgcGF5CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICBpbnQgMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ5MS0xNDk0CiAgICAvLyBpdHhuLlBheW1lbnQoCiAgICAvLyAgICAgcmVjZWl2ZXI9VHhuLnNlbmRlciwKICAgIC8vICAgICBhbW91bnQ9c2VsZi5fc3Bpbl9jb3N0KCkgKyBzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKICAgIGIgX2NsYWltX2FmdGVyX2lmX2Vsc2VAMTEKCl9jbGFpbV9lbHNlX2JvZHlAOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTQ5NgogICAgLy8gYmV0LnBheWxpbmVfaW5kZXggPSBhcmM0LlVJbnQ2NChiZXQucGF5bGluZV9pbmRleC5uYXRpdmUgKyBVSW50NjQoMSkpCiAgICBmcmFtZV9kaWcgMgogICAgaXRvYgogICAgZnJhbWVfZGlnIDMKICAgIHN3YXAKICAgIHJlcGxhY2UyIDU2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTcKICAgIC8vIHNlbGYuYmV0W2JldF9rZXldID0gYmV0LmNvcHkoKQogICAgZnJhbWVfZGlnIC0xCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTgtMTUwMQogICAgLy8gaXR4bi5QYXltZW50KAogICAgLy8gICAgIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICAvLyAgICAgYW1vdW50PXNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCksCiAgICAvLyApLnN1Ym1pdCgpCiAgICBpdHhuX2JlZ2luCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTkKICAgIC8vIHJlY2VpdmVyPVR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MDAKICAgIC8vIGFtb3VudD1zZWxmLl9zcGluX3BheWxpbmVfY29zdCgpLAogICAgY2FsbHN1YiBfc3Bpbl9wYXlsaW5lX2Nvc3QKICAgIGl0eG5fZmllbGQgQW1vdW50CiAgICBpdHhuX2ZpZWxkIFJlY2VpdmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE0OTgKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNDk4LTE1MDEKICAgIC8vIGl0eG4uUGF5bWVudCgKICAgIC8vICAgICByZWNlaXZlcj1UeG4uc2VuZGVyLAogICAgLy8gICAgIGFtb3VudD1zZWxmLl9zcGluX3BheWxpbmVfY29zdCgpLAogICAgLy8gKS5zdWJtaXQoKQogICAgaXR4bl9zdWJtaXQKCl9jbGFpbV9hZnRlcl9pZl9lbHNlQDExOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTAyCiAgICAvLyByZXR1cm4gcGF5b3V0Lm5hdGl2ZQogICAgZnJhbWVfZGlnIDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZChhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2RlY3JlbWVudF9iYWxhbmNlX2xvY2tlZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njc0LTY3NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfbG9ja2VkKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY3NgogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NzgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICBkdXAKICAgIGZyYW1lX2RpZyAtMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njc3LTY3OQogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJiYWxhbmNlIGxvY2tlZCBpcyBsZXNzIHRoYW4gYW1vdW50IgogICAgYXNzZXJ0IC8vIGJhbGFuY2UgbG9ja2VkIGlzIGxlc3MgdGhhbiBhbW91bnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjgxCiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY4MC02ODIKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSAtIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjgzCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjQzLTY0NAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY0NQogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NDcKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlICsgYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY0Ni02NDgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfYXZhaWxhYmxlLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NDkKICAgIC8vIEJveChCYW5rQmFsYW5jZXMsIGtleT0iYmFua19iYWxhbmNlcyIpLnZhbHVlID0gYmFua19iYWxhbmNlcy5jb3B5KCkKICAgIGJ5dGUgImJhbmtfYmFsYW5jZXMiCiAgICBzd2FwCiAgICBib3hfcHV0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fc3Bpbl9jb3N0KCkgLT4gdWludDY0Ogpfc3Bpbl9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MjItOTI0CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX2Nvc3Qoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkyNQogICAgLy8gcmV0dXJuIFVJbnQ2NCg1MDUwMCkKICAgIGludCA1MDUwMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU2xvdE1hY2hpbmUuX2dldF9wYXlvdXRfbXVsdGlwbGllcihwbTogYnl0ZXMpIC0+IHVpbnQ2NCwgYnl0ZXM6Cl9nZXRfcGF5b3V0X211bHRpcGxpZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MTgtMTUxOQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyKHNlbGYsIHBtOiBQYXlsaW5lTWF0Y2gpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDEgMgogICAgaW50IDAKICAgIGR1cG4gMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTI5CiAgICAvLyBpZiBwbS5pbml0aWFsX3N5bWJvbC5ieXRlcyA9PSBCeXRlcyhiIkEiKToKICAgIGZyYW1lX2RpZyAtMQogICAgZXh0cmFjdCA4IDEgLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGJ5dGUgMHg0MQogICAgPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTUzMAogICAgLy8gaWYgcG0uY291bnQgPT0gVUludDY0KDUpOgogICAgZnJhbWVfZGlnIC0xCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGR1cAogICAgZnJhbWVfYnVyeSAwCiAgICBpbnQgNQogICAgaXRvYgogICAgYj09CiAgICBieiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MzEKICAgIC8vIHJldHVybiBVSW50NjQoMTAwMCkKICAgIGludCAxMDAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MzIKICAgIC8vIGVsaWYgcG0uY291bnQgPT0gVUludDY0KDQpOgogICAgaW50IDQKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAwCiAgICBiPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTUzMwogICAgLy8gcmV0dXJuIFVJbnQ2NCgyMDApCiAgICBpbnQgMjAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MzQKICAgIC8vIGVsaWYgcG0uY291bnQgPT0gVUludDY0KDMpOgogICAgaW50IDMKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAwCiAgICBiPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDcKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTUzNQogICAgLy8gcmV0dXJuIFVJbnQ2NCg1MCkKICAgIGludCA1MAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUA3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTM3CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUA4OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTM4CiAgICAvLyBlbGlmIHBtLmluaXRpYWxfc3ltYm9sLmJ5dGVzID09IEJ5dGVzKGIiQiIpOgogICAgZnJhbWVfZGlnIDQKICAgIGJ5dGUgMHg0MgogICAgPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDE2CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MzkKICAgIC8vIGlmIHBtLmNvdW50ID09IFVJbnQ2NCg1KToKICAgIGZyYW1lX2RpZyAtMQogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMQogICAgaW50IDUKICAgIGl0b2IKICAgIGI9PQogICAgYnogX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMTEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU0MAogICAgLy8gcmV0dXJuIFVJbnQ2NCg1MDApCiAgICBpbnQgNTAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDExOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTQxCiAgICAvLyBlbGlmIHBtLmNvdW50ID09IFVJbnQ2NCg0KToKICAgIGludCA0CiAgICBpdG9iCiAgICBmcmFtZV9kaWcgMQogICAgYj09CiAgICBieiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAxMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTQyCiAgICAvLyByZXR1cm4gVUludDY0KDEwMCkKICAgIGludCAxMDAKICAgIGZyYW1lX2RpZyAtMQogICAgZnJhbWVfYnVyeSAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMTM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NDMKICAgIC8vIGVsaWYgcG0uY291bnQgPT0gVUludDY0KDMpOgogICAgaW50IDMKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAxCiAgICBiPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDE1CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NDQKICAgIC8vIHJldHVybiBVSW50NjQoMjApCiAgICBpbnQgMjAKICAgIGZyYW1lX2RpZyAtMQogICAgZnJhbWVfYnVyeSAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMTU6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NDYKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDE2OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTQ3CiAgICAvLyBlbGlmIHBtLmluaXRpYWxfc3ltYm9sLmJ5dGVzID09IEJ5dGVzKGIiQyIpOgogICAgZnJhbWVfZGlnIDQKICAgIGJ5dGUgMHg0MwogICAgPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDI0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NDgKICAgIC8vIGlmIHBtLmNvdW50ID09IFVJbnQ2NCg1KToKICAgIGZyYW1lX2RpZyAtMQogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBkdXAKICAgIGZyYW1lX2J1cnkgMgogICAgaW50IDUKICAgIGl0b2IKICAgIGI9PQogICAgYnogX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMTkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU0OQogICAgLy8gcmV0dXJuIFVJbnQ2NCgyMDApCiAgICBpbnQgMjAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDE5OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTUwCiAgICAvLyBlbGlmIHBtLmNvdW50ID09IFVJbnQ2NCg0KToKICAgIGludCA0CiAgICBpdG9iCiAgICBmcmFtZV9kaWcgMgogICAgYj09CiAgICBieiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAyMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTUxCiAgICAvLyByZXR1cm4gVUludDY0KDUwKQogICAgaW50IDUwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDIxOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTUyCiAgICAvLyBlbGlmIHBtLmNvdW50ID09IFVJbnQ2NCgzKToKICAgIGludCAzCiAgICBpdG9iCiAgICBmcmFtZV9kaWcgMgogICAgYj09CiAgICBieiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAyMwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTUzCiAgICAvLyByZXR1cm4gVUludDY0KDEwKQogICAgaW50IDEwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDIzOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTU1CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAyNDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU1NgogICAgLy8gZWxpZiBwbS5pbml0aWFsX3N5bWJvbC5ieXRlcyA9PSBCeXRlcyhiIkQiKToKICAgIGZyYW1lX2RpZyA0CiAgICBieXRlIDB4NDQKICAgID09CiAgICBieiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAzMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTU3CiAgICAvLyBpZiBwbS5jb3VudCA9PSBVSW50NjQoNSk6CiAgICBmcmFtZV9kaWcgLTEKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgZHVwCiAgICBmcmFtZV9idXJ5IDMKICAgIGludCA1CiAgICBpdG9iCiAgICBiPT0KICAgIGJ6IF9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDI3CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NTgKICAgIC8vIHJldHVybiBVSW50NjQoMTAwKQogICAgaW50IDEwMAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAyNzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU1OQogICAgLy8gZWxpZiBwbS5jb3VudCA9PSBVSW50NjQoNCk6CiAgICBpbnQgNAogICAgaXRvYgogICAgZnJhbWVfZGlnIDMKICAgIGI9PQogICAgYnogX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMjkKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU2MAogICAgLy8gcmV0dXJuIFVJbnQ2NCgyMCkKICAgIGludCAyMAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpfZ2V0X3BheW91dF9tdWx0aXBsaWVyX2Vsc2VfYm9keUAyOToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU2MQogICAgLy8gZWxpZiBwbS5jb3VudCA9PSBVSW50NjQoMyk6CiAgICBpbnQgMwogICAgaXRvYgogICAgZnJhbWVfZGlnIDMKICAgIGI9PQogICAgYnogX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMzEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTU2MgogICAgLy8gcmV0dXJuIFVJbnQ2NCg1KQogICAgaW50IDUKICAgIGZyYW1lX2RpZyAtMQogICAgZnJhbWVfYnVyeSAxCiAgICBmcmFtZV9idXJ5IDAKICAgIHJldHN1YgoKX2dldF9wYXlvdXRfbXVsdGlwbGllcl9lbHNlX2JvZHlAMzE6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1NjQKICAgIC8vIHJldHVybiBVSW50NjQoMCkKICAgIGludCAwCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2J1cnkgMQogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCl9nZXRfcGF5b3V0X211bHRpcGxpZXJfZWxzZV9ib2R5QDMyOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxNTY2CiAgICAvLyByZXR1cm4gVUludDY0KDApCiAgICBpbnQgMAogICAgZnJhbWVfZGlnIC0xCiAgICBmcmFtZV9idXJ5IDEKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfZGVjcmVtZW50X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY5Ny02OTgKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY5OQogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MDEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgPj0gYW1vdW50CiAgICBkdXAKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZHVwCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcwMC03MDIKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSA+PSBhbW91bnQKICAgIC8vICksICJiYWxhbmNlIHRvdGFsIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gYW1vdW50CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcwNAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSAtIGFtb3VudAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjcwMy03MDUKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbCA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV90b3RhbC5uYXRpdmUgLSBhbW91bnQKICAgIC8vICkKICAgIGl0b2IKICAgIHJlcGxhY2UyIDgKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzA2CiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX3NwaW5fcGF5bGluZV9jb3N0KCkgLT4gdWludDY0Ogpfc3Bpbl9wYXlsaW5lX2Nvc3Q6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkzMS05MzIKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fcGF5bGluZV9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MzMKICAgIC8vIHJldHVybiBVSW50NjQoMzAwMDApCiAgICBpbnQgMzAwMDAKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNsb3RNYWNoaW5lLmdldF9wYXlvdXRfbXVsdGlwbGllcihzeW1ib2w6IGJ5dGVzLCBjb3VudDogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfcGF5b3V0X211bHRpcGxpZXI6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MDgtMTUxMQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3BheW91dF9tdWx0aXBsaWVyKAogICAgLy8gICAgIHNlbGYsIHN5bWJvbDogYXJjNC5CeXRlLCBjb3VudDogYXJjNC5VSW50NjQKICAgIC8vICkgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAyIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTUxNAogICAgLy8gUGF5bGluZU1hdGNoKGNvdW50PWNvdW50LCBpbml0aWFsX3N5bWJvbD1zeW1ib2wpCiAgICBmcmFtZV9kaWcgLTEKICAgIGZyYW1lX2RpZyAtMgogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjE1MTMtMTUxNQogICAgLy8gc2VsZi5fZ2V0X3BheW91dF9tdWx0aXBsaWVyKAogICAgLy8gICAgIFBheWxpbmVNYXRjaChjb3VudD1jb3VudCwgaW5pdGlhbF9zeW1ib2w9c3ltYm9sKQogICAgLy8gKQogICAgY2FsbHN1YiBfZ2V0X3BheW91dF9tdWx0aXBsaWVyCiAgICBwb3AKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTUxMi0xNTE2CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoCiAgICAvLyAgICAgc2VsZi5fZ2V0X3BheW91dF9tdWx0aXBsaWVyKAogICAgLy8gICAgICAgICBQYXlsaW5lTWF0Y2goY291bnQ9Y291bnQsIGluaXRpYWxfc3ltYm9sPXN5bWJvbCkKICAgIC8vICAgICApCiAgICAvLyApCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5nZXRfYmV0X2NsYWltX3JvdW5kKGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X2JldF9jbGFpbV9yb3VuZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODEzLTgxNAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlczU2KSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MTUKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfYmV0X2NsYWltX3JvdW5kKGJldF9rZXkuYnl0ZXMpKQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0X2NsYWltX3JvdW5kCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fZ2V0X2JldF9jbGFpbV9yb3VuZChiZXRfa2V5OiBieXRlcykgLT4gdWludDY0OgpfZ2V0X2JldF9jbGFpbV9yb3VuZDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODE3LTgxOAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgxOQogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9iZXQoYmV0X2tleSkuY2xhaW1fcm91bmQubmF0aXZlCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2dldF9iZXQKICAgIGV4dHJhY3QgNDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfYmV0KGJldF9rZXk6IGJ5dGVzKSAtPiBieXRlczoKX2dldF9iZXQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjgwMC04MDEKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXQoc2VsZiwgYmV0X2tleTogQnl0ZXMpIC0+IEJldDoKICAgIHByb3RvIDEgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MDItODExCiAgICAvLyByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgIGJldF9rZXksCiAgICAvLyAgICAgZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICBmcmFtZV9kaWcgLTEKICAgIGJveF9nZXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODA0LTgxMAogICAgLy8gZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICBhbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICksCiAgICBieXRlIGJhc2UzMiBBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBPQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4MDItODExCiAgICAvLyByZXR1cm4gc2VsZi5iZXQuZ2V0KAogICAgLy8gICAgIGJldF9rZXksCiAgICAvLyAgICAgZGVmYXVsdD1CZXQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoR2xvYmFsLnplcm9fYWRkcmVzcyksCiAgICAvLyAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICksCiAgICAvLyApCiAgICBjb3ZlciAyCiAgICBzZWxlY3QKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLnNwaW5fcGF5bGluZV9jb3N0KCkgLT4gYnl0ZXM6CnNwaW5fcGF5bGluZV9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MjctOTI4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluX3BheWxpbmVfY29zdChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MjkKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpKQogICAgY2FsbHN1YiBfc3Bpbl9wYXlsaW5lX2Nvc3QKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VySW50ZXJmYWNlLnNwaW4oYmV0X2Ftb3VudDogYnl0ZXMsIG1heF9wYXlsaW5lX2luZGV4OiBieXRlcywgaW5kZXg6IGJ5dGVzKSAtPiBieXRlczoKc3BpbjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzE0LTcyMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3BpbigKICAgIC8vICAgICBzZWxmLAogICAgLy8gICAgIGJldF9hbW91bnQ6IGFyYzQuVUludDY0LAogICAgLy8gICAgIG1heF9wYXlsaW5lX2luZGV4OiBhcmM0LlVJbnQ2NCwKICAgIC8vICAgICBpbmRleDogYXJjNC5VSW50NjQsCiAgICAvLyApIC0+IEJ5dGVzNTY6CiAgICBwcm90byAzIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzM0CiAgICAvLyBzZWxmLl9zcGluKGJldF9hbW91bnQubmF0aXZlLCBtYXhfcGF5bGluZV9pbmRleC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0yCiAgICBidG9pCiAgICBmcmFtZV9kaWcgLTEKICAgIGJ0b2kKICAgIGNhbGxzdWIgX3NwaW4KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzMzLTczNQogICAgLy8gcmV0dXJuIEJ5dGVzNTYuZnJvbV9ieXRlcygKICAgIC8vICAgICBzZWxmLl9zcGluKGJldF9hbW91bnQubmF0aXZlLCBtYXhfcGF5bGluZV9pbmRleC5uYXRpdmUsIGluZGV4Lm5hdGl2ZSkKICAgIC8vICkKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9zcGluKGJldF9hbW91bnQ6IHVpbnQ2NCwgbWF4X3BheWxpbmVfaW5kZXg6IHVpbnQ2NCwgaW5kZXg6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9zcGluOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MzUtOTM5CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluKAogICAgLy8gICAgIHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCwgbWF4X3BheWxpbmVfaW5kZXg6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIHByb3RvIDMgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NTEtOTUyCiAgICAvLyAjIHBheW1lbnQgYXNzZXJ0aW9ucwogICAgLy8gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgPSBiZXRfYW1vdW50ICogKG1heF9wYXlsaW5lX2luZGV4ICsgVUludDY0KDEpKQogICAgZnJhbWVfZGlnIC0yCiAgICBpbnQgMQogICAgKwogICAgZnJhbWVfZGlnIC0zCiAgICBkaWcgMQogICAgKgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NTQKICAgIC8vIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID49IHNlbGYuX2dldF9taW5fYmV0X2Ftb3VudCgpCiAgICBjYWxsc3ViIF9nZXRfbWluX2JldF9hbW91bnQKICAgIGRpZyAxCiAgICA8PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NTMtOTU1CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID49IHNlbGYuX2dldF9taW5fYmV0X2Ftb3VudCgpCiAgICAvLyApLCAiYmV0IGFtb3VudCB0b28gc21hbGwiCiAgICBhc3NlcnQgLy8gYmV0IGFtb3VudCB0b28gc21hbGwKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTU3CiAgICAvLyBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2JldF9hbW91bnQoKQogICAgY2FsbHN1YiBfZ2V0X21heF9iZXRfYW1vdW50CiAgICBkaWcgMQogICAgPj0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTU2LTk1OAogICAgLy8gYXNzZXJ0ICgKICAgIC8vICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2JldF9hbW91bnQoKQogICAgLy8gKSwgImJldCBhbW91bnQgdG9vIGxhcmdlIgogICAgYXNzZXJ0IC8vIGJldCBhbW91bnQgdG9vIGxhcmdlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk1OQogICAgLy8gYWN0dWFsX3BheW1lbnRfYW1vdW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIHJlcXVpcmVfcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjAKICAgIC8vIGFzc2VydCBhY3R1YWxfcGF5bWVudF9hbW91bnQgPj0gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQsICJwYXltZW50IGluc3VmZmljaWVudCIKICAgIGR1cAogICAgZGlnIDIKICAgID49CiAgICBhc3NlcnQgLy8gcGF5bWVudCBpbnN1ZmZpY2llbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTYxCiAgICAvLyBleHRyYV9wYXltZW50X2Ftb3VudCA9IGFjdHVhbF9wYXltZW50X2Ftb3VudCAtIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50CiAgICBkaWcgMQogICAgLQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjItOTYzCiAgICAvLyAjIGV4dHJhIHBheW1lbnQgYW1vdW50IG11c3QgbGVzcyB0aGFuIG1heCBidXQgZ3JlYXRlciB0aGFuIG1pbiBjb3N0cwogICAgLy8gbWluX2Nvc3RzID0gc2VsZi5fc3Bpbl9jb3N0KCkgKyBzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpICogKAogICAgY2FsbHN1YiBfc3Bpbl9jb3N0CiAgICBjYWxsc3ViIF9zcGluX3BheWxpbmVfY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjItOTY1CiAgICAvLyAjIGV4dHJhIHBheW1lbnQgYW1vdW50IG11c3QgbGVzcyB0aGFuIG1heCBidXQgZ3JlYXRlciB0aGFuIG1pbiBjb3N0cwogICAgLy8gbWluX2Nvc3RzID0gc2VsZi5fc3Bpbl9jb3N0KCkgKyBzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpICogKAogICAgLy8gICAgIG1heF9wYXlsaW5lX2luZGV4ICsgVUludDY0KDEpCiAgICAvLyApCiAgICB1bmNvdmVyIDQKICAgICoKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTY3CiAgICAvLyBleHRyYV9wYXltZW50X2Ftb3VudCA+PSBtaW5fY29zdHMKICAgIGRpZyAxCiAgICA8PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NjYtOTY4CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGV4dHJhX3BheW1lbnRfYW1vdW50ID49IG1pbl9jb3N0cwogICAgLy8gKSwgImV4dHJhIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gYm94IGNvc3QiCiAgICBhc3NlcnQgLy8gZXh0cmEgcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBib3ggY29zdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5NzAKICAgIC8vIGV4dHJhX3BheW1lbnRfYW1vdW50IDw9IHNlbGYuX2dldF9tYXhfZXh0cmFfcGF5bWVudCgpCiAgICBjYWxsc3ViIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQKICAgIDw9CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk2OS05NzEKICAgIC8vIGFzc2VydCAoCiAgICAvLyAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPD0gc2VsZi5fZ2V0X21heF9leHRyYV9wYXltZW50KCkKICAgIC8vICksICJleHRyYSBwYXltZW50IG11c3QgYmUgbGVzcyB0aGFuIG1heCBleHRyYSBwYXltZW50IgogICAgYXNzZXJ0IC8vIGV4dHJhIHBheW1lbnQgbXVzdCBiZSBsZXNzIHRoYW4gbWF4IGV4dHJhIHBheW1lbnQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTcyLTk4MAogICAgLy8gIyBiYW5rIGFzc2VydGlvbnMKICAgIC8vICMgbG9jayBzcGluIGlmIGJhbGFuY2UgdG90YWwgaXMgbGVzcyB0aGFuIG1pbiBiYW5rIGFtb3VudAogICAgLy8gIyBhc3NlcnQgKAogICAgLy8gIyAgICAgc2VsZi5fZ2V0X2JhbGFuY2VfdG90YWwoKSA+PSBzZWxmLl9nZXRfbWluX2JhbmtfYW1vdW50KCkKICAgIC8vICMgKSwgImJhbGFuY2UgdG90YWwgbXVzdCBiZSBncmVhdGVyIHRoYW4gbWluIGJhbmsgYW1vdW50IgogICAgLy8gIyBVcGRhdGUgYmFsYW5jZSB0cmFja2luZwogICAgLy8gIyAgIEFkZCBiZXQgYW1vdW50IHRvIHRvdGFsIGJhbGFuY2UKICAgIC8vICMgYXNzZXJ0IG1heCBwYXlsaW5lIGluZGV4IGlzIGxlc3MgdGhhbiBtYXggaW5kZXgKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKGV4cGVjdGVkX3BheW1lbnRfYW1vdW50KQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5ODEKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShleHBlY3RlZF9wYXltZW50X2Ftb3VudCkKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk4MwogICAgLy8gZXhwZWN0ZWRfcGF5bWVudF9hbW91bnQgKiBzZWxmLl9nZXRfbWF4X3BheW91dF9tdWx0aXBsaWVyKCkKICAgIGNhbGxzdWIgX2dldF9tYXhfcGF5b3V0X211bHRpcGxpZXIKICAgICoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTg1CiAgICAvLyBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQobWF4X3Bvc3NpYmxlX3BheW91dCkKICAgIGR1cAogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk4NgogICAgLy8gc2VsZi5fZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKG1heF9wb3NzaWJsZV9wYXlvdXQpCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTg3LTk4OAogICAgLy8gIyBDcmVhdGUgYmV0CiAgICAvLyBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIGdsb2JhbCBSb3VuZAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5ODkKICAgIC8vIGJldF9rZXkgPSBzZWxmLl9nZXRfYmV0X2tleShUeG4uc2VuZGVyLCBiZXRfYW1vdW50LCBtYXhfcGF5bGluZV9pbmRleCwgaW5kZXgpCiAgICB0eG4gU2VuZGVyCiAgICBmcmFtZV9kaWcgLTMKICAgIGZyYW1lX2RpZyAtMgogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9nZXRfYmV0X2tleQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3OTgtOTkwCiAgICAvLyAgICAgc2VsZi5iZXQgPSBCb3hNYXAoQnl0ZXMsIEJldCwga2V5X3ByZWZpeD0iIikKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gQmV0OgogICAgLy8gICAgIHJldHVybiBzZWxmLmJldC5nZXQoCiAgICAvLyAgICAgICAgIGJldF9rZXksCiAgICAvLyAgICAgICAgIGRlZmF1bHQ9QmV0KAogICAgLy8gICAgICAgICAgICAgd2hvPWFyYzQuQWRkcmVzcyhHbG9iYWwuemVyb19hZGRyZXNzKSwKICAgIC8vICAgICAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICAgICAgY2xhaW1fcm91bmQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICApLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlczU2KSAtPiBhcmM0LlVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JldF9jbGFpbV9yb3VuZChiZXRfa2V5LmJ5dGVzKSkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X2JldF9jbGFpbV9yb3VuZChzZWxmLCBiZXRfa2V5OiBCeXRlcykgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9nZXRfYmV0KGJldF9rZXkpLmNsYWltX3JvdW5kLm5hdGl2ZQogICAgLy8gCiAgICAvLyAjIC0tLSBib290c3RyYXAgLS0tCiAgICAvLyAKICAgIC8vICMgaW5oZXJpdHMgYm9vc3RyYXBwZWQgZnJvbSBiYW5rIG1hbmFnZXIKICAgIC8vICMgIGRvZXMgbm90IGF0dGVtcHQgdG8gYm9vc3RyYXAgZm9yIGl0CiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2Jvb3RzdHJhcChzZWxmKSAtPiBOb25lOgogICAgLy8gICAgIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoKQogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9ib290c3RyYXBfY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIEdsb2JhbC5taW5fYmFsYW5jZSArIHNlbGYuX3NwaW5fbWFuYWdlcl9ib290c3RyYXBfY29zdCgpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fbWFuYWdlcl9ib290c3RyYXAoc2VsZikgLT4gTm9uZToKICAgIC8vICAgICBzZWxmLl9pbml0aWFsaXplX3NwaW5fcGFyYW1zKCkKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfc3Bpbl9tYW5hZ2VyX2Jvb3RzdHJhcF9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDI2NTAwKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbml0aWFsaXplX3NwaW5fcGFyYW1zKHNlbGYpIC0+IE5vbmU6CiAgICAvLyAgICAgc2VsZi5fb25seV9vd25lcigpCiAgICAvLyAgICAgYXNzZXJ0ICgKICAgIC8vICAgICAgICAgbm90IHNlbGYuX3NwaW5fcGFyYW1zKCkuc3Bpbl9mdXNlLm5hdGl2ZQogICAgLy8gICAgICksICJzcGluIHBhcmFtcyBtdXN0IG5vdCBiZSBpbml0aWFsaXplZCIKICAgIC8vICAgICBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLnZhbHVlID0gU3BpblBhcmFtcygKICAgIC8vICAgICAgICAgbWF4X2V4dHJhX3BheW1lbnQ9YXJjNC5VSW50NjQoMTAwMDAwMCksICAjIDEgVk9JCiAgICAvLyAgICAgICAgIG1heF9wYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgxMDAwKSwgICMgMTAwMHgKICAgIC8vICAgICAgICAgcm91bmRfZnV0dXJlX2RlbHRhPWFyYzQuVUludDY0KDEpLCAgIyAxIHJvdW5kCiAgICAvLyAgICAgICAgIG1pbl9iZXRfYW1vdW50PWFyYzQuVUludDY0KDEwMDAwMDApLCAgIyAxIFZPSSAoMSBWT0kgYmV0LCAxIHBheWxpbmUpCiAgICAvLyAgICAgICAgIG1heF9iZXRfYW1vdW50PWFyYzQuVUludDY0KDIwMDAwMDAwKSwgICMgMjAgVk9JCiAgICAvLyAgICAgICAgIG1pbl9iYW5rX2Ftb3VudD1hcmM0LlVJbnQ2NCgxMDAwMDAwMDAwMDApLCAgIyAxMDBrIFZPSQogICAgLy8gICAgICAgICBzcGluX2Z1c2U9YXJjNC5Cb29sKFRydWUpLAogICAgLy8gICAgICkKICAgIC8vIAogICAgLy8gIyAtLS0gaW1wbGVtZW50YXRpb24gLS0tCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2ludmFsaWRfc3Bpbl9wYXJhbXMoc2VsZikgLT4gU3BpblBhcmFtczoKICAgIC8vICAgICByZXR1cm4gU3BpblBhcmFtcygKICAgIC8vICAgICAgICAgbWF4X2V4dHJhX3BheW1lbnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1heF9wYXlvdXRfbXVsdGlwbGllcj1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgcm91bmRfZnV0dXJlX2RlbHRhPWFyYzQuVUludDY0KDApLAogICAgLy8gICAgICAgICBtaW5fYmV0X2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgbWF4X2JldF9hbW91bnQ9YXJjNC5VSW50NjQoMCksCiAgICAvLyAgICAgICAgIG1pbl9iYW5rX2Ftb3VudD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICAgICAgICAgc3Bpbl9mdXNlPWFyYzQuQm9vbChGYWxzZSksCiAgICAvLyAgICAgKQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluX3BhcmFtcyhzZWxmKSAtPiBTcGluUGFyYW1zOgogICAgLy8gICAgIHJldHVybiBCb3goU3BpblBhcmFtcywga2V5PSJzcGluX3BhcmFtcyIpLmdldCgKICAgIC8vICAgICAgICAgZGVmYXVsdD1zZWxmLl9pbnZhbGlkX3NwaW5fcGFyYW1zKCkKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfZXh0cmFfcGF5bWVudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X2V4dHJhX3BheW1lbnQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfcGF5b3V0X211bHRpcGxpZXIoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1heF9wYXlvdXRfbXVsdGlwbGllci5uYXRpdmUKICAgIC8vIAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YShzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkucm91bmRfZnV0dXJlX2RlbHRhLm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWluX2JldF9hbW91bnQoc2VsZikgLT4gVUludDY0OgogICAgLy8gICAgICIiIgogICAgLy8gICAgIG1pbiBiZXQgYW1vdW50IGlzIDEgVk9JCiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWluX2JldF9hbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfYmV0X2Ftb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgIiIiCiAgICAvLyAgICAgbWF4IGJldCBhbW91bnQgaXMgOSBWT0kuIE11c3QgYmUgYWRqdXN0ZWQgZm9yIHRoZSBtYXggcGF5b3V0IG11bHRpcGxpZXIgYW5kCiAgICAvLyAgICAgbWF4IHBheW91dCBpbmRleAogICAgLy8gICAgICIiIgogICAgLy8gICAgIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1heF9iZXRfYW1vdW50Lm5hdGl2ZQogICAgLy8gCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWluX2JhbmtfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5taW5fYmFua19hbW91bnQubmF0aXZlCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgLy8gICAgIHJldHVybiAoCiAgICAvLyAgICAgICAgIGFyYzQuQWRkcmVzcyhhZGRyZXNzKS5ieXRlcwogICAgLy8gICAgICAgICArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIC8vICAgICAgICAgKyBhcmM0LlVJbnQ2NChpbmRleCkuYnl0ZXMKICAgIC8vICAgICApCiAgICAvLyAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fY29zdChzZWxmKSAtPiBVSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIFVJbnQ2NCg1MDUwMCkKICAgIC8vIAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgc3Bpbl9wYXlsaW5lX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICAvLyAgICAgcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX3NwaW5fcGF5bGluZV9jb3N0KCkpCiAgICAvLyAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX3NwaW5fcGF5bGluZV9jb3N0KHNlbGYpIC0+IFVJbnQ2NDoKICAgIC8vICAgICByZXR1cm4gVUludDY0KDMwMDAwKQogICAgLy8gCiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9zcGluKAogICAgLy8gICAgIHNlbGYsIGJldF9hbW91bnQ6IFVJbnQ2NCwgbWF4X3BheWxpbmVfaW5kZXg6IFVJbnQ2NCwgaW5kZXg6IFVJbnQ2NAogICAgLy8gKSAtPiBCeXRlczoKICAgIC8vICAgICAiIiIKICAgIC8vICAgICBTcGluIHRoZSBzbG90IG1hY2hpbmUuIE91dGNvbWUgaXMgZGV0ZXJtaW5lZCBieSB0aGUgc2VlZAogICAgLy8gICAgIG9mIGZ1dHVyZSByb3VuZC4KICAgIC8vIAogICAgLy8gICAgIEFyZ3M6CiAgICAvLyAgICAgICAgIGJldCAodWludCk6IFRoZSBwbGF5ZXIncyB3YWdlci4KICAgIC8vICAgICAgICAgaW5kZXggKHVpbnQpOiBQbGF5ZXIncyBjaG9pY2Ugb2YgaW5kZXguCiAgICAvLyAKICAgIC8vICAgICBSZXR1cm5zOgogICAgLy8gICAgICAgICByICh1aW50KTogVGhlIHJvdW5kIG51bWJlciBvZiB0aGUgc3Bpbi4KICAgIC8vICAgICAiIiIKICAgIC8vICAgICAjIHBheW1lbnQgYXNzZXJ0aW9ucwogICAgLy8gICAgIGV4cGVjdGVkX3BheW1lbnRfYW1vdW50ID0gYmV0X2Ftb3VudCAqIChtYXhfcGF5bGluZV9pbmRleCArIFVJbnQ2NCgxKSkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA+PSBzZWxmLl9nZXRfbWluX2JldF9hbW91bnQoKQogICAgLy8gICAgICksICJiZXQgYW1vdW50IHRvbyBzbWFsbCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2JldF9hbW91bnQoKQogICAgLy8gICAgICksICJiZXQgYW1vdW50IHRvbyBsYXJnZSIKICAgIC8vICAgICBhY3R1YWxfcGF5bWVudF9hbW91bnQgPSByZXF1aXJlX3BheW1lbnQoVHhuLnNlbmRlcikKICAgIC8vICAgICBhc3NlcnQgYWN0dWFsX3BheW1lbnRfYW1vdW50ID49IGV4cGVjdGVkX3BheW1lbnRfYW1vdW50LCAicGF5bWVudCBpbnN1ZmZpY2llbnQiCiAgICAvLyAgICAgZXh0cmFfcGF5bWVudF9hbW91bnQgPSBhY3R1YWxfcGF5bWVudF9hbW91bnQgLSBleHBlY3RlZF9wYXltZW50X2Ftb3VudAogICAgLy8gICAgICMgZXh0cmEgcGF5bWVudCBhbW91bnQgbXVzdCBsZXNzIHRoYW4gbWF4IGJ1dCBncmVhdGVyIHRoYW4gbWluIGNvc3RzCiAgICAvLyAgICAgbWluX2Nvc3RzID0gc2VsZi5fc3Bpbl9jb3N0KCkgKyBzZWxmLl9zcGluX3BheWxpbmVfY29zdCgpICogKAogICAgLy8gICAgICAgICBtYXhfcGF5bGluZV9pbmRleCArIFVJbnQ2NCgxKQogICAgLy8gICAgICkKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA+PSBtaW5fY29zdHMKICAgIC8vICAgICApLCAiZXh0cmEgcGF5bWVudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBib3ggY29zdCIKICAgIC8vICAgICBhc3NlcnQgKAogICAgLy8gICAgICAgICBleHRyYV9wYXltZW50X2Ftb3VudCA8PSBzZWxmLl9nZXRfbWF4X2V4dHJhX3BheW1lbnQoKQogICAgLy8gICAgICksICJleHRyYSBwYXltZW50IG11c3QgYmUgbGVzcyB0aGFuIG1heCBleHRyYSBwYXltZW50IgogICAgLy8gICAgICMgYmFuayBhc3NlcnRpb25zCiAgICAvLyAgICAgIyBsb2NrIHNwaW4gaWYgYmFsYW5jZSB0b3RhbCBpcyBsZXNzIHRoYW4gbWluIGJhbmsgYW1vdW50CiAgICAvLyAgICAgIyBhc3NlcnQgKAogICAgLy8gICAgICMgICAgIHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkgPj0gc2VsZi5fZ2V0X21pbl9iYW5rX2Ftb3VudCgpCiAgICAvLyAgICAgIyApLCAiYmFsYW5jZSB0b3RhbCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiBtaW4gYmFuayBhbW91bnQiCiAgICAvLyAgICAgIyBVcGRhdGUgYmFsYW5jZSB0cmFja2luZwogICAgLy8gICAgICMgICBBZGQgYmV0IGFtb3VudCB0byB0b3RhbCBiYWxhbmNlCiAgICAvLyAgICAgIyBhc3NlcnQgbWF4IHBheWxpbmUgaW5kZXggaXMgbGVzcyB0aGFuIG1heCBpbmRleAogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKGV4cGVjdGVkX3BheW1lbnRfYW1vdW50KQogICAgLy8gICAgIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShleHBlY3RlZF9wYXltZW50X2Ftb3VudCkKICAgIC8vICAgICBtYXhfcG9zc2libGVfcGF5b3V0ID0gKAogICAgLy8gICAgICAgICBleHBlY3RlZF9wYXltZW50X2Ftb3VudCAqIHNlbGYuX2dldF9tYXhfcGF5b3V0X211bHRpcGxpZXIoKQogICAgLy8gICAgICkKICAgIC8vICAgICBzZWxmLl9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQobWF4X3Bvc3NpYmxlX3BheW91dCkKICAgIC8vICAgICBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUobWF4X3Bvc3NpYmxlX3BheW91dCkKICAgIC8vICAgICAjIENyZWF0ZSBiZXQKICAgIC8vICAgICBjb25maXJtZWRfcm91bmQgPSBHbG9iYWwucm91bmQKICAgIC8vICAgICBiZXRfa2V5ID0gc2VsZi5fZ2V0X2JldF9rZXkoVHhuLnNlbmRlciwgYmV0X2Ftb3VudCwgbWF4X3BheWxpbmVfaW5kZXgsIGluZGV4KQogICAgLy8gICAgIGFzc2VydCBiZXRfa2V5IG5vdCBpbiBzZWxmLmJldCwgImJldCBhbHJlYWR5IGV4aXN0cyIKICAgIGR1cAogICAgYm94X2xlbgogICAgYnVyeSAxCiAgICAhCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5MAogICAgLy8gYXNzZXJ0IGJldF9rZXkgbm90IGluIHNlbGYuYmV0LCAiYmV0IGFscmVhZHkgZXhpc3RzIgogICAgYXNzZXJ0IC8vIGJldCBhbHJlYWR5IGV4aXN0cwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTEKICAgIC8vIGNsYWltX3JvdW5kID0gY29uZmlybWVkX3JvdW5kICsgc2VsZi5fZ2V0X3JvdW5kX2Z1dHVyZV9kZWx0YSgpCiAgICBjYWxsc3ViIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhCiAgICB1bmNvdmVyIDIKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTkzCiAgICAvLyB3aG89YXJjNC5BZGRyZXNzKFR4bi5zZW5kZXIpLAogICAgdHhuIFNlbmRlcgogICAgc3dhcAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTQKICAgIC8vIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIGZyYW1lX2RpZyAtMwogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTUKICAgIC8vIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KG1heF9wYXlsaW5lX2luZGV4KSwKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5OTYKICAgIC8vIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvdmVyIDMKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTkyLTk5OAogICAgLy8gc2VsZi5iZXRbYmV0X2tleV0gPSBCZXQoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICAgICBwYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KDApLAogICAgLy8gKQogICAgdW5jb3ZlciAyCiAgICBkaWcgMQogICAgY29uY2F0CiAgICBkaWcgMgogICAgY29uY2F0CiAgICBkaWcgMwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5NwogICAgLy8gcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIGJ5dGUgMHgwMDAwMDAwMDAwMDAwMDAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojk5Mi05OTgKICAgIC8vIHNlbGYuYmV0W2JldF9rZXldID0gQmV0KAogICAgLy8gICAgIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgYW1vdW50PWFyYzQuVUludDY0KGJldF9hbW91bnQpLAogICAgLy8gICAgIG1heF9wYXlsaW5lX2luZGV4PWFyYzQuVUludDY0KG1heF9wYXlsaW5lX2luZGV4KSwKICAgIC8vICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgcGF5bGluZV9pbmRleD1hcmM0LlVJbnQ2NCgwKSwKICAgIC8vICkKICAgIGNvbmNhdAogICAgZGlnIDQKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAwMQogICAgLy8gd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIHR4biBTZW5kZXIKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTAwMC0xMDA1CiAgICAvLyBCZXRQbGFjZWQoCiAgICAvLyAgICAgd2hvPWFyYzQuQWRkcmVzcyhUeG4uc2VuZGVyKSwKICAgIC8vICAgICBhbW91bnQ9YXJjNC5VSW50NjQoYmV0X2Ftb3VudCksCiAgICAvLyAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgIGNsYWltX3JvdW5kPWFyYzQuVUludDY0KGNsYWltX3JvdW5kKSwKICAgIC8vICkKICAgIHN3YXAKICAgIGNvbmNhdAogICAgc3dhcAogICAgY29uY2F0CiAgICBzd2FwCiAgICBjb25jYXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTk5LTEwMDYKICAgIC8vIGFyYzQuZW1pdCgKICAgIC8vICAgICBCZXRQbGFjZWQoCiAgICAvLyAgICAgICAgIHdobz1hcmM0LkFkZHJlc3MoVHhuLnNlbmRlciksCiAgICAvLyAgICAgICAgIGFtb3VudD1hcmM0LlVJbnQ2NChiZXRfYW1vdW50KSwKICAgIC8vICAgICAgICAgbWF4X3BheWxpbmVfaW5kZXg9YXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLAogICAgLy8gICAgICAgICBjbGFpbV9yb3VuZD1hcmM0LlVJbnQ2NChjbGFpbV9yb3VuZCksCiAgICAvLyAgICAgKQogICAgLy8gKQogICAgbWV0aG9kICJCZXRQbGFjZWQoYWRkcmVzcyx1aW50NjQsdWludDY0LHVpbnQ2NCkiCiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDA3CiAgICAvLyByZXR1cm4gYmV0X2tleQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2dldF9taW5fYmV0X2Ftb3VudCgpIC0+IHVpbnQ2NDoKX2dldF9taW5fYmV0X2Ftb3VudDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODkyLTg5MwogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21pbl9iZXRfYW1vdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OTcKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLm1pbl9iZXRfYW1vdW50Lm5hdGl2ZQogICAgY2FsbHN1YiBfc3Bpbl9wYXJhbXMKICAgIGV4dHJhY3QgMjQgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfbWF4X2JldF9hbW91bnQoKSAtPiB1aW50NjQ6Cl9nZXRfbWF4X2JldF9hbW91bnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg5OS05MDAKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9tYXhfYmV0X2Ftb3VudChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTA1CiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfYmV0X2Ftb3VudC5uYXRpdmUKICAgIGNhbGxzdWIgX3NwaW5fcGFyYW1zCiAgICBleHRyYWN0IDMyIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlci5fZ2V0X21heF9leHRyYV9wYXltZW50KCkgLT4gdWludDY0OgpfZ2V0X21heF9leHRyYV9wYXltZW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4ODAtODgxCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfbWF4X2V4dHJhX3BheW1lbnQoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5Ojg4MgogICAgLy8gcmV0dXJuIHNlbGYuX3NwaW5fcGFyYW1zKCkubWF4X2V4dHJhX3BheW1lbnQubmF0aXZlCiAgICBjYWxsc3ViIF9zcGluX3BhcmFtcwogICAgZXh0cmFjdCAwIDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50OiB1aW50NjQpIC0+IHZvaWQ6Cl9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Njg5LTY5MAogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfaW5jcmVtZW50X2JhbGFuY2VfdG90YWwoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjkxCiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY5MwogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX3RvdGFsLm5hdGl2ZSArIGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDggOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGZyYW1lX2RpZyAtMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2OTItNjk0CiAgICAvLyBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfdG90YWwubmF0aXZlICsgYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiA4CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY5NQogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfbWF4X3BheW91dF9tdWx0aXBsaWVyKCkgLT4gdWludDY0OgpfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODg0LTg4NQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X21heF9wYXlvdXRfbXVsdGlwbGllcihzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6ODg2CiAgICAvLyByZXR1cm4gc2VsZi5fc3Bpbl9wYXJhbXMoKS5tYXhfcGF5b3V0X211bHRpcGxpZXIubmF0aXZlCiAgICBjYWxsc3ViIF9zcGluX3BhcmFtcwogICAgZXh0cmFjdCA4IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5faW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkKGFtb3VudDogdWludDY0KSAtPiB2b2lkOgpfaW5jcmVtZW50X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NjYtNjY3CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9pbmNyZW1lbnRfYmFsYW5jZV9sb2NrZWQoc2VsZiwgYW1vdW50OiBVSW50NjQpIC0+IE5vbmU6CiAgICBwcm90byAxIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjY4CiAgICAvLyBiYW5rX2JhbGFuY2VzID0gc2VsZi5fYmFua19iYWxhbmNlcygpCiAgICBjYWxsc3ViIF9iYW5rX2JhbGFuY2VzCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY3MAogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2xvY2tlZC5uYXRpdmUgKyBhbW91bnQKICAgIGR1cAogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICArCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY2OS02NzEKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9sb2NrZWQgPSBhcmM0LlVJbnQ2NCgKICAgIC8vICAgICBiYW5rX2JhbGFuY2VzLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZSArIGFtb3VudAogICAgLy8gKQogICAgaXRvYgogICAgcmVwbGFjZTIgMTYKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjcyCiAgICAvLyBCb3goQmFua0JhbGFuY2VzLCBrZXk9ImJhbmtfYmFsYW5jZXMiKS52YWx1ZSA9IGJhbmtfYmFsYW5jZXMuY29weSgpCiAgICBieXRlICJiYW5rX2JhbGFuY2VzIgogICAgc3dhcAogICAgYm94X3B1dAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX2RlY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjUxLTY1MgogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZGVjcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYsIGFtb3VudDogVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY1MwogICAgLy8gYmFua19iYWxhbmNlcyA9IHNlbGYuX2JhbmtfYmFsYW5jZXMoKQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTUKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgZHVwCiAgICBleHRyYWN0IDAgOCAvLyBvbiBlcnJvcjogSW5kZXggYWNjZXNzIGlzIG91dCBvZiBib3VuZHMKICAgIGJ0b2kKICAgIGR1cAogICAgZnJhbWVfZGlnIC0xCiAgICA+PQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTQtNjU2CiAgICAvLyBhc3NlcnQgKAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlID49IGFtb3VudAogICAgLy8gKSwgImJhbGFuY2UgYXZhaWxhYmxlIGlzIGxlc3MgdGhhbiBhbW91bnQiCiAgICBhc3NlcnQgLy8gYmFsYW5jZSBhdmFpbGFibGUgaXMgbGVzcyB0aGFuIGFtb3VudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2NTgKICAgIC8vIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICBmcmFtZV9kaWcgLTEKICAgIC0KICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjU3LTY1OQogICAgLy8gYmFua19iYWxhbmNlcy5iYWxhbmNlX2F2YWlsYWJsZSA9IGFyYzQuVUludDY0KAogICAgLy8gICAgIGJhbmtfYmFsYW5jZXMuYmFsYW5jZV9hdmFpbGFibGUubmF0aXZlIC0gYW1vdW50CiAgICAvLyApCiAgICBpdG9iCiAgICByZXBsYWNlMiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY2MAogICAgLy8gQm94KEJhbmtCYWxhbmNlcywga2V5PSJiYW5rX2JhbGFuY2VzIikudmFsdWUgPSBiYW5rX2JhbGFuY2VzLmNvcHkoKQogICAgYnl0ZSAiYmFua19iYWxhbmNlcyIKICAgIHN3YXAKICAgIGJveF9wdXQKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlNwaW5NYW5hZ2VyLl9nZXRfYmV0X2tleShhZGRyZXNzOiBieXRlcywgYW1vdW50OiB1aW50NjQsIG1heF9wYXlsaW5lX2luZGV4OiB1aW50NjQsIGluZGV4OiB1aW50NjQpIC0+IGJ5dGVzOgpfZ2V0X2JldF9rZXk6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxMS05MTQKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iZXRfa2V5KAogICAgLy8gICAgIHNlbGYsIGFkZHJlc3M6IEFjY291bnQsIGFtb3VudDogVUludDY0LCBtYXhfcGF5bGluZV9pbmRleDogVUludDY0LCBpbmRleDogVUludDY0CiAgICAvLyApIC0+IEJ5dGVzOgogICAgcHJvdG8gNCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxNwogICAgLy8gKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTMKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTE2LTkxNwogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtNAogICAgc3dhcAogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxOAogICAgLy8gKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIGZyYW1lX2RpZyAtMgogICAgaXRvYgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MTYtOTE4CiAgICAvLyBhcmM0LkFkZHJlc3MoYWRkcmVzcykuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQoYW1vdW50KS5ieXRlcwogICAgLy8gKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIGNvbmNhdAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo5MTkKICAgIC8vICsgYXJjNC5VSW50NjQoaW5kZXgpLmJ5dGVzCiAgICBmcmFtZV9kaWcgLTEKICAgIGl0b2IKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6OTE2LTkxOQogICAgLy8gYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGFtb3VudCkuYnl0ZXMKICAgIC8vICsgYXJjNC5VSW50NjQobWF4X3BheWxpbmVfaW5kZXgpLmJ5dGVzCiAgICAvLyArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgY29uY2F0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjkxNS05MjAKICAgIC8vIHJldHVybiAoCiAgICAvLyAgICAgYXJjNC5BZGRyZXNzKGFkZHJlc3MpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChhbW91bnQpLmJ5dGVzCiAgICAvLyAgICAgKyBhcmM0LlVJbnQ2NChtYXhfcGF5bGluZV9pbmRleCkuYnl0ZXMKICAgIC8vICAgICArIGFyYzQuVUludDY0KGluZGV4KS5ieXRlcwogICAgLy8gKQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuU3Bpbk1hbmFnZXIuX2dldF9yb3VuZF9mdXR1cmVfZGVsdGEoKSAtPiB1aW50NjQ6Cl9nZXRfcm91bmRfZnV0dXJlX2RlbHRhOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4ODgtODg5CiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfcm91bmRfZnV0dXJlX2RlbHRhKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo4OTAKICAgIC8vIHJldHVybiBzZWxmLl9zcGluX3BhcmFtcygpLnJvdW5kX2Z1dHVyZV9kZWx0YS5uYXRpdmUKICAgIGNhbGxzdWIgX3NwaW5fcGFyYW1zCiAgICBleHRyYWN0IDE2IDggLy8gb24gZXJyb3I6IEluZGV4IGFjY2VzcyBpcyBvdXQgb2YgYm91bmRzCiAgICBidG9pCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5TcGluTWFuYWdlckludGVyZmFjZS5zcGluX2Nvc3QoKSAtPiBieXRlczoKc3Bpbl9jb3N0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo3MzctNzM4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiBzcGluX2Nvc3Qoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NzM5CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fc3Bpbl9jb3N0KCkpCiAgICBjYWxsc3ViIF9zcGluX2Nvc3QKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLm93bmVyX2RlcG9zaXQoYW1vdW50OiBieXRlcykgLT4gdm9pZDoKb3duZXJfZGVwb3NpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTg1LTU4NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgb3duZXJfZGVwb3NpdChzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU5MQogICAgLy8gc2VsZi5fb25seV9vd25lcigpCiAgICBjYWxsc3ViIF9vbmx5X293bmVyCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjU5MgogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfdG90YWwoYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgZHVwCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV90b3RhbAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1OTMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX2F2YWlsYWJsZShhbW91bnQubmF0aXZlKQogICAgY2FsbHN1YiBfaW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlckludGVyZmFjZS5kZXBvc2l0KCkgLT4gdm9pZDoKZGVwb3NpdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDYzLTQ2NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kCiAgICAvLyBkZWYgZGVwb3NpdChzZWxmKSAtPiBOb25lOgogICAgcHJvdG8gMCAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ2OAogICAgLy8gc2VsZi5fZGVwb3NpdCgpCiAgICBjYWxsc3ViIF9kZXBvc2l0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fZGVwb3NpdCgpIC0+IHZvaWQ6Cl9kZXBvc2l0OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1OTUtNTk3CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9kZXBvc2l0KHNlbGYpIC0+IE5vbmU6CiAgICBwcm90byAwIDAKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjAxCiAgICAvLyBwYXltZW50ID0gcmVxdWlyZV9wYXltZW50KFR4bi5zZW5kZXIpCiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIHJlcXVpcmVfcGF5bWVudAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MDIKICAgIC8vIGFzc2VydCBwYXltZW50ID4gMCwgInBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIGR1cAogICAgYXNzZXJ0IC8vIHBheW1lbnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MDMKICAgIC8vIHNlbGYuX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsKHBheW1lbnQpCiAgICBkdXAKICAgIGNhbGxzdWIgX2luY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYwNAogICAgLy8gc2VsZi5faW5jcmVtZW50X2JhbGFuY2VfYXZhaWxhYmxlKHBheW1lbnQpCiAgICBjYWxsc3ViIF9pbmNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VySW50ZXJmYWNlLndpdGhkcmF3KGFtb3VudDogYnl0ZXMpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0NzctNDc4CiAgICAvLyBAYXJjNC5hYmltZXRob2QKICAgIC8vIGRlZiB3aXRoZHJhdyhzZWxmLCBhbW91bnQ6IGFyYzQuVUludDY0KSAtPiBOb25lOgogICAgcHJvdG8gMSAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQ4NgogICAgLy8gc2VsZi5fd2l0aGRyYXcoYW1vdW50Lm5hdGl2ZSkKICAgIGZyYW1lX2RpZyAtMQogICAgYnRvaQogICAgY2FsbHN1YiBfd2l0aGRyYXcKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl93aXRoZHJhdyhhbW91bnQ6IHVpbnQ2NCkgLT4gdm9pZDoKX3dpdGhkcmF3OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MDYtNjA4CiAgICAvLyAjIG92ZXJyaWRlCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF93aXRoZHJhdyhzZWxmLCBhbW91bnQ6IFVJbnQ2NCkgLT4gTm9uZToKICAgIHByb3RvIDEgMAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MTYKICAgIC8vIHNlbGYuX29ubHlfb3duZXIoKQogICAgY2FsbHN1YiBfb25seV9vd25lcgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MTcKICAgIC8vIGFzc2VydCBhbW91bnQgPiBVSW50NjQoMCksICJhbW91bnQgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIKICAgIGZyYW1lX2RpZyAtMQogICAgYXNzZXJ0IC8vIGFtb3VudCBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjYxOAogICAgLy8gYXNzZXJ0IGFtb3VudCA8PSBzZWxmLl9nZXRfYmFsYW5jZV9hdmFpbGFibGUoKSwgImluc3VmZmljaWVudCBiYWxhbmNlIgogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICBhc3NlcnQgLy8gaW5zdWZmaWNpZW50IGJhbGFuY2UKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjE5CiAgICAvLyBhc3NlcnQgYW1vdW50IDw9IHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCksICJpbnN1ZmZpY2llbnQgYmFsYW5jZSIKICAgIGNhbGxzdWIgX2dldF9iYWxhbmNlX3RvdGFsCiAgICBmcmFtZV9kaWcgLTEKICAgID49CiAgICBhc3NlcnQgLy8gaW5zdWZmaWNpZW50IGJhbGFuY2UKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjIwCiAgICAvLyBpdHhuLlBheW1lbnQocmVjZWl2ZXI9VHhuLnNlbmRlciwgYW1vdW50PWFtb3VudCkuc3VibWl0KCkKICAgIGl0eG5fYmVnaW4KICAgIHR4biBTZW5kZXIKICAgIGZyYW1lX2RpZyAtMQogICAgaXR4bl9maWVsZCBBbW91bnQKICAgIGl0eG5fZmllbGQgUmVjZWl2ZXIKICAgIGludCBwYXkKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIGludCAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgaXR4bl9zdWJtaXQKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjIxCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUoYW1vdW50KQogICAgZnJhbWVfZGlnIC0xCiAgICBjYWxsc3ViIF9kZWNyZW1lbnRfYmFsYW5jZV9hdmFpbGFibGUKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjIyCiAgICAvLyBzZWxmLl9kZWNyZW1lbnRfYmFsYW5jZV90b3RhbChhbW91bnQpCiAgICBmcmFtZV9kaWcgLTEKICAgIGNhbGxzdWIgX2RlY3JlbWVudF9iYWxhbmNlX3RvdGFsCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlci5fZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkgLT4gdWludDY0OgpfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2MzktNjQwCiAgICAvLyBAc3Vicm91dGluZQogICAgLy8gZGVmIF9nZXRfYmFsYW5jZV9hdmFpbGFibGUoc2VsZikgLT4gVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY0MQogICAgLy8gcmV0dXJuIHNlbGYuX2JhbmtfYmFsYW5jZXMoKS5iYWxhbmNlX2F2YWlsYWJsZS5uYXRpdmUKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIGV4dHJhY3QgMCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXIuX2dldF9iYWxhbmNlX3RvdGFsKCkgLT4gdWludDY0OgpfZ2V0X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY4NS02ODYKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo2ODcKICAgIC8vIHJldHVybiBzZWxmLl9iYW5rX2JhbGFuY2VzKCkuYmFsYW5jZV90b3RhbC5uYXRpdmUKICAgIGNhbGxzdWIgX2JhbmtfYmFsYW5jZXMKICAgIGV4dHJhY3QgOCA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXJJbnRlcmZhY2UuZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKCkgLT4gYnl0ZXM6CmdldF9iYWxhbmNlX2F2YWlsYWJsZToKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NDk1LTQ5NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X2JhbGFuY2VfYXZhaWxhYmxlKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUwMAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX2F2YWlsYWJsZSgpKQogICAgY2FsbHN1YiBfZ2V0X2JhbGFuY2VfYXZhaWxhYmxlCiAgICBpdG9iCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5CYW5rTWFuYWdlckludGVyZmFjZS5nZXRfYmFsYW5jZV9sb2NrZWQoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VfbG9ja2VkOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo1MDktNTEwCiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfYmFsYW5jZV9sb2NrZWQoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NTE0CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X2JhbGFuY2VfbG9ja2VkKCkpCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV9sb2NrZWQKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LkJhbmtNYW5hZ2VyLl9nZXRfYmFsYW5jZV9sb2NrZWQoKSAtPiB1aW50NjQ6Cl9nZXRfYmFsYW5jZV9sb2NrZWQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjY2Mi02NjMKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9iYWxhbmNlX2xvY2tlZChzZWxmKSAtPiBVSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6NjY0CiAgICAvLyByZXR1cm4gc2VsZi5fYmFua19iYWxhbmNlcygpLmJhbGFuY2VfbG9ja2VkLm5hdGl2ZQogICAgY2FsbHN1YiBfYmFua19iYWxhbmNlcwogICAgZXh0cmFjdCAxNiA4IC8vIG9uIGVycm9yOiBJbmRleCBhY2Nlc3MgaXMgb3V0IG9mIGJvdW5kcwogICAgYnRvaQogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuQmFua01hbmFnZXJJbnRlcmZhY2UuZ2V0X2JhbGFuY2VfdG90YWwoKSAtPiBieXRlczoKZ2V0X2JhbGFuY2VfdG90YWw6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyMy01MjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9iYWxhbmNlX3RvdGFsKHNlbGYpIC0+IGFyYzQuVUludDY0OgogICAgcHJvdG8gMCAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjUyOAogICAgLy8gcmV0dXJuIGFyYzQuVUludDY0KHNlbGYuX2dldF9iYWxhbmNlX3RvdGFsKCkpCiAgICBjYWxsc3ViIF9nZXRfYmFsYW5jZV90b3RhbAogICAgaXRvYgogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuUmVlbE1hbmFnZXIuZ2V0X3JlZWwocmVlbDogYnl0ZXMpIC0+IGJ5dGVzOgpnZXRfcmVlbDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzM4LTM0MAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3JlZWwoc2VsZiwgcmVlbDogYXJjNC5VSW50NjQpIC0+IEJ5dGVzMTAwOgogICAgcHJvdG8gMSAxCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NAogICAgLy8gYXNzZXJ0IHJlZWwgPCBzZWxmLl9nZXRfcmVlbF9jb3VudCgpCiAgICBjYWxsc3ViIF9nZXRfcmVlbF9jb3VudAogICAgaXRvYgogICAgZnJhbWVfZGlnIC0xCiAgICBiPgogICAgYXNzZXJ0CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM0NQogICAgLy8gcmV0dXJuIEJ5dGVzMTAwLmZyb21fYnl0ZXMoc2VsZi5fZ2V0X3JlZWwocmVlbC5uYXRpdmUpKQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9nZXRfcmVlbAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuUmVlbE1hbmFnZXIuX2dldF9yZWVsX2NvdW50KCkgLT4gdWludDY0OgpfZ2V0X3JlZWxfY291bnQ6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjQxOC00MjAKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBzdWJyb3V0aW5lCiAgICAvLyBkZWYgX2dldF9yZWVsX2NvdW50KHNlbGYpIC0+IFVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTo0MjQKICAgIC8vIHJldHVybiBCb3goVUludDY0LCBrZXk9InJlZWxfY291bnQiKS5nZXQoZGVmYXVsdD1VSW50NjQoNSkpCiAgICBieXRlICJyZWVsX2NvdW50IgogICAgYm94X2dldAogICAgc3dhcAogICAgYnRvaQogICAgaW50IDUKICAgIHN3YXAKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICByZXRzdWIKCgovLyBjb250cmFjdC5SZWVsTWFuYWdlci5nZXRfc2xvdChyZWVsOiBieXRlcywgaW5kZXg6IGJ5dGVzKSAtPiBieXRlczoKZ2V0X3Nsb3Q6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM1Ni0zNTgKICAgIC8vICMgb3ZlcnJpZGUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9zbG90KHNlbGYsIHJlZWw6IGFyYzQuVUludDY0LCBpbmRleDogYXJjNC5VSW50NjQpIC0+IEJ5dGVzMToKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjIKICAgIC8vIGFzc2VydCByZWVsIDwgc2VsZi5fZ2V0X3JlZWxfY291bnQoKQogICAgY2FsbHN1YiBfZ2V0X3JlZWxfY291bnQKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAtMgogICAgYj4KICAgIGFzc2VydAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjMKICAgIC8vIGFzc2VydCBpbmRleCA8IHNlbGYuX2dldF9yZWVsX2xlbmd0aCgpCiAgICBjYWxsc3ViIF9nZXRfcmVlbF9sZW5ndGgKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAtMQogICAgYj4KICAgIGFzc2VydAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjQKICAgIC8vIHJldHVybiBCeXRlczEuZnJvbV9ieXRlcyhzZWxmLl9nZXRfc2xvdChyZWVsLm5hdGl2ZSwgaW5kZXgubmF0aXZlKSkKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9nZXRfc2xvdAogICAgcmV0c3ViCgoKLy8gY29udHJhY3QuUmVlbE1hbmFnZXIuX2dldF9zbG90KHJlZWw6IHVpbnQ2NCwgaW5kZXg6IHVpbnQ2NCkgLT4gYnl0ZXM6Cl9nZXRfc2xvdDoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzY2LTM2OAogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQHN1YnJvdXRpbmUKICAgIC8vIGRlZiBfZ2V0X3Nsb3Qoc2VsZiwgcmVlbDogVUludDY0LCBpbmRleDogVUludDY0KSAtPiBCeXRlczoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNjkKICAgIC8vIHJlZWxfbGVuZ3RoID0gc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkKICAgIGNhbGxzdWIgX2dldF9yZWVsX2xlbmd0aAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzAKICAgIC8vIHJldHVybiBzZWxmLl9nZXRfcmVlbHMoKVsKICAgIGNhbGxzdWIgX2dldF9yZWVscwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzAtMzcyCiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X3JlZWxzKClbCiAgICAvLyAgICAgcmVlbCAqIHJlZWxfbGVuZ3RoICsgaW5kZXggOiByZWVsICogcmVlbF9sZW5ndGggKyBpbmRleCArIDEKICAgIC8vIF0KICAgIGR1cAogICAgbGVuCiAgICBzd2FwCiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjM3MQogICAgLy8gcmVlbCAqIHJlZWxfbGVuZ3RoICsgaW5kZXggOiByZWVsICogcmVlbF9sZW5ndGggKyBpbmRleCArIDEKICAgIGZyYW1lX2RpZyAtMgogICAgdW5jb3ZlciAzCiAgICAqCiAgICBmcmFtZV9kaWcgLTEKICAgICsKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzcwLTM3MgogICAgLy8gcmV0dXJuIHNlbGYuX2dldF9yZWVscygpWwogICAgLy8gICAgIHJlZWwgKiByZWVsX2xlbmd0aCArIGluZGV4IDogcmVlbCAqIHJlZWxfbGVuZ3RoICsgaW5kZXggKyAxCiAgICAvLyBdCiAgICBkdXAKICAgIGRpZyAzCiAgICA+PQogICAgZGlnIDEKICAgIGRpZyA0CiAgICB1bmNvdmVyIDIKICAgIHNlbGVjdAogICAgY292ZXIgMgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzEKICAgIC8vIHJlZWwgKiByZWVsX2xlbmd0aCArIGluZGV4IDogcmVlbCAqIHJlZWxfbGVuZ3RoICsgaW5kZXggKyAxCiAgICBpbnQgMQogICAgKwogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozNzAtMzcyCiAgICAvLyByZXR1cm4gc2VsZi5fZ2V0X3JlZWxzKClbCiAgICAvLyAgICAgcmVlbCAqIHJlZWxfbGVuZ3RoICsgaW5kZXggOiByZWVsICogcmVlbF9sZW5ndGggKyBpbmRleCArIDEKICAgIC8vIF0KICAgIGR1cAogICAgZGlnIDQKICAgID49CiAgICBzd2FwCiAgICB1bmNvdmVyIDQKICAgIHVuY292ZXIgMgogICAgc2VsZWN0CiAgICBkdXAKICAgIGRpZyAzCiAgICA8CiAgICBkaWcgMwogICAgc3dhcAogICAgc2VsZWN0CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBzdWJzdHJpbmczCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5SZWVsTWFuYWdlci5nZXRfcmVlbF93aW5kb3cocmVlbDogYnl0ZXMsIGluZGV4OiBieXRlcykgLT4gYnl0ZXM6CmdldF9yZWVsX3dpbmRvdzoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6Mzc0LTM3NgogICAgLy8gIyBvdmVycmlkZQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X3JlZWxfd2luZG93KHNlbGYsIHJlZWw6IGFyYzQuVUludDY0LCBpbmRleDogYXJjNC5VSW50NjQpIC0+IEJ5dGVzMzoKICAgIHByb3RvIDIgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODAKICAgIC8vIGFzc2VydCByZWVsIDwgc2VsZi5fZ2V0X3JlZWxfY291bnQoKQogICAgY2FsbHN1YiBfZ2V0X3JlZWxfY291bnQKICAgIGl0b2IKICAgIGZyYW1lX2RpZyAtMgogICAgYj4KICAgIGFzc2VydAogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozODEtMzgzCiAgICAvLyAjIFJFTSBkb24ndCBuZWVkIHRoaXMgY2hlY2sgYXMgd2UncmUgdXNpbmcgJSBvcGVyYXRvcgogICAgLy8gIyBhc3NlcnQgaW5kZXggPCBzZWxmLl9nZXRfcmVlbF9sZW5ndGgoKQogICAgLy8gcmV0dXJuIEJ5dGVzMy5mcm9tX2J5dGVzKHNlbGYuX2dldF9yZWVsX3dpbmRvdyhyZWVsLm5hdGl2ZSwgaW5kZXgubmF0aXZlKSkKICAgIGZyYW1lX2RpZyAtMgogICAgYnRvaQogICAgZnJhbWVfZGlnIC0xCiAgICBidG9pCiAgICBjYWxsc3ViIF9nZXRfcmVlbF93aW5kb3cKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0Lk93bmFibGVJbnRlcmZhY2UuZ2V0X293bmVyKCkgLT4gYnl0ZXM6CmdldF9vd25lcjoKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MTI2LTEyNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHJlYWRvbmx5PVRydWUpCiAgICAvLyBkZWYgZ2V0X293bmVyKHNlbGYpIC0+IGFyYzQuQWRkcmVzczoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMzEKICAgIC8vIHJldHVybiBhcmM0LkFkZHJlc3Moc2VsZi5fZ2V0X293bmVyKCkpCiAgICBjYWxsc3ViIF9nZXRfb3duZXIKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VySW50ZXJmYWNlLmdldF9yZWVscygpIC0+IGJ5dGVzOgpnZXRfcmVlbHM6CiAgICAvLyBzcmMvc3JjL2NvbnRyYWN0LnB5OjI3Mi0yNzMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZChyZWFkb25seT1UcnVlKQogICAgLy8gZGVmIGdldF9yZWVscyhzZWxmKSAtPiBCeXRlczUwMDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToyNzQKICAgIC8vIHJldHVybiBCeXRlczUwMC5mcm9tX2J5dGVzKHNlbGYuX2dldF9yZWVscygpKQogICAgY2FsbHN1YiBfZ2V0X3JlZWxzCiAgICByZXRzdWIKCgovLyBjb250cmFjdC5SZWVsTWFuYWdlckludGVyZmFjZS5nZXRfcmVlbF9sZW5ndGgoKSAtPiBieXRlczoKZ2V0X3JlZWxfbGVuZ3RoOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMTYtMzE3CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfcmVlbF9sZW5ndGgoc2VsZikgLT4gYXJjNC5VSW50NjQ6CiAgICBwcm90byAwIDEKICAgIC8vIHNyYy9zcmMvY29udHJhY3QucHk6MzE4CiAgICAvLyByZXR1cm4gYXJjNC5VSW50NjQoc2VsZi5fZ2V0X3JlZWxfbGVuZ3RoKCkpCiAgICBjYWxsc3ViIF9nZXRfcmVlbF9sZW5ndGgKICAgIGl0b2IKICAgIHJldHN1YgoKCi8vIGNvbnRyYWN0LlJlZWxNYW5hZ2VySW50ZXJmYWNlLmdldF9yZWVsX2NvdW50KCkgLT4gYnl0ZXM6CmdldF9yZWVsX2NvdW50OgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjQtMzI1CiAgICAvLyBAYXJjNC5hYmltZXRob2QocmVhZG9ubHk9VHJ1ZSkKICAgIC8vIGRlZiBnZXRfcmVlbF9jb3VudChzZWxmKSAtPiBhcmM0LlVJbnQ2NDoKICAgIHByb3RvIDAgMQogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weTozMjYKICAgIC8vIHJldHVybiBhcmM0LlVJbnQ2NChzZWxmLl9nZXRfcmVlbF9jb3VudCgpKQogICAgY2FsbHN1YiBfZ2V0X3JlZWxfY291bnQKICAgIGl0b2IKICAgIHJldHN1Ygo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDEwCgpjb250cmFjdC5TbG90TWFjaGluZS5jbGVhcl9zdGF0ZV9wcm9ncmFtOgogICAgLy8gc3JjL3NyYy9jb250cmFjdC5weToxMDEyCiAgICAvLyBjbGFzcyBTbG90TWFjaGluZShTcGluTWFuYWdlciwgUmVlbE1hbmFnZXIsIE93bmFibGUpOgogICAgaW50IDEKICAgIHJldHVybgo="
    },
    "state": {
        "global": {
            "num_byte_slices": 0,
            "num_uints": 0
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 0
        }
    },
    "schema": {
        "global": {
            "declared": {},
            "reserved": {}
        },
        "local": {
            "declared": {},
            "reserved": {}
        }
    },
    "contract": {
        "name": "SlotMachine",
        "desc": "\n    A simple reel slot machine smart contract\n\n    Boxes:\n        balance*\n        *others*\n            slot machine\n                payline_count UInt64 (default: 9)\n                paylines UInt64[45] (default: *)\n\n    ",
        "methods": [
            {
                "name": "bootstrap",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                }
            },
            {
                "name": "bootstrap_cost",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "transfer_ownership",
                "args": [
                    {
                        "type": "address",
                        "name": "new_owner"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Transfer the ownership of the contract"
            },
            {
                "name": "get_grid",
                "args": [
                    {
                        "type": "byte[32]",
                        "name": "seed"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "byte[15]"
                },
                "desc": "Get the grid of the slot machine."
            },
            {
                "name": "get_payline_count",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "get_payline",
                "args": [
                    {
                        "type": "uint64",
                        "name": "payline_index"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64[5]"
                }
            },
            {
                "name": "get_paylines",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64[100]"
                }
            },
            {
                "name": "match_payline",
                "args": [
                    {
                        "type": "byte[15]",
                        "name": "grid"
                    },
                    {
                        "type": "uint64",
                        "name": "payline_index"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "(uint64,byte)"
                },
                "desc": "Match grid to payline by index\nReturns payline match         count, number of consecutive matches on payline         initial_symbol, staring symbol"
            },
            {
                "name": "get_bet_grid",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[15]"
                }
            },
            {
                "name": "claim",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key",
                        "desc": "The key of the bet to claim"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "uint64",
                    "desc": "The payout for the bet"
                },
                "desc": "Claim a bet"
            },
            {
                "name": "get_payout_multiplier",
                "args": [
                    {
                        "type": "byte",
                        "name": "symbol"
                    },
                    {
                        "type": "uint64",
                        "name": "count"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "get_bet_claim_round",
                "args": [
                    {
                        "type": "byte[56]",
                        "name": "bet_key"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "spin_payline_cost",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "spin",
                "args": [
                    {
                        "type": "uint64",
                        "name": "bet_amount"
                    },
                    {
                        "type": "uint64",
                        "name": "max_payline_index",
                        "desc": "The maximum payline index."
                    },
                    {
                        "type": "uint64",
                        "name": "index",
                        "desc": "Player's choice of index."
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "byte[56]",
                    "desc": "bet_key (bytes): The bet key."
                },
                "desc": "Spin the slot machine. Outcome is determined by the seed\nof future round."
            },
            {
                "name": "spin_cost",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "owner_deposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Deposit funds into the contract as owner. The owner is expected to\nhave already submitted the payment."
            },
            {
                "name": "deposit",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Deposit funds into the contract"
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount",
                        "desc": "The amount of funds to withdraw in atomic units"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw funds from the contract\nOnly callable by contract owner"
            },
            {
                "name": "get_balance_available",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the available balance"
            },
            {
                "name": "get_balance_locked",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the locked balance"
            },
            {
                "name": "get_balance_total",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get the total balance"
            },
            {
                "name": "get_reel",
                "args": [
                    {
                        "type": "uint64",
                        "name": "reel"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "byte[100]"
                },
                "desc": "Get the reel at the given index. Ensures the reel index is within bounds."
            },
            {
                "name": "get_slot",
                "args": [
                    {
                        "type": "uint64",
                        "name": "reel"
                    },
                    {
                        "type": "uint64",
                        "name": "index"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "byte[1]"
                },
                "desc": "Get the slot at the given index. Ensures the reel index and slot index are within bounds."
            },
            {
                "name": "get_reel_window",
                "args": [
                    {
                        "type": "uint64",
                        "name": "reel"
                    },
                    {
                        "type": "uint64",
                        "name": "index"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "byte[3]"
                },
                "desc": "Get the reel window at the given index. Ensures the reel index and window index are within bounds."
            },
            {
                "name": "get_owner",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "address"
                },
                "desc": "Get the owner of the contract"
            },
            {
                "name": "get_reels",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "byte[500]"
                }
            },
            {
                "name": "get_reel_length",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            },
            {
                "name": "get_reel_count",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                }
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "no_op": "CREATE"
    }
};
/**
 * Converts the tuple representation of a PaylineMatch to the struct representation
 */
export function PaylineMatch([count, initialSymbol]) {
    return {
        count,
        initialSymbol,
    };
}
/**
 * Exposes methods for constructing all available smart contract calls
 */
export class SlotMachineCallFactory {
    /**
     * Gets available create call factories
     */
    static get create() {
        return {
            /**
             * Constructs a create call for the SlotMachine smart contract using a bare call
             *
             * @param params Any parameters for the call
             * @returns A TypedCallParams object for the call
             */
            bare(params = {}) {
                return {
                    method: undefined,
                    methodArgs: undefined,
                    ...params,
                };
            },
        };
    }
    /**
     * Constructs a no op call for the bootstrap()void ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static bootstrap(args, params) {
        return {
            method: 'bootstrap()void',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the bootstrap_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static bootstrapCost(args, params) {
        return {
            method: 'bootstrap_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the transfer_ownership(address)void ABI method
     *
     * Transfer the ownership of the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static transferOwnership(args, params) {
        return {
            method: 'transfer_ownership(address)void',
            methodArgs: Array.isArray(args) ? args : [args.newOwner],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_grid(byte[32])byte[15] ABI method
     *
     * Get the grid of the slot machine.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getGrid(args, params) {
        return {
            method: 'get_grid(byte[32])byte[15]',
            methodArgs: Array.isArray(args) ? args : [args.seed],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_payline_count()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getPaylineCount(args, params) {
        return {
            method: 'get_payline_count()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_payline(uint64)uint64[5] ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getPayline(args, params) {
        return {
            method: 'get_payline(uint64)uint64[5]',
            methodArgs: Array.isArray(args) ? args : [args.paylineIndex],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_paylines()uint64[100] ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getPaylines(args, params) {
        return {
            method: 'get_paylines()uint64[100]',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the match_payline(byte[15],uint64)(uint64,byte) ABI method
     *
     * Match grid to payline by index
  Returns payline match         count, number of consecutive matches on payline         initial_symbol, staring symbol
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static matchPayline(args, params) {
        return {
            method: 'match_payline(byte[15],uint64)(uint64,byte)',
            methodArgs: Array.isArray(args) ? args : [args.grid, args.paylineIndex],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_bet_grid(byte[56])byte[15] ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBetGrid(args, params) {
        return {
            method: 'get_bet_grid(byte[56])byte[15]',
            methodArgs: Array.isArray(args) ? args : [args.betKey],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the claim(byte[56])uint64 ABI method
     *
     * Claim a bet
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static claim(args, params) {
        return {
            method: 'claim(byte[56])uint64',
            methodArgs: Array.isArray(args) ? args : [args.betKey],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_payout_multiplier(byte,uint64)uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getPayoutMultiplier(args, params) {
        return {
            method: 'get_payout_multiplier(byte,uint64)uint64',
            methodArgs: Array.isArray(args) ? args : [args.symbol, args.count],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_bet_claim_round(byte[56])uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBetClaimRound(args, params) {
        return {
            method: 'get_bet_claim_round(byte[56])uint64',
            methodArgs: Array.isArray(args) ? args : [args.betKey],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin_payline_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spinPaylineCost(args, params) {
        return {
            method: 'spin_payline_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin(uint64,uint64,uint64)byte[56] ABI method
     *
     * Spin the slot machine. Outcome is determined by the seed
  of future round.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spin(args, params) {
        return {
            method: 'spin(uint64,uint64,uint64)byte[56]',
            methodArgs: Array.isArray(args) ? args : [args.betAmount, args.maxPaylineIndex, args.index],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the spin_cost()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static spinCost(args, params) {
        return {
            method: 'spin_cost()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the owner_deposit(uint64)void ABI method
     *
     * Deposit funds into the contract as owner. The owner is expected to
  have already submitted the payment.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static ownerDeposit(args, params) {
        return {
            method: 'owner_deposit(uint64)void',
            methodArgs: Array.isArray(args) ? args : [args.amount],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the deposit()void ABI method
     *
     * Deposit funds into the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static deposit(args, params) {
        return {
            method: 'deposit()void',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the withdraw(uint64)void ABI method
     *
     * Withdraw funds from the contract
  Only callable by contract owner
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static withdraw(args, params) {
        return {
            method: 'withdraw(uint64)void',
            methodArgs: Array.isArray(args) ? args : [args.amount],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_available()uint64 ABI method
     *
     * Get the available balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceAvailable(args, params) {
        return {
            method: 'get_balance_available()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_locked()uint64 ABI method
     *
     * Get the locked balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceLocked(args, params) {
        return {
            method: 'get_balance_locked()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_balance_total()uint64 ABI method
     *
     * Get the total balance
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getBalanceTotal(args, params) {
        return {
            method: 'get_balance_total()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_reel(uint64)byte[100] ABI method
     *
     * Get the reel at the given index. Ensures the reel index is within bounds.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getReel(args, params) {
        return {
            method: 'get_reel(uint64)byte[100]',
            methodArgs: Array.isArray(args) ? args : [args.reel],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_slot(uint64,uint64)byte[1] ABI method
     *
     * Get the slot at the given index. Ensures the reel index and slot index are within bounds.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getSlot(args, params) {
        return {
            method: 'get_slot(uint64,uint64)byte[1]',
            methodArgs: Array.isArray(args) ? args : [args.reel, args.index],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_reel_window(uint64,uint64)byte[3] ABI method
     *
     * Get the reel window at the given index. Ensures the reel index and window index are within bounds.
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getReelWindow(args, params) {
        return {
            method: 'get_reel_window(uint64,uint64)byte[3]',
            methodArgs: Array.isArray(args) ? args : [args.reel, args.index],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_owner()address ABI method
     *
     * Get the owner of the contract
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getOwner(args, params) {
        return {
            method: 'get_owner()address',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_reels()byte[500] ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getReels(args, params) {
        return {
            method: 'get_reels()byte[500]',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_reel_length()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getReelLength(args, params) {
        return {
            method: 'get_reel_length()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
    /**
     * Constructs a no op call for the get_reel_count()uint64 ABI method
     *
     * @param args Any args for the contract call
     * @param params Any additional parameters for the call
     * @returns A TypedCallParams object for the call
     */
    static getReelCount(args, params) {
        return {
            method: 'get_reel_count()uint64',
            methodArgs: Array.isArray(args) ? args : [],
            ...params,
        };
    }
}
/**
 * A client to make calls to the SlotMachine smart contract
 */
export class SlotMachineClient {
    algod;
    /**
     * The underlying `ApplicationClient` for when you want to have more flexibility
     */
    appClient;
    sender;
    /**
     * Creates a new instance of `SlotMachineClient`
     *
     * @param appDetails appDetails The details to identify the app to deploy
     * @param algod An algod client instance
     */
    constructor(appDetails, algod) {
        this.algod = algod;
        this.sender = appDetails.sender;
        this.appClient = algokit.getAppClient({
            ...appDetails,
            app: APP_SPEC
        }, algod);
    }
    /**
     * Checks for decode errors on the AppCallTransactionResult and maps the return value to the specified generic type
     *
     * @param result The AppCallTransactionResult to be mapped
     * @param returnValueFormatter An optional delegate to format the return value if required
     * @returns The smart contract response with an updated return value
     */
    mapReturnValue(result, returnValueFormatter) {
        if (result.return?.decodeError) {
            throw result.return.decodeError;
        }
        const returnValue = result.return?.returnValue !== undefined && returnValueFormatter !== undefined
            ? returnValueFormatter(result.return.returnValue)
            : result.return?.returnValue;
        return { ...result, return: returnValue };
    }
    /**
     * Calls the ABI method with the matching signature using an onCompletion code of NO_OP
     *
     * @param typedCallParams An object containing the method signature, args, and any other relevant parameters
     * @param returnValueFormatter An optional delegate which when provided will be used to map non-undefined return values to the target type
     * @returns The result of the smart contract call
     */
    async call(typedCallParams, returnValueFormatter) {
        return this.mapReturnValue(await this.appClient.call(typedCallParams), returnValueFormatter);
    }
    /**
     * Idempotently deploys the SlotMachine smart contract.
     *
     * @param params The arguments for the contract calls and any additional parameters for the call
     * @returns The deployment result
     */
    deploy(params = {}) {
        const createArgs = params.createCall?.(SlotMachineCallFactory.create);
        return this.appClient.deploy({
            ...params,
            createArgs,
            createOnCompleteAction: createArgs?.onCompleteAction,
        });
    }
    /**
     * Gets available create methods
     */
    get create() {
        const $this = this;
        return {
            /**
             * Creates a new instance of the SlotMachine smart contract using a bare call.
             *
             * @param args The arguments for the bare call
             * @returns The create result
             */
            async bare(args = {}) {
                return $this.mapReturnValue(await $this.appClient.create(args));
            },
        };
    }
    /**
     * Makes a clear_state call to an existing instance of the SlotMachine smart contract.
     *
     * @param args The arguments for the bare call
     * @returns The clear_state result
     */
    clearState(args = {}) {
        return this.appClient.clearState(args);
    }
    /**
     * Calls the bootstrap()void ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    bootstrap(args, params = {}) {
        return this.call(SlotMachineCallFactory.bootstrap(args, params));
    }
    /**
     * Calls the bootstrap_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    bootstrapCost(args, params = {}) {
        return this.call(SlotMachineCallFactory.bootstrapCost(args, params));
    }
    /**
     * Calls the transfer_ownership(address)void ABI method.
     *
     * Transfer the ownership of the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    transferOwnership(args, params = {}) {
        return this.call(SlotMachineCallFactory.transferOwnership(args, params));
    }
    /**
     * Calls the get_grid(byte[32])byte[15] ABI method.
     *
     * Get the grid of the slot machine.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getGrid(args, params = {}) {
        return this.call(SlotMachineCallFactory.getGrid(args, params));
    }
    /**
     * Calls the get_payline_count()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getPaylineCount(args, params = {}) {
        return this.call(SlotMachineCallFactory.getPaylineCount(args, params));
    }
    /**
     * Calls the get_payline(uint64)uint64[5] ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getPayline(args, params = {}) {
        return this.call(SlotMachineCallFactory.getPayline(args, params));
    }
    /**
     * Calls the get_paylines()uint64[100] ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getPaylines(args, params = {}) {
        return this.call(SlotMachineCallFactory.getPaylines(args, params));
    }
    /**
     * Calls the match_payline(byte[15],uint64)(uint64,byte) ABI method.
     *
     * Match grid to payline by index
  Returns payline match         count, number of consecutive matches on payline         initial_symbol, staring symbol
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    matchPayline(args, params = {}) {
        return this.call(SlotMachineCallFactory.matchPayline(args, params), PaylineMatch);
    }
    /**
     * Calls the get_bet_grid(byte[56])byte[15] ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBetGrid(args, params = {}) {
        return this.call(SlotMachineCallFactory.getBetGrid(args, params));
    }
    /**
     * Calls the claim(byte[56])uint64 ABI method.
     *
     * Claim a bet
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call: The payout for the bet
     */
    claim(args, params = {}) {
        return this.call(SlotMachineCallFactory.claim(args, params));
    }
    /**
     * Calls the get_payout_multiplier(byte,uint64)uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getPayoutMultiplier(args, params = {}) {
        return this.call(SlotMachineCallFactory.getPayoutMultiplier(args, params));
    }
    /**
     * Calls the get_bet_claim_round(byte[56])uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBetClaimRound(args, params = {}) {
        return this.call(SlotMachineCallFactory.getBetClaimRound(args, params));
    }
    /**
     * Calls the spin_payline_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    spinPaylineCost(args, params = {}) {
        return this.call(SlotMachineCallFactory.spinPaylineCost(args, params));
    }
    /**
     * Calls the spin(uint64,uint64,uint64)byte[56] ABI method.
     *
     * Spin the slot machine. Outcome is determined by the seed
  of future round.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call: bet_key (bytes): The bet key.
     */
    spin(args, params = {}) {
        return this.call(SlotMachineCallFactory.spin(args, params));
    }
    /**
     * Calls the spin_cost()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    spinCost(args, params = {}) {
        return this.call(SlotMachineCallFactory.spinCost(args, params));
    }
    /**
     * Calls the owner_deposit(uint64)void ABI method.
     *
     * Deposit funds into the contract as owner. The owner is expected to
  have already submitted the payment.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    ownerDeposit(args, params = {}) {
        return this.call(SlotMachineCallFactory.ownerDeposit(args, params));
    }
    /**
     * Calls the deposit()void ABI method.
     *
     * Deposit funds into the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    deposit(args, params = {}) {
        return this.call(SlotMachineCallFactory.deposit(args, params));
    }
    /**
     * Calls the withdraw(uint64)void ABI method.
     *
     * Withdraw funds from the contract
  Only callable by contract owner
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    withdraw(args, params = {}) {
        return this.call(SlotMachineCallFactory.withdraw(args, params));
    }
    /**
     * Calls the get_balance_available()uint64 ABI method.
     *
     * Get the available balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceAvailable(args, params = {}) {
        return this.call(SlotMachineCallFactory.getBalanceAvailable(args, params));
    }
    /**
     * Calls the get_balance_locked()uint64 ABI method.
     *
     * Get the locked balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceLocked(args, params = {}) {
        return this.call(SlotMachineCallFactory.getBalanceLocked(args, params));
    }
    /**
     * Calls the get_balance_total()uint64 ABI method.
     *
     * Get the total balance
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getBalanceTotal(args, params = {}) {
        return this.call(SlotMachineCallFactory.getBalanceTotal(args, params));
    }
    /**
     * Calls the get_reel(uint64)byte[100] ABI method.
     *
     * Get the reel at the given index. Ensures the reel index is within bounds.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getReel(args, params = {}) {
        return this.call(SlotMachineCallFactory.getReel(args, params));
    }
    /**
     * Calls the get_slot(uint64,uint64)byte[1] ABI method.
     *
     * Get the slot at the given index. Ensures the reel index and slot index are within bounds.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getSlot(args, params = {}) {
        return this.call(SlotMachineCallFactory.getSlot(args, params));
    }
    /**
     * Calls the get_reel_window(uint64,uint64)byte[3] ABI method.
     *
     * Get the reel window at the given index. Ensures the reel index and window index are within bounds.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getReelWindow(args, params = {}) {
        return this.call(SlotMachineCallFactory.getReelWindow(args, params));
    }
    /**
     * Calls the get_owner()address ABI method.
     *
     * Get the owner of the contract
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getOwner(args, params = {}) {
        return this.call(SlotMachineCallFactory.getOwner(args, params));
    }
    /**
     * Calls the get_reels()byte[500] ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getReels(args, params = {}) {
        return this.call(SlotMachineCallFactory.getReels(args, params));
    }
    /**
     * Calls the get_reel_length()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getReelLength(args, params = {}) {
        return this.call(SlotMachineCallFactory.getReelLength(args, params));
    }
    /**
     * Calls the get_reel_count()uint64 ABI method.
     *
     * @param args The arguments for the contract call
     * @param params Any additional parameters for the call
     * @returns The result of the call
     */
    getReelCount(args, params = {}) {
        return this.call(SlotMachineCallFactory.getReelCount(args, params));
    }
    compose() {
        const client = this;
        const atc = new AtomicTransactionComposer();
        let promiseChain = Promise.resolve();
        const resultMappers = [];
        return {
            bootstrap(args, params) {
                promiseChain = promiseChain.then(() => client.bootstrap(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            bootstrapCost(args, params) {
                promiseChain = promiseChain.then(() => client.bootstrapCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            transferOwnership(args, params) {
                promiseChain = promiseChain.then(() => client.transferOwnership(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getGrid(args, params) {
                promiseChain = promiseChain.then(() => client.getGrid(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getPaylineCount(args, params) {
                promiseChain = promiseChain.then(() => client.getPaylineCount(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getPayline(args, params) {
                promiseChain = promiseChain.then(() => client.getPayline(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getPaylines(args, params) {
                promiseChain = promiseChain.then(() => client.getPaylines(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            matchPayline(args, params) {
                promiseChain = promiseChain.then(() => client.matchPayline(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(PaylineMatch);
                return this;
            },
            getBetGrid(args, params) {
                promiseChain = promiseChain.then(() => client.getBetGrid(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            claim(args, params) {
                promiseChain = promiseChain.then(() => client.claim(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getPayoutMultiplier(args, params) {
                promiseChain = promiseChain.then(() => client.getPayoutMultiplier(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBetClaimRound(args, params) {
                promiseChain = promiseChain.then(() => client.getBetClaimRound(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spinPaylineCost(args, params) {
                promiseChain = promiseChain.then(() => client.spinPaylineCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spin(args, params) {
                promiseChain = promiseChain.then(() => client.spin(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            spinCost(args, params) {
                promiseChain = promiseChain.then(() => client.spinCost(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            ownerDeposit(args, params) {
                promiseChain = promiseChain.then(() => client.ownerDeposit(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            deposit(args, params) {
                promiseChain = promiseChain.then(() => client.deposit(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            withdraw(args, params) {
                promiseChain = promiseChain.then(() => client.withdraw(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceAvailable(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceAvailable(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceLocked(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceLocked(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getBalanceTotal(args, params) {
                promiseChain = promiseChain.then(() => client.getBalanceTotal(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getReel(args, params) {
                promiseChain = promiseChain.then(() => client.getReel(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getSlot(args, params) {
                promiseChain = promiseChain.then(() => client.getSlot(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getReelWindow(args, params) {
                promiseChain = promiseChain.then(() => client.getReelWindow(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getOwner(args, params) {
                promiseChain = promiseChain.then(() => client.getOwner(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getReels(args, params) {
                promiseChain = promiseChain.then(() => client.getReels(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getReelLength(args, params) {
                promiseChain = promiseChain.then(() => client.getReelLength(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            getReelCount(args, params) {
                promiseChain = promiseChain.then(() => client.getReelCount(args, { ...params, sendParams: { ...params?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            clearState(args) {
                promiseChain = promiseChain.then(() => client.clearState({ ...args, sendParams: { ...args?.sendParams, skipSending: true, atc } }));
                resultMappers.push(undefined);
                return this;
            },
            addTransaction(txn, defaultSender) {
                promiseChain = promiseChain.then(async () => atc.addTransaction(await algokit.getTransactionWithSigner(txn, defaultSender ?? client.sender)));
                return this;
            },
            async atc() {
                await promiseChain;
                return atc;
            },
            async simulate(options) {
                await promiseChain;
                const result = await atc.simulate(client.algod, new modelsv2.SimulateRequest({ txnGroups: [], ...options }));
                return {
                    ...result,
                    returns: result.methodResults?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i](val.returnValue) : val.returnValue)
                };
            },
            async execute(sendParams) {
                await promiseChain;
                const result = await algokit.sendAtomicTransactionComposer({ atc, sendParams }, client.algod);
                return {
                    ...result,
                    returns: result.returns?.map((val, i) => resultMappers[i] !== undefined ? resultMappers[i](val.returnValue) : val.returnValue)
                };
            }
        };
    }
}
